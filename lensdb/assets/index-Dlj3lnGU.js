var Ro=Object.defineProperty;var Ko=(s,u,a)=>u in s?Ro(s,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[u]=a;var Hr=(s,u,a)=>Ko(s,typeof u!="symbol"?u+"":u,a);(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))p(g);new MutationObserver(g=>{for(const v of g)if(v.type==="childList")for(const h of v.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&p(h)}).observe(document,{childList:!0,subtree:!0});function a(g){const v={};return g.integrity&&(v.integrity=g.integrity),g.referrerPolicy&&(v.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?v.credentials="include":g.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function p(g){if(g.ep)return;g.ep=!0;const v=a(g);fetch(g.href,v)}})();function $t(){}function Xi(s){return s()}function Fi(){return Object.create(null)}function yn(s){s.forEach(Xi)}function Zi(s){return typeof s=="function"}function xn(s,u){return s!=s?u==u:s!==u||s&&typeof s=="object"||typeof s=="function"}function Do(s){return Object.keys(s).length===0}function Mo(s,...u){if(s==null){for(const p of u)p(void 0);return $t}const a=s.subscribe(...u);return a.unsubscribe?()=>a.unsubscribe():a}function U(s,u){s.appendChild(u)}function kt(s,u,a){s.insertBefore(u,a||null)}function St(s){s.parentNode&&s.parentNode.removeChild(s)}function pe(s){return document.createElement(s)}function Ut(s){return document.createTextNode(s)}function xe(){return Ut(" ")}function ui(){return Ut("")}function Ot(s,u,a,p){return s.addEventListener(u,a,p),()=>s.removeEventListener(u,a,p)}function Z(s,u,a){a==null?s.removeAttribute(u):s.getAttribute(u)!==a&&s.setAttribute(u,a)}function qt(s){return s===""?null:+s}function Uo(s){return Array.from(s.childNodes)}function ln(s,u){u=""+u,s.data!==u&&(s.data=u)}function gt(s,u){s.value=u??""}function Ri(s,u,a){for(let p=0;p<s.options.length;p+=1){const g=s.options[p];if(g.__value===u){g.selected=!0;return}}(!a||u!==void 0)&&(s.selectedIndex=-1)}function qo(s){const u=s.querySelector(":checked");return u&&u.__value}function $o(s,u,{bubbles:a=!1,cancelable:p=!1}={}){return new CustomEvent(s,{detail:u,bubbles:a,cancelable:p})}let er;function Xn(s){er=s}function zo(){if(!er)throw new Error("Function called outside component initialization");return er}function si(){const s=zo();return(u,a,{cancelable:p=!1}={})=>{const g=s.$$.callbacks[u];if(g){const v=$o(u,a,{cancelable:p});return g.slice().forEach(h=>{h.call(s,v)}),!v.defaultPrevented}return!0}}const Rn=[],Ki=[];let Dn=[];const Di=[],Vo=Promise.resolve();let ei=!1;function Yo(){ei||(ei=!0,Vo.then(eo))}function wr(s){Dn.push(s)}const Qr=new Set;let Fn=0;function eo(){if(Fn!==0)return;const s=er;do{try{for(;Fn<Rn.length;){const u=Rn[Fn];Fn++,Xn(u),Jo(u.$$)}}catch(u){throw Rn.length=0,Fn=0,u}for(Xn(null),Rn.length=0,Fn=0;Ki.length;)Ki.pop()();for(let u=0;u<Dn.length;u+=1){const a=Dn[u];Qr.has(a)||(Qr.add(a),a())}Dn.length=0}while(Rn.length);for(;Di.length;)Di.pop()();ei=!1,Qr.clear(),Xn(s)}function Jo(s){if(s.fragment!==null){s.update(),yn(s.before_update);const u=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,u),s.after_update.forEach(wr)}}function Go(s){const u=[],a=[];Dn.forEach(p=>s.indexOf(p)===-1?u.push(p):a.push(p)),a.forEach(p=>p()),Dn=u}const gr=new Set;let Nn;function to(){Nn={r:0,c:[],p:Nn}}function no(){Nn.r||yn(Nn.c),Nn=Nn.p}function zt(s,u){s&&s.i&&(gr.delete(s),s.i(u))}function Xt(s,u,a,p){if(s&&s.o){if(gr.has(s))return;gr.add(s),Nn.c.push(()=>{gr.delete(s),p&&(a&&s.d(1),p())}),s.o(u)}else p&&p()}function _r(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function ro(s,u){s.d(1),u.delete(s.key)}function io(s,u,a,p,g,v,h,B,L,m,Y,q){let ie=s.length,Q=v.length,H=ie;const ue={};for(;H--;)ue[s[H].key]=H;const ne=[],Ae=new Map,Te=new Map,ee=[];for(H=Q;H--;){const X=q(g,v,H),Be=a(X);let P=h.get(Be);P?ee.push(()=>P.p(X,u)):(P=m(Be,X),P.c()),Ae.set(Be,ne[H]=P),Be in ue&&Te.set(Be,Math.abs(H-ue[Be]))}const Le=new Set,$=new Set;function le(X){zt(X,1),X.m(B,Y),h.set(X.key,X),Y=X.first,Q--}for(;ie&&Q;){const X=ne[Q-1],Be=s[ie-1],P=X.key,d=Be.key;X===Be?(Y=X.first,ie--,Q--):Ae.has(d)?!h.has(P)||Le.has(P)?le(X):$.has(d)?ie--:Te.get(P)>Te.get(d)?($.add(P),le(X)):(Le.add(d),ie--):(L(Be,h),ie--)}for(;ie--;){const X=s[ie];Ae.has(X.key)||L(X,h)}for(;Q;)le(ne[Q-1]);return yn(ee),ne}function fn(s){s&&s.c()}function on(s,u,a){const{fragment:p,after_update:g}=s.$$;p&&p.m(u,a),wr(()=>{const v=s.$$.on_mount.map(Xi).filter(Zi);s.$$.on_destroy?s.$$.on_destroy.push(...v):yn(v),s.$$.on_mount=[]}),g.forEach(wr)}function an(s,u){const a=s.$$;a.fragment!==null&&(Go(a.after_update),yn(a.on_destroy),a.fragment&&a.fragment.d(u),a.on_destroy=a.fragment=null,a.ctx=[])}function Wo(s,u){s.$$.dirty[0]===-1&&(Rn.push(s),Yo(),s.$$.dirty.fill(0)),s.$$.dirty[u/31|0]|=1<<u%31}function Mn(s,u,a,p,g,v,h=null,B=[-1]){const L=er;Xn(s);const m=s.$$={fragment:null,ctx:[],props:v,update:$t,not_equal:g,bound:Fi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u.context||(L?L.$$.context:[])),callbacks:Fi(),dirty:B,skip_bound:!1,root:u.target||L.$$.root};h&&h(m.root);let Y=!1;if(m.ctx=a?a(s,u.props||{},(q,ie,...Q)=>{const H=Q.length?Q[0]:ie;return m.ctx&&g(m.ctx[q],m.ctx[q]=H)&&(!m.skip_bound&&m.bound[q]&&m.bound[q](H),Y&&Wo(s,q)),ie}):[],m.update(),Y=!0,yn(m.before_update),m.fragment=p?p(m.ctx):!1,u.target){if(u.hydrate){const q=Uo(u.target);m.fragment&&m.fragment.l(q),q.forEach(St)}else m.fragment&&m.fragment.c();u.intro&&zt(s.$$.fragment),on(s,u.target,u.anchor),eo()}Xn(L)}class Un{constructor(){Hr(this,"$$");Hr(this,"$$set")}$destroy(){an(this,1),this.$destroy=$t}$on(u,a){if(!Zi(a))return $t;const p=this.$$.callbacks[u]||(this.$$.callbacks[u]=[]);return p.push(a),()=>{const g=p.indexOf(a);g!==-1&&p.splice(g,1)}}$set(u){this.$$set&&!Do(u)&&(this.$$.skip_bound=!0,this.$$set(u),this.$$.skip_bound=!1)}}const Ho="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ho);const Qo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='26.6'%20height='32'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20308'%3e%3cpath%20fill='%23FF3E00'%20d='M239.682%2040.707C211.113-.182%20154.69-12.301%20113.895%2013.69L42.247%2059.356a82.198%2082.198%200%200%200-37.135%2055.056a86.566%2086.566%200%200%200%208.536%2055.576a82.425%2082.425%200%200%200-12.296%2030.719a87.596%2087.596%200%200%200%2014.964%2066.244c28.574%2040.893%2084.997%2053.007%20125.787%2027.016l71.648-45.664a82.182%2082.182%200%200%200%2037.135-55.057a86.601%2086.601%200%200%200-8.53-55.577a82.409%2082.409%200%200%200%2012.29-30.718a87.573%2087.573%200%200%200-14.963-66.244'%3e%3c/path%3e%3cpath%20fill='%23FFF'%20d='M106.889%20270.841c-23.102%206.007-47.497-3.036-61.103-22.648a52.685%2052.685%200%200%201-9.003-39.85a49.978%2049.978%200%200%201%201.713-6.693l1.35-4.115l3.671%202.697a92.447%2092.447%200%200%200%2028.036%2014.007l2.663.808l-.245%202.659a16.067%2016.067%200%200%200%202.89%2010.656a17.143%2017.143%200%200%200%2018.397%206.828a15.786%2015.786%200%200%200%204.403-1.935l71.67-45.672a14.922%2014.922%200%200%200%206.734-9.977a15.923%2015.923%200%200%200-2.713-12.011a17.156%2017.156%200%200%200-18.404-6.832a15.78%2015.78%200%200%200-4.396%201.933l-27.35%2017.434a52.298%2052.298%200%200%201-14.553%206.391c-23.101%206.007-47.497-3.036-61.101-22.649a52.681%2052.681%200%200%201-9.004-39.849a49.428%2049.428%200%200%201%2022.34-33.114l71.664-45.677a52.218%2052.218%200%200%201%2014.563-6.398c23.101-6.007%2047.497%203.036%2061.101%2022.648a52.685%2052.685%200%200%201%209.004%2039.85a50.559%2050.559%200%200%201-1.713%206.692l-1.35%204.116l-3.67-2.693a92.373%2092.373%200%200%200-28.037-14.013l-2.664-.809l.246-2.658a16.099%2016.099%200%200%200-2.89-10.656a17.143%2017.143%200%200%200-18.398-6.828a15.786%2015.786%200%200%200-4.402%201.935l-71.67%2045.674a14.898%2014.898%200%200%200-6.73%209.975a15.9%2015.9%200%200%200%202.709%2012.012a17.156%2017.156%200%200%200%2018.404%206.832a15.841%2015.841%200%200%200%204.402-1.935l27.345-17.427a52.147%2052.147%200%200%201%2014.552-6.397c23.101-6.006%2047.497%203.037%2061.102%2022.65a52.681%2052.681%200%200%201%209.003%2039.848a49.453%2049.453%200%200%201-22.34%2033.12l-71.664%2045.673a52.218%2052.218%200%200%201-14.563%206.398'%3e%3c/path%3e%3c/svg%3e";var ti=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oo(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ao={exports:{}};(function(s,u){(function(a,p){s.exports=p()})(ti,function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(e,t)},p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function g(e,t,n){for(var r,i=0,c=t.length;i<c;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ti,h=Object.keys,B=Array.isArray;function L(e,t){return typeof t!="object"||h(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||v.Promise||(v.Promise=Promise);var m=Object.getPrototypeOf,Y={}.hasOwnProperty;function q(e,t){return Y.call(e,t)}function ie(e,t){typeof t=="function"&&(t=t(m(e))),(typeof Reflect>"u"?h:Reflect.ownKeys)(t).forEach(function(n){H(e,n,t[n])})}var Q=Object.defineProperty;function H(e,t,n,r){Q(e,t,L(n&&q(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function ue(e){return{from:function(t){return e.prototype=Object.create(t.prototype),H(e.prototype,"constructor",e),{extend:ie.bind(null,e.prototype)}}}}var ne=Object.getOwnPropertyDescriptor,Ae=[].slice;function Te(e,t,n){return Ae.call(e,t,n)}function ee(e,t){return t(e)}function Le(e){if(!e)throw new Error("Assertion Failed")}function $(e){v.setImmediate?setImmediate(e):setTimeout(e,0)}function le(e,t){if(typeof t=="string"&&q(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var c=le(e,t[r]);n.push(c)}return n}var y=t.indexOf(".");if(y!==-1){var b=e[t.substr(0,y)];return b==null?void 0:le(b,t.substr(y+1))}}function X(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Le(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)X(e,t[r],n[r])}else{var c,y,b=t.indexOf(".");b!==-1?(c=t.substr(0,b),(y=t.substr(b+1))===""?n===void 0?B(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=n:X(b=!(b=e[c])||!q(e,c)?e[c]={}:b,y,n)):n===void 0?B(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Be(e){var t,n={};for(t in e)q(e,t)&&(n[t]=e[t]);return n}var P=[].concat;function d(e){return P.apply([],e)}var vn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(d([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return v[e]}),W=new Set(vn.map(function(e){return v[e]})),F=null;function Ne(e){return F=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var r=F.get(n);if(r)return r;if(B(n)){r=[],F.set(n,r);for(var i=0,c=n.length;i<c;++i)r.push(t(n[i]))}else if(W.has(n.constructor))r=n;else{var y,b=m(n);for(y in r=b===Object.prototype?{}:Object.create(b),F.set(n,r),n)q(n,y)&&(r[y]=t(n[y]))}return r}(e),F=null,e}var Ce={}.toString;function Ie(e){return Ce.call(e).slice(8,-1)}var Ke=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Qe=typeof Ke=="symbol"?function(e){var t;return e!=null&&(t=e[Ke])&&t.apply(e)}:function(){return null};function at(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Ye={};function Pe(e){var t,n,r,i;if(arguments.length===1){if(B(e))return e.slice();if(this===Ye&&typeof e=="string")return[e];if(i=Qe(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var ge=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ze=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],rn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ze),De={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function it(e,t){this.name=e,this.message=t}function ke(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Je(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=ke(e,t)}function lt(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=ke(e,this.failures)}ue(it).from(Error).extend({toString:function(){return this.name+": "+this.message}}),ue(Je).from(it),ue(lt).from(it);var D=rn.reduce(function(e,t){return e[t]=t+"Error",e},{}),J=it,j=rn.reduce(function(e,t){var n=t+"Error";function r(i,c){this.name=n,i?typeof i=="string"?(this.message="".concat(i).concat(c?`
 `+c:""),this.inner=c||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=De[t]||n,this.inner=null)}return ue(r).from(J),e[t]=r,e},{});j.Syntax=SyntaxError,j.Type=TypeError,j.Range=RangeError;var V=Ze.reduce(function(e,t){return e[t+"Error"]=j[t],e},{}),te=rn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=j[t]),e},{});function me(){}function $e(e){return e}function ze(e,t){return e==null||e===$e?t:function(n){return t(e(n))}}function _e(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function At(e,t){return e===me?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?_e(r,this.onsuccess):r),i&&(this.onerror=this.onerror?_e(i,this.onerror):i),c!==void 0?c:n}}function yt(e,t){return e===me?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?_e(n,this.onsuccess):n),r&&(this.onerror=this.onerror?_e(r,this.onerror):r)}}function Lt(e,t){return e===me?t:function(n){var r=e.apply(this,arguments);L(n,r);var i=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?_e(i,this.onsuccess):i),c&&(this.onerror=this.onerror?_e(c,this.onerror):c),r===void 0?n===void 0?void 0:n:L(r,n)}}function xt(e,t){return e===me?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Tt(e,t){return e===me?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,c=new Array(i);i--;)c[i]=arguments[i];return n.then(function(){return t.apply(r,c)})}return t.apply(this,arguments)}}te.ModifyError=Je,te.DexieError=it,te.BulkError=lt;var Et=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function vt(e){Et=e}var jt={},ft=100,vn=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,m(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,m(t),e]}(),Ze=vn[0],rn=vn[1],vn=vn[2],rn=rn&&rn.then,et=Ze&&Ze.constructor,Ge=!!vn,pt=function(e,t){fe.push([e,t]),f&&(queueMicrotask(ot),f=!1)},Oe=!0,f=!0,o=[],l=[],w=$e,T={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:me,pgp:!1,env:{},finalize:me},K=T,fe=[],Se=0,he=[];function z(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=K;if(typeof e!="function"){if(e!==jt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Me(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,i){try{i(function(c){if(r._state===null){if(c===r)throw new TypeError("A promise cannot be resolved with itself.");var y=r._lib&&Ue();c&&typeof c.then=="function"?n(r,function(b,E){c instanceof z?c._then(b,E):c.then(b,E)}):(r._state=!0,r._value=c,Fe(r)),y&&wt()}},Me.bind(null,r))}catch(c){Me(r,c)}}(this,e)}var qe={get:function(){var e=K,t=mt;function n(r,i){var c=this,y=!e.global&&(e!==K||t!==mt),b=y&&!Nt(),E=new z(function(O,N){se(c,new We(jn(r,e,y,b),jn(i,e,y,b),O,N,e))});return this._consoleTask&&(E._consoleTask=this._consoleTask),E}return n.prototype=jt,n},set:function(e){H(this,"then",e&&e.prototype===jt?qe:{get:function(){return e},set:qe.set})}};function We(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function Me(e,t){var n,r;l.push(t),e._state===null&&(n=e._lib&&Ue(),t=w(t),e._state=!1,e._value=t,r=e,o.some(function(i){return i._value===r._value})||o.push(r),Fe(e),n&&wt())}function Fe(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)se(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Se===0&&(++Se,pt(function(){--Se==0&&Ee()},[]))}function se(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Se,pt(je,[n,e,t])}else e._listeners.push(t)}function je(e,t,n){try{var r,i=t._value;!t._state&&l.length&&(l=[]),r=Et&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||l.indexOf(i)!==-1||function(c){for(var y=o.length;y;)if(o[--y]._value===c._value)return o.splice(y,1)}(t),n.resolve(r)}catch(c){n.reject(c)}finally{--Se==0&&Ee(),--n.psd.ref||n.psd.finalize()}}function ot(){It(T,function(){Ue()&&wt()})}function Ue(){var e=Oe;return f=Oe=!1,e}function wt(){var e,t,n;do for(;0<fe.length;)for(e=fe,fe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<fe.length);f=Oe=!0}function Ee(){var e=o;o=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=he.slice(0),n=t.length;n;)t[--n]()}function ce(e){return new z(jt,!1,e)}function be(e,t){var n=K;return function(){var r=Ue(),i=K;try{return _t(n,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{_t(i,!1),r&&wt()}}}ie(z.prototype,{then:qe,_then:function(e,t){se(this,new We(null,null,e,t,K))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:ce)(r)}):this.then(null,function(r){return(r&&r.name===t?n:ce)(r)})},finally:function(e){return this.then(function(t){return z.resolve(e()).then(function(){return t})},function(t){return z.resolve(e()).then(function(){return ce(t)})})},timeout:function(e,t){var n=this;return e<1/0?new z(function(r,i){var c=setTimeout(function(){return i(new j.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&H(z.prototype,Symbol.toStringTag,"Dexie.Promise"),T.env=Zt(),ie(z,{all:function(){var e=Pe.apply(null,arguments).map(dt);return new z(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,c){return z.resolve(i).then(function(y){e[c]=y,--r||t(e)},n)})})},resolve:function(e){return e instanceof z?e:e&&typeof e.then=="function"?new z(function(t,n){e.then(t,n)}):new z(jt,!0,e)},reject:ce,race:function(){var e=Pe.apply(null,arguments).map(dt);return new z(function(t,n){e.map(function(r){return z.resolve(r).then(t,n)})})},PSD:{get:function(){return K},set:function(e){return K=e}},totalEchoes:{get:function(){return mt}},newPSD:Pt,usePSD:It,scheduler:{get:function(){return pt},set:function(e){pt=e}},rejectionMapper:{get:function(){return w},set:function(e){w=e}},follow:function(e,t){return new z(function(n,r){return Pt(function(i,c){var y=K;y.unhandleds=[],y.onunhandled=c,y.finalize=_e(function(){var b,E=this;b=function(){E.unhandleds.length===0?i():c(E.unhandleds[0])},he.push(function O(){b(),he.splice(he.indexOf(O),1)}),++Se,pt(function(){--Se==0&&Ee()},[])},y.finalize),e()},t,n,r)})}}),et&&(et.allSettled&&H(z,"allSettled",function(){var e=Pe.apply(null,arguments).map(dt);return new z(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,c){return z.resolve(i).then(function(y){return r[c]={status:"fulfilled",value:y}},function(y){return r[c]={status:"rejected",reason:y}}).then(function(){return--n||t(r)})})})}),et.any&&typeof AggregateError<"u"&&H(z,"any",function(){var e=Pe.apply(null,arguments).map(dt);return new z(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(c,y){return z.resolve(c).then(function(b){return t(b)},function(b){i[y]=b,--r||n(new AggregateError(i))})})})}));var we={awaits:0,echoes:0,id:0},Re=0,Xe=[],Ft=0,mt=0,Vt=0;function Pt(e,t,n,r){var i=K,c=Object.create(i);return c.parent=i,c.ref=0,c.global=!1,c.id=++Vt,T.env,c.env=Ge?{Promise:z,PromiseProp:{value:z,configurable:!0,writable:!0},all:z.all,race:z.race,allSettled:z.allSettled,any:z.any,resolve:z.resolve,reject:z.reject}:{},t&&L(c,t),++i.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},r=It(c,e,n,r),c.ref===0&&c.finalize(),r}function ut(){return we.id||(we.id=++Re),++we.awaits,we.echoes+=ft,we.id}function Nt(){return!!we.awaits&&(--we.awaits==0&&(we.id=0),we.echoes=we.awaits*ft,!0)}function dt(e){return we.echoes&&e&&e.constructor===et?(ut(),e.then(function(t){return Nt(),t},function(t){return Nt(),ht(t)})):e}function Wt(){var e=Xe[Xe.length-1];Xe.pop(),_t(e,!1)}function _t(e,t){var n,r=K;(t?!we.echoes||Ft++&&e===K:!Ft||--Ft&&e===K)||queueMicrotask(t?(function(i){++mt,we.echoes&&--we.echoes!=0||(we.echoes=we.awaits=we.id=0),Xe.push(K),_t(i,!0)}).bind(null,e):Wt),e!==K&&(K=e,r===T&&(T.env=Zt()),Ge&&(n=T.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(v,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Zt(){var e=v.Promise;return Ge?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(v,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function It(e,t,n,r,i){var c=K;try{return _t(e,!0),t(n,r,i)}finally{_t(c,!1)}}function jn(e,t,n,r){return typeof e!="function"?e:function(){var i=K;n&&ut(),_t(t,!0);try{return e.apply(this,arguments)}finally{_t(i,!1),r&&queueMicrotask(Nt)}}}function bn(e){Promise===et&&we.echoes===0?Ft===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+rn).indexOf("[native code]")===-1&&(ut=Nt=me);var ht=z.reject,sn="ï¿¿",Rt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Kt="String expected.",Yt=[],nn="__dbnames",gn="readonly",Er="readwrite";function En(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var li={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function tr(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=Ne(t))[e],t}}function fi(){throw j.Type()}function st(e,t){try{var n=pi(e),r=pi(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(i,c){for(var y=i.length,b=c.length,E=y<b?y:b,O=0;O<E;++O)if(i[O]!==c[O])return i[O]<c[O]?-1:1;return y===b?0:y<b?-1:1}(di(e),di(t));case"Array":return function(i,c){for(var y=i.length,b=c.length,E=y<b?y:b,O=0;O<E;++O){var N=st(i[O],c[O]);if(N!==0)return N}return y===b?0:y<b?-1:1}(e,t)}}catch{}return NaN}function pi(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Ie(e),e==="ArrayBuffer"?"binary":e)}function di(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var hi=(bt.prototype._trans=function(e,t,n){var r=this._tx||K.trans,i=this.name,c=Et&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function y(O,N,_){if(!_.schema[i])throw new j.NotFound("Table "+i+" not part of transaction");return t(_.idbtrans,_)}var b=Ue();try{var E=r&&r.db._novip===this.db._novip?r===K.trans?r._promise(e,y,n):Pt(function(){return r._promise(e,y,n)},{trans:r,transless:K.transless||K}):function O(N,_,C,S){if(N.idbdb&&(N._state.openComplete||K.letThrough||N._vip)){var A=N._createTransaction(_,C,N._dbSchema);try{A.create(),N._state.PR1398_maxLoop=3}catch(x){return x.name===D.InvalidState&&N.isOpen()&&0<--N._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),N.close({disableAutoOpen:!1}),N.open().then(function(){return O(N,_,C,S)})):ht(x)}return A._promise(_,function(x,k){return Pt(function(){return K.trans=A,S(x,k,A)})}).then(function(x){if(_==="readwrite")try{A.idbtrans.commit()}catch{}return _==="readonly"?x:A._completion.then(function(){return x})})}if(N._state.openComplete)return ht(new j.DatabaseClosed(N._state.dbOpenError));if(!N._state.isBeingOpened){if(!N._state.autoOpen)return ht(new j.DatabaseClosed);N.open().catch(me)}return N._state.dbReadyPromise.then(function(){return O(N,_,C,S)})}(this.db,e,[this.name],y);return c&&(E._consoleTask=c,E=E.catch(function(O){return console.trace(O),ht(O)})),E}finally{b&&wt()}},bt.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?ht(new j.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(i){return n.hook.reading.fire(i)})}).then(t)},bt.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(B(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=h(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(E){if(E.compound&&t.every(function(N){return 0<=E.keyPath.indexOf(N)})){for(var O=0;O<t.length;++O)if(t.indexOf(E.keyPath[O])===-1)return!1;return!0}return!1}).sort(function(E,O){return E.keyPath.length-O.keyPath.length})[0];if(n&&this.db._maxKey!==sn){var y=n.keyPath.slice(0,t.length);return this.where(y).equals(y.map(function(O){return e[O]}))}!n&&Et&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName,i=this.db._deps.indexedDB;function c(E,O){return i.cmp(E,O)===0}var b=t.reduce(function(C,O){var N=C[0],_=C[1],C=r[O],S=e[O];return[N||C,N||!C?En(_,C&&C.multi?function(A){return A=le(A,O),B(A)&&A.some(function(x){return c(S,x)})}:function(A){return c(S,le(A,O))}):_]},[null,null]),y=b[0],b=b[1];return y?this.where(y.name).equals(e[y.keyPath]).filter(b):n?this.filter(b):this.where(t).equals("")},bt.prototype.filter=function(e){return this.toCollection().and(e)},bt.prototype.count=function(e){return this.toCollection().count(e)},bt.prototype.offset=function(e){return this.toCollection().offset(e)},bt.prototype.limit=function(e){return this.toCollection().limit(e)},bt.prototype.each=function(e){return this.toCollection().each(e)},bt.prototype.toArray=function(e){return this.toCollection().toArray(e)},bt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},bt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,B(e)?"[".concat(e.join("+"),"]"):e))},bt.prototype.reverse=function(){return this.toCollection().reverse()},bt.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function i(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof fi&&(function(E,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function N(){this.constructor=E}a(E,O),E.prototype=O===null?Object.create(O):(N.prototype=O.prototype,new N)}(i,t=e),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return r},e=i);for(var c=new Set,y=e.prototype;y;y=m(y))Object.getOwnPropertyNames(y).forEach(function(E){return c.add(E)});function b(E){if(!E)return E;var O,N=Object.create(e.prototype);for(O in E)if(!c.has(O))try{N[O]=E[O]}catch{}return N}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=b,this.hook("reading",b),e},bt.prototype.defineClass=function(){return this.mapToClass(function(e){L(this,e)})},bt.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,c=r.keyPath,y=e;return c&&i&&(y=tr(c)(e)),this._trans("readwrite",function(b){return n.core.mutate({trans:b,type:"add",keys:t!=null?[t]:null,values:[y]})}).then(function(b){return b.numFailures?z.reject(b.failures[0]):b.lastResult}).then(function(b){if(c)try{X(e,c,b)}catch{}return b})},bt.prototype.update=function(e,t){return typeof e!="object"||B(e)?this.where(":id").equals(e).modify(t):(e=le(e,this.schema.primKey.keyPath),e===void 0?ht(new j.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},bt.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,c=r.keyPath,y=e;return c&&i&&(y=tr(c)(e)),this._trans("readwrite",function(b){return n.core.mutate({trans:b,type:"put",values:[y],keys:t!=null?[t]:null})}).then(function(b){return b.numFailures?z.reject(b.failures[0]):b.lastResult}).then(function(b){if(c)try{X(e,c,b)}catch{}return b})},bt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?z.reject(n.failures[0]):void 0})},bt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:li})}).then(function(t){return t.numFailures?z.reject(t.failures[0]):void 0})},bt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(i){return t.hook.reading.fire(i)})})})},bt.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,c=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(y){var O=r.schema.primKey,b=O.auto,O=O.keyPath;if(O&&i)throw new j.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new j.InvalidArgument("Arguments objects and keys must have the same length");var E=e.length,O=O&&b?e.map(tr(O)):e;return r.core.mutate({trans:y,type:"add",keys:i,values:O,wantResults:c}).then(function(A){var _=A.numFailures,C=A.results,S=A.lastResult,A=A.failures;if(_===0)return c?C:S;throw new lt("".concat(r.name,".bulkAdd(): ").concat(_," of ").concat(E," operations failed"),A)})})},bt.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,c=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(y){var O=r.schema.primKey,b=O.auto,O=O.keyPath;if(O&&i)throw new j.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new j.InvalidArgument("Arguments objects and keys must have the same length");var E=e.length,O=O&&b?e.map(tr(O)):e;return r.core.mutate({trans:y,type:"put",keys:i,values:O,wantResults:c}).then(function(A){var _=A.numFailures,C=A.results,S=A.lastResult,A=A.failures;if(_===0)return c?C:S;throw new lt("".concat(r.name,".bulkPut(): ").concat(_," of ").concat(E," operations failed"),A)})})},bt.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(y){return y.key}),i=e.map(function(y){return y.changes}),c=[];return this._trans("readwrite",function(y){return n.getMany({trans:y,keys:r,cache:"clone"}).then(function(b){var E=[],O=[];e.forEach(function(_,C){var S=_.key,A=_.changes,x=b[C];if(x){for(var k=0,I=Object.keys(A);k<I.length;k++){var R=I[k],M=A[R];if(R===t.schema.primKey.keyPath){if(st(M,S)!==0)throw new j.Constraint("Cannot update primary key in bulkUpdate()")}else X(x,R,M)}c.push(C),E.push(S),O.push(x)}});var N=E.length;return n.mutate({trans:y,type:"put",keys:E,values:O,updates:{keys:r,changeSpecs:i}}).then(function(_){var C=_.numFailures,S=_.failures;if(C===0)return N;for(var A=0,x=Object.keys(S);A<x.length;A++){var k,I=x[A],R=c[Number(I)];R!=null&&(k=S[I],delete S[I],S[R]=k)}throw new lt("".concat(t.name,".bulkUpdate(): ").concat(C," of ").concat(N," operations failed"),S)})})})},bt.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(y){var i=y.numFailures,c=y.lastResult,y=y.failures;if(i===0)return c;throw new lt("".concat(t.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),y)})},bt);function bt(){}function qn(e){function t(y,b){if(b){for(var E=arguments.length,O=new Array(E-1);--E;)O[E-1]=arguments[E];return n[y].subscribe.apply(null,O),e}if(typeof y=="string")return n[y]}var n={};t.addEventType=c;for(var r=1,i=arguments.length;r<i;++r)c(arguments[r]);return t;function c(y,b,E){if(typeof y!="object"){var O;b=b||xt;var N={subscribers:[],fire:E=E||me,subscribe:function(_){N.subscribers.indexOf(_)===-1&&(N.subscribers.push(_),N.fire=b(N.fire,_))},unsubscribe:function(_){N.subscribers=N.subscribers.filter(function(C){return C!==_}),N.fire=N.subscribers.reduce(b,E)}};return n[y]=t[y]=N}h(O=y).forEach(function(_){var C=O[_];if(B(C))c(_,O[_][0],O[_][1]);else{if(C!=="asap")throw new j.InvalidArgument("Invalid event config");var S=c(_,$e,function(){for(var A=arguments.length,x=new Array(A);A--;)x[A]=arguments[A];S.subscribers.forEach(function(k){$(function(){k.apply(null,x)})})})}})}}function $n(e,t){return ue(t).from({prototype:e}),t}function Bn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function kr(e,t){e.filter=En(e.filter,t)}function Ar(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return En(r(),t())}:t,e.justLimit=n&&!r}function nr(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new j.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function yi(e,t,n){var r=nr(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function rr(e,t,n,r){var i=e.replayFilter?En(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},y=function(b,E,O){var N,_;i&&!i(E,O,function(C){return E.stop(C)},function(C){return E.fail(C)})||((_=""+(N=E.primaryKey))=="[object ArrayBuffer]"&&(_=""+new Uint8Array(N)),q(c,_)||(c[_]=!0,t(b,E,O)))};return Promise.all([e.or._iterate(y,n),vi(yi(e,r,n),e.algorithm,y,!e.keysOnly&&e.valueMapper)])}return vi(yi(e,r,n),En(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function vi(e,t,n,r){var i=be(r?function(c,y,b){return n(r(c),y,b)}:n);return e.then(function(c){if(c)return c.start(function(){var y=function(){return c.continue()};t&&!t(c,function(b){return y=b},function(b){c.stop(b),y=me},function(b){c.fail(b),y=me})||i(c.value,c,function(b){return y=b}),y()})})}var vn=Symbol(),zn=(mi.prototype.execute=function(e){if(this.add!==void 0){var t=this.add;if(B(t))return g(g([],B(e)?e:[],!0),t).sort();if(typeof t=="number")return(Number(e)||0)+t;if(typeof t=="bigint")try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(this.remove!==void 0){var n=this.remove;if(B(n))return B(e)?e.filter(function(r){return!n.includes(r)}).sort():[];if(typeof n=="number")return Number(e)-n;if(typeof n=="bigint")try{return BigInt(e)-n}catch{return BigInt(0)-n}throw new TypeError("Invalid subtrahend ".concat(n))}return t=(t=this.replacePrefix)===null||t===void 0?void 0:t[0],t&&typeof e=="string"&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},mi);function mi(e){Object.assign(this,e)}var mo=(ct.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans("readonly",e).then(t)},ct.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,ht.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ct.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=En(t.algorithm,e)},ct.prototype._iterate=function(e,t){return rr(this._ctx,e,t,this._ctx.table.core)},ct.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&L(n,e),t._ctx=n,t},ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},ct.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return rr(t,e,n,t.table.core)})},ct.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,i=r.table.core;if(Bn(r,!0))return i.count({trans:n,query:{index:nr(r,i.schema),range:r.range}}).then(function(y){return Math.min(y,r.limit)});var c=0;return rr(r,function(){return++c,!1},n,i).then(function(){return c})}).then(e)},ct.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function c(E,O){return O?c(E[n[O]],O-1):E[r]}var y=this._ctx.dir==="next"?1:-1;function b(E,O){return E=c(E,i),O=c(O,i),E<O?-y:O<E?y:0}return this.toArray(function(E){return E.sort(b)}).then(t)},ct.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&Bn(r,!0)&&0<r.limit){var i=r.valueMapper,c=nr(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:c,range:r.range}}).then(function(b){return b=b.result,i?b.map(i):b})}var y=[];return rr(r,function(b){return y.push(b)},n,r.table.core).then(function(){return y})},e)},ct.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Bn(t)?Ar(t,function(){var n=e;return function(r,i){return n===0||(n===1?--n:i(function(){r.advance(n),n=0}),!1)}}):Ar(t,function(){var n=e;return function(){return--n<0}})),this},ct.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ar(this._ctx,function(){var t=e;return function(n,r,i){return--t<=0&&r(i),0<=t}},!0),this},ct.prototype.until=function(e,t){return kr(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},ct.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ct.prototype.last=function(e){return this.reverse().first(e)},ct.prototype.filter=function(e){var t;return kr(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=En(t.isMatch,e),this},ct.prototype.and=function(e){return this.filter(e)},ct.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ct.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ct.prototype.desc=function(){return this.reverse()},ct.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},ct.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ct.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},ct.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.key)}).then(function(){return n}).then(e)},ct.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Bn(t,!0)&&0<t.limit)return this._read(function(r){var i=nr(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:i,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.primaryKey)}).then(function(){return n}).then(e)},ct.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ct.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ct.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ct.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return kr(this._ctx,function(i){var r=i.primaryKey.toString(),i=q(t,r);return t[r]=!0,!i}),this},ct.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i,c,y;y=typeof e=="function"?e:(i=h(e),c=i.length,function(k){for(var I=!1,R=0;R<c;++R){var M=i[R],G=e[M],oe=le(k,M);G instanceof zn?(X(k,M,G.execute(oe)),I=!0):oe!==G&&(X(k,M,G),I=!0)}return I});function b(k,M){var R=M.failures,M=M.numFailures;A+=k-M;for(var G=0,oe=h(R);G<oe.length;G++){var ye=oe[G];S.push(R[ye])}}var E=n.table.core,O=E.schema.primaryKey,N=O.outbound,_=O.extractKey,C=t.db._options.modifyChunkSize||200,S=[],A=0,x=[];return t.clone().primaryKeys().then(function(k){function I(M){var G=Math.min(C,k.length-M);return E.getMany({trans:r,keys:k.slice(M,M+G),cache:"immutable"}).then(function(oe){for(var ye=[],ae=[],de=N?[]:null,ve=[],re=0;re<G;++re){var Ve=oe[re],He={value:Ne(Ve),primKey:k[M+re]};y.call(He,He.value,He)!==!1&&(He.value==null?ve.push(k[M+re]):N||st(_(Ve),_(He.value))===0?(ae.push(He.value),N&&de.push(k[M+re])):(ve.push(k[M+re]),ye.push(He.value)))}return Promise.resolve(0<ye.length&&E.mutate({trans:r,type:"add",values:ye}).then(function(rt){for(var tt in rt.failures)ve.splice(parseInt(tt),1);b(ye.length,rt)})).then(function(){return(0<ae.length||R&&typeof e=="object")&&E.mutate({trans:r,type:"put",keys:de,values:ae,criteria:R,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<M}).then(function(rt){return b(ae.length,rt)})}).then(function(){return(0<ve.length||R&&e===Tr)&&E.mutate({trans:r,type:"delete",keys:ve,criteria:R,isAdditionalChunk:0<M}).then(function(rt){return b(ve.length,rt)})}).then(function(){return k.length>M+G&&I(M+C)})})}var R=Bn(n)&&n.limit===1/0&&(typeof e!="function"||e===Tr)&&{index:n.index,range:n.range};return I(0).then(function(){if(0<S.length)throw new Je("Error modifying one or more objects",S,A,x);return k.length})})})},ct.prototype.delete=function(){var e=this._ctx,t=e.range;return Bn(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then(function(c){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(y){var b=y.failures;if(y.lastResult,y.results,y=y.numFailures,y)throw new Je("Could not delete some values",Object.keys(b).map(function(E){return b[E]}),c-y);return c-y})})}):this.modify(Tr)},ct);function ct(){}var Tr=function(e,t){return t.value=null};function bo(e,t){return e<t?-1:e===t?0:1}function go(e,t){return t<e?-1:e===t?0:1}function tn(e,t,n){return e=e instanceof gi?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function In(e){return new e.Collection(e,function(){return bi("")}).limit(0)}function ir(e,t,n,r){var i,c,y,b,E,O,N,_=n.length;if(!n.every(function(A){return typeof A=="string"}))return tn(e,Kt);function C(A){i=A==="next"?function(k){return k.toUpperCase()}:function(k){return k.toLowerCase()},c=A==="next"?function(k){return k.toLowerCase()}:function(k){return k.toUpperCase()},y=A==="next"?bo:go;var x=n.map(function(k){return{lower:c(k),upper:i(k)}}).sort(function(k,I){return y(k.lower,I.lower)});b=x.map(function(k){return k.upper}),E=x.map(function(k){return k.lower}),N=(O=A)==="next"?"":r}C("next"),e=new e.Collection(e,function(){return wn(b[0],E[_-1]+r)}),e._ondirectionchange=function(A){C(A)};var S=0;return e._addAlgorithm(function(A,x,k){var I=A.key;if(typeof I!="string")return!1;var R=c(I);if(t(R,E,S))return!0;for(var M=null,G=S;G<_;++G){var oe=function(ye,ae,de,ve,re,Ve){for(var He=Math.min(ye.length,ve.length),rt=-1,tt=0;tt<He;++tt){var cn=ae[tt];if(cn!==ve[tt])return re(ye[tt],de[tt])<0?ye.substr(0,tt)+de[tt]+de.substr(tt+1):re(ye[tt],ve[tt])<0?ye.substr(0,tt)+ve[tt]+de.substr(tt+1):0<=rt?ye.substr(0,rt)+ae[rt]+de.substr(rt+1):null;re(ye[tt],cn)<0&&(rt=tt)}return He<ve.length&&Ve==="next"?ye+de.substr(ye.length):He<ye.length&&Ve==="prev"?ye.substr(0,de.length):rt<0?null:ye.substr(0,rt)+ve[rt]+de.substr(rt+1)}(I,R,b[G],E[G],y,O);oe===null&&M===null?S=G+1:(M===null||0<y(M,oe))&&(M=oe)}return x(M!==null?function(){A.continue(M+N)}:k),!1}),e}function wn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function bi(e){return{type:1,lower:e,upper:e}}var gi=(Object.defineProperty(Dt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Dt.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?In(this):new this.Collection(this,function(){return wn(e,t,!n,!r)})}catch{return tn(this,Rt)}},Dt.prototype.equals=function(e){return e==null?tn(this,Rt):new this.Collection(this,function(){return bi(e)})},Dt.prototype.above=function(e){return e==null?tn(this,Rt):new this.Collection(this,function(){return wn(e,void 0,!0)})},Dt.prototype.aboveOrEqual=function(e){return e==null?tn(this,Rt):new this.Collection(this,function(){return wn(e,void 0,!1)})},Dt.prototype.below=function(e){return e==null?tn(this,Rt):new this.Collection(this,function(){return wn(void 0,e,!1,!0)})},Dt.prototype.belowOrEqual=function(e){return e==null?tn(this,Rt):new this.Collection(this,function(){return wn(void 0,e)})},Dt.prototype.startsWith=function(e){return typeof e!="string"?tn(this,Kt):this.between(e,e+sn,!0,!0)},Dt.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):ir(this,function(t,n){return t.indexOf(n[0])===0},[e],sn)},Dt.prototype.equalsIgnoreCase=function(e){return ir(this,function(t,n){return t===n[0]},[e],"")},Dt.prototype.anyOfIgnoreCase=function(){var e=Pe.apply(Ye,arguments);return e.length===0?In(this):ir(this,function(t,n){return n.indexOf(t)!==-1},e,"")},Dt.prototype.startsWithAnyOfIgnoreCase=function(){var e=Pe.apply(Ye,arguments);return e.length===0?In(this):ir(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,sn)},Dt.prototype.anyOf=function(){var e=this,t=Pe.apply(Ye,arguments),n=this._cmp;try{t.sort(n)}catch{return tn(this,Rt)}if(t.length===0)return In(this);var r=new this.Collection(this,function(){return wn(t[0],t[t.length-1])});r._ondirectionchange=function(c){n=c==="next"?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm(function(c,y,b){for(var E=c.key;0<n(E,t[i]);)if(++i===t.length)return y(b),!1;return n(E,t[i])===0||(y(function(){c.continue(t[i])}),!1)}),r},Dt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Dt.prototype.noneOf=function(){var e=Pe.apply(Ye,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return tn(this,Rt)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Dt.prototype.inAnyRange=function(I,t){var n=this,r=this._cmp,i=this._ascending,c=this._descending,y=this._min,b=this._max;if(I.length===0)return In(this);if(!I.every(function(R){return R[0]!==void 0&&R[1]!==void 0&&i(R[0],R[1])<=0}))return tn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",j.InvalidArgument);var E=!t||t.includeLowers!==!1,O=t&&t.includeUppers===!0,N,_=i;function C(R,M){return _(R[0],M[0])}try{(N=I.reduce(function(R,M){for(var G=0,oe=R.length;G<oe;++G){var ye=R[G];if(r(M[0],ye[1])<0&&0<r(M[1],ye[0])){ye[0]=y(ye[0],M[0]),ye[1]=b(ye[1],M[1]);break}}return G===oe&&R.push(M),R},[])).sort(C)}catch{return tn(this,Rt)}var S=0,A=O?function(R){return 0<i(R,N[S][1])}:function(R){return 0<=i(R,N[S][1])},x=E?function(R){return 0<c(R,N[S][0])}:function(R){return 0<=c(R,N[S][0])},k=A,I=new this.Collection(this,function(){return wn(N[0][0],N[N.length-1][1],!E,!O)});return I._ondirectionchange=function(R){_=R==="next"?(k=A,i):(k=x,c),N.sort(C)},I._addAlgorithm(function(R,M,G){for(var oe,ye=R.key;k(ye);)if(++S===N.length)return M(G),!1;return!A(oe=ye)&&!x(oe)||(n._cmp(ye,N[S][1])===0||n._cmp(ye,N[S][0])===0||M(function(){_===i?R.continue(N[S][0]):R.continue(N[S][1])}),!1)}),I},Dt.prototype.startsWithAnyOf=function(){var e=Pe.apply(Ye,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?In(this):this.inAnyRange(e.map(function(t){return[t,t+sn]})):tn(this,"startsWithAnyOf() only works with strings")},Dt);function Dt(){}function dn(e){return be(function(t){return Vn(t),e(t.target.error),!1})}function Vn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Yn="storagemutated",Pr="x-storagemutated-1",_n=qn(null,Yn),wo=(hn.prototype._lock=function(){return Le(!K.global),++this._reculock,this._reculock!==1||K.global||(K.lockOwnerFor=this),this},hn.prototype._unlock=function(){if(Le(!K.global),--this._reculock==0)for(K.global||(K.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{It(e[1],e[0])}catch{}}return this},hn.prototype._locked=function(){return this._reculock&&K.lockOwnerFor!==this},hn.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(Le(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new j.DatabaseClosed(r);case"MissingAPIError":throw new j.MissingAPI(r.message,r);default:throw new j.OpenFailed(r)}if(!this.active)throw new j.TransactionInactive;return Le(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=be(function(i){Vn(i),t._reject(e.error)}),e.onabort=be(function(i){Vn(i),t.active&&t._reject(new j.Abort(e.error)),t.active=!1,t.on("abort").fire(i)}),e.oncomplete=be(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&_n.storagemutated.fire(e.mutatedParts)}),this},hn.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return ht(new j.ReadOnly("Transaction is readonly"));if(!this.active)return ht(new j.TransactionInactive);if(this._locked())return new z(function(c,y){r._blockedFuncs.push([function(){r._promise(e,t,n).then(c,y)},K])});if(n)return Pt(function(){var c=new z(function(y,b){r._lock();var E=t(y,b,r);E&&E.then&&E.then(y,b)});return c.finally(function(){return r._unlock()}),c._lib=!0,c});var i=new z(function(c,y){var b=t(c,y,r);b&&b.then&&b.then(c,y)});return i._lib=!0,i},hn.prototype._root=function(){return this.parent?this.parent._root():this},hn.prototype.waitFor=function(e){var t,n=this._root(),r=z.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function c(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=c)}());var i=n._waitingFor;return new z(function(c,y){r.then(function(b){return n._waitingQueue.push(be(c.bind(null,b)))},function(b){return n._waitingQueue.push(be(y.bind(null,b)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},hn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new j.Abort))},hn.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(q(t,e))return t[e];var n=this.schema[e];if(!n)throw new j.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},hn);function hn(){}function Nr(e,t,n,r,i,c,y){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:c,src:(n&&!y?"&":"")+(r?"*":"")+(i?"++":"")+wi(t)}}function wi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Cr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(i){return[i.name,i]},n.reduce(function(i,c,y){return y=r(c,y),y&&(i[y[0]]=y[1]),i},{}))};var r}var Jn=function(e){try{return e.only([[]]),Jn=function(){return[[]]},[[]]}catch{return Jn=function(){return sn},sn}};function xr(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return le(n,t)}:function(n){return le(n,e)};var t}function _i(e){return[].slice.call(e)}var _o=0;function Gn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Oo(e,t,E){function r(k){if(k.type===3)return null;if(k.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var S=k.lower,A=k.upper,x=k.lowerOpen,k=k.upperOpen;return S===void 0?A===void 0?null:t.upperBound(A,!!k):A===void 0?t.lowerBound(S,!!x):t.bound(S,A,!!x,!!k)}function i(C){var S,A=C.name;return{name:A,schema:C,mutate:function(x){var k=x.trans,I=x.type,R=x.keys,M=x.values,G=x.range;return new Promise(function(oe,ye){oe=be(oe);var ae=k.objectStore(A),de=ae.keyPath==null,ve=I==="put"||I==="add";if(!ve&&I!=="delete"&&I!=="deleteRange")throw new Error("Invalid operation type: "+I);var re,Ve=(R||M||{length:1}).length;if(R&&M&&R.length!==M.length)throw new Error("Given keys array must have same length as given values array.");if(Ve===0)return oe({numFailures:0,failures:{},results:[],lastResult:void 0});function He(Qt){++cn,Vn(Qt)}var rt=[],tt=[],cn=0;if(I==="deleteRange"){if(G.type===4)return oe({numFailures:cn,failures:tt,results:[],lastResult:void 0});G.type===3?rt.push(re=ae.clear()):rt.push(re=ae.delete(r(G)))}else{var de=ve?de?[M,R]:[M,null]:[R,null],nt=de[0],Jt=de[1];if(ve)for(var Gt=0;Gt<Ve;++Gt)rt.push(re=Jt&&Jt[Gt]!==void 0?ae[I](nt[Gt],Jt[Gt]):ae[I](nt[Gt])),re.onerror=He;else for(Gt=0;Gt<Ve;++Gt)rt.push(re=ae[I](nt[Gt])),re.onerror=He}function mr(Qt){Qt=Qt.target.result,rt.forEach(function(Tn,Wr){return Tn.error!=null&&(tt[Wr]=Tn.error)}),oe({numFailures:cn,failures:tt,results:I==="delete"?R:rt.map(function(Tn){return Tn.result}),lastResult:Qt})}re.onerror=function(Qt){He(Qt),mr(Qt)},re.onsuccess=mr})},getMany:function(x){var k=x.trans,I=x.keys;return new Promise(function(R,M){R=be(R);for(var G,oe=k.objectStore(A),ye=I.length,ae=new Array(ye),de=0,ve=0,re=function(rt){rt=rt.target,ae[rt._pos]=rt.result,++ve===de&&R(ae)},Ve=dn(M),He=0;He<ye;++He)I[He]!=null&&((G=oe.get(I[He]))._pos=He,G.onsuccess=re,G.onerror=Ve,++de);de===0&&R(ae)})},get:function(x){var k=x.trans,I=x.key;return new Promise(function(R,M){R=be(R);var G=k.objectStore(A).get(I);G.onsuccess=function(oe){return R(oe.target.result)},G.onerror=dn(M)})},query:(S=O,function(x){return new Promise(function(k,I){k=be(k);var R,M,G,de=x.trans,oe=x.values,ye=x.limit,re=x.query,ae=ye===1/0?void 0:ye,ve=re.index,re=re.range,de=de.objectStore(A),ve=ve.isPrimaryKey?de:de.index(ve.name),re=r(re);if(ye===0)return k({result:[]});S?((ae=oe?ve.getAll(re,ae):ve.getAllKeys(re,ae)).onsuccess=function(Ve){return k({result:Ve.target.result})},ae.onerror=dn(I)):(R=0,M=!oe&&"openKeyCursor"in ve?ve.openKeyCursor(re):ve.openCursor(re),G=[],M.onsuccess=function(Ve){var He=M.result;return He?(G.push(oe?He.value:He.primaryKey),++R===ye?k({result:G}):void He.continue()):k({result:G})},M.onerror=dn(I))})}),openCursor:function(x){var k=x.trans,I=x.values,R=x.query,M=x.reverse,G=x.unique;return new Promise(function(oe,ye){oe=be(oe);var ve=R.index,ae=R.range,de=k.objectStore(A),de=ve.isPrimaryKey?de:de.index(ve.name),ve=M?G?"prevunique":"prev":G?"nextunique":"next",re=!I&&"openKeyCursor"in de?de.openKeyCursor(r(ae),ve):de.openCursor(r(ae),ve);re.onerror=dn(ye),re.onsuccess=be(function(Ve){var He,rt,tt,cn,nt=re.result;nt?(nt.___id=++_o,nt.done=!1,He=nt.continue.bind(nt),rt=(rt=nt.continuePrimaryKey)&&rt.bind(nt),tt=nt.advance.bind(nt),cn=function(){throw new Error("Cursor not stopped")},nt.trans=k,nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=function(){throw new Error("Cursor not started")},nt.fail=be(ye),nt.next=function(){var Jt=this,Gt=1;return this.start(function(){return Gt--?Jt.continue():Jt.stop()}).then(function(){return Jt})},nt.start=function(Jt){function Gt(){if(re.result)try{Jt()}catch(Qt){nt.fail(Qt)}else nt.done=!0,nt.start=function(){throw new Error("Cursor behind last entry")},nt.stop()}var mr=new Promise(function(Qt,Tn){Qt=be(Qt),re.onerror=dn(Tn),nt.fail=Tn,nt.stop=function(Wr){nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=cn,Qt(Wr)}});return re.onsuccess=be(function(Qt){re.onsuccess=Gt,Gt()}),nt.continue=He,nt.continuePrimaryKey=rt,nt.advance=tt,Gt(),mr},oe(nt)):oe(null)},ye)})},count:function(x){var k=x.query,I=x.trans,R=k.index,M=k.range;return new Promise(function(G,oe){var ye=I.objectStore(A),ae=R.isPrimaryKey?ye:ye.index(R.name),ye=r(M),ae=ye?ae.count(ye):ae.count();ae.onsuccess=be(function(de){return G(de.target.result)}),ae.onerror=dn(oe)})}}}var c,y,b,N=(y=E,b=_i((c=e).objectStoreNames),{schema:{name:c.name,tables:b.map(function(C){return y.objectStore(C)}).map(function(C){var S=C.keyPath,k=C.autoIncrement,A=B(S),x={},k={name:C.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:S==null,compound:A,keyPath:S,autoIncrement:k,unique:!0,extractKey:xr(S)},indexes:_i(C.indexNames).map(function(I){return C.index(I)}).map(function(G){var R=G.name,M=G.unique,oe=G.multiEntry,G=G.keyPath,oe={name:R,compound:B(G),keyPath:G,unique:M,multiEntry:oe,extractKey:xr(G)};return x[Gn(G)]=oe}),getIndexByKeyPath:function(I){return x[Gn(I)]}};return x[":id"]=k.primaryKey,S!=null&&(x[Gn(S)]=k.primaryKey),k})},hasGetAll:0<b.length&&"getAll"in y.objectStore(b[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),E=N.schema,O=N.hasGetAll,N=E.tables.map(i),_={};return N.forEach(function(C){return _[C.name]=C}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(C){if(!_[C])throw new Error("Table '".concat(C,"' not found"));return _[C]},MIN_KEY:-1/0,MAX_KEY:Jn(t),schema:E}}function So(e,t,n,r){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=Oo(t,i,r),e.dbcore.reduce(function(c,y){return y=y.create,p(p({},c),y(c))},r))}}function or(e,r){var n=r.db,r=So(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(i){var c=i.name;e.core.schema.tables.some(function(y){return y.name===c})&&(i.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=i.core))})}function ar(e,t,n,r){n.forEach(function(i){var c=r[i];t.forEach(function(y){var b=function E(O,N){return ne(O,N)||(O=m(O))&&E(O,N)}(y,i);(!b||"value"in b&&b.value===void 0)&&(y===e.Transaction.prototype||y instanceof e.Transaction?H(y,i,{get:function(){return this.table(i)},set:function(E){Q(this,i,{value:E,writable:!0,configurable:!0,enumerable:!0})}}):y[i]=new e.Table(i,c))})})}function jr(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Eo(e,t){return e._cfg.version-t._cfg.version}function ko(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Cr("$meta",Si("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,i);c.create(n),c._completion.catch(r);var y=c._reject.bind(c),b=K.transless||K;Pt(function(){return K.trans=c,K.transless=b,t!==0?(or(e,n),O=t,((E=c).storeNames.includes("$meta")?E.table("$meta").get("version").then(function(N){return N??O}):z.resolve(O)).then(function(N){return C=N,S=c,A=n,x=[],N=(_=e)._versions,k=_._dbSchema=sr(0,_.idbdb,A),(N=N.filter(function(I){return I._cfg.version>=C})).length!==0?(N.forEach(function(I){x.push(function(){var R=k,M=I._cfg.dbschema;cr(_,R,A),cr(_,M,A),k=_._dbSchema=M;var G=Br(R,M);G.add.forEach(function(ve){Ir(A,ve[0],ve[1].primKey,ve[1].indexes)}),G.change.forEach(function(ve){if(ve.recreate)throw new j.Upgrade("Not yet support for changing primary key");var re=A.objectStore(ve.name);ve.add.forEach(function(Ve){return ur(re,Ve)}),ve.change.forEach(function(Ve){re.deleteIndex(Ve.name),ur(re,Ve)}),ve.del.forEach(function(Ve){return re.deleteIndex(Ve)})});var oe=I._cfg.contentUpgrade;if(oe&&I._cfg.version>C){or(_,A),S._memoizedTables={};var ye=Be(M);G.del.forEach(function(ve){ye[ve]=R[ve]}),jr(_,[_.Transaction.prototype]),ar(_,[_.Transaction.prototype],h(ye),ye),S.schema=ye;var ae,de=ge(oe);return de&&ut(),G=z.follow(function(){var ve;(ae=oe(S))&&de&&(ve=Nt.bind(null,null),ae.then(ve,ve))}),ae&&typeof ae.then=="function"?z.resolve(ae):G.then(function(){return ae})}}),x.push(function(R){var M,G,oe=I._cfg.dbschema;M=oe,G=R,[].slice.call(G.db.objectStoreNames).forEach(function(ye){return M[ye]==null&&G.db.deleteObjectStore(ye)}),jr(_,[_.Transaction.prototype]),ar(_,[_.Transaction.prototype],_._storeNames,_._dbSchema),S.schema=_._dbSchema}),x.push(function(R){_.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(_.idbdb.version/10)===I._cfg.version?(_.idbdb.deleteObjectStore("$meta"),delete _._dbSchema.$meta,_._storeNames=_._storeNames.filter(function(M){return M!=="$meta"})):R.objectStore("$meta").put(I._cfg.version,"version"))})}),function I(){return x.length?z.resolve(x.shift()(S.idbtrans)).then(I):z.resolve()}().then(function(){Oi(k,A)})):z.resolve();var _,C,S,A,x,k}).catch(y)):(h(i).forEach(function(N){Ir(n,N,i[N].primKey,i[N].indexes)}),or(e,n),void z.follow(function(){return e.on.populate.fire(c)}).catch(y));var E,O})}function Ao(e,t){Oi(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=sr(0,e.idbdb,t);cr(e,e._dbSchema,t);for(var r=0,i=Br(n,e._dbSchema).change;r<i.length;r++){var c=function(y){if(y.change.length||y.recreate)return console.warn("Unable to patch indexes of table ".concat(y.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=t.objectStore(y.name);y.add.forEach(function(E){Et&&console.debug("Dexie upgrade patch: Creating missing index ".concat(y.name,".").concat(E.src)),ur(b,E)})}(i[r]);if(typeof c=="object")return c.value}}function Br(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],c=t[n];if(i){var y={name:n,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||i.primKey.auto!==c.primKey.auto)y.recreate=!0,r.change.push(y);else{var b=i.idxByName,E=c.idxByName,O=void 0;for(O in b)E[O]||y.del.push(O);for(O in E){var N=b[O],_=E[O];N?N.src!==_.src&&y.change.push(_):y.add.push(_)}(0<y.del.length||0<y.add.length||0<y.change.length)&&r.change.push(y)}}else r.add.push([n,c])}return r}function Ir(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(c){return ur(i,c)}),i}function Oi(e,t){h(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Et&&console.debug("Dexie: Creating missing table",n),Ir(t,n,e[n].primKey,e[n].indexes))})}function ur(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function sr(e,t,n){var r={};return Te(t.objectStoreNames,0).forEach(function(i){for(var c=n.objectStore(i),y=Nr(wi(O=c.keyPath),O||"",!0,!1,!!c.autoIncrement,O&&typeof O!="string",!0),b=[],E=0;E<c.indexNames.length;++E){var N=c.index(c.indexNames[E]),O=N.keyPath,N=Nr(N.name,O,!!N.unique,!!N.multiEntry,!1,O&&typeof O!="string",!1);b.push(N)}r[i]=Cr(i,y,b)}),r}function cr(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var c=r[i],y=n.objectStore(c);e._hasGetAll="getAll"in y;for(var b=0;b<y.indexNames.length;++b){var E=y.indexNames[b],O=y.index(E).keyPath,N=typeof O=="string"?O:"["+Te(O).join("+")+"]";!t[c]||(O=t[c].idxByName[N])&&(O.name=E,delete t[c].idxByName[N],t[c].idxByName[E]=O)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&v.WorkerGlobalScope&&v instanceof v.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Si(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Nr(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),B(i),n===0)})}var To=(lr.prototype._parseStoresSpec=function(e,t){h(e).forEach(function(n){if(e[n]!==null){var r=Si(e[n]),i=r.shift();if(i.unique=!0,i.multi)throw new j.Schema("Primary key cannot be multi-valued");r.forEach(function(c){if(c.auto)throw new j.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new j.Schema("Index must have a name and cannot be an empty string")}),t[n]=Cr(n,i,r)}})},lr.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?L(this._cfg.storesSource,n):n;var n=t._versions,r={},i={};return n.forEach(function(c){L(r,c._cfg.storesSource),i=c._cfg.dbschema={},c._parseStoresSpec(r,i)}),t._dbSchema=i,jr(t,[t._allTables,t,t.Transaction.prototype]),ar(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],h(i),i),t._storeNames=h(i),this},lr.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Tt(this._cfg.contentUpgrade||me,e),this},lr);function lr(){}function Lr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new mn(nn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Fr(e){return e&&typeof e.databases=="function"}function Rr(e){return Pt(function(){return K.letThrough=!0,e()})}function Kr(e){return!("from"in e)}var Ht=function(e,t){if(!this){var n=new Ht;return e&&"d"in e&&L(n,e),n}L(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Wn(e,t,n){var r=st(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(Kr(e))return L(e,{from:t,to:n,d:1});var i=e.l,r=e.r;if(st(n,e.from)<0)return i?Wn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},ki(e);if(0<st(t,e.to))return r?Wn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},ki(e);st(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<st(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&Hn(e,i),r&&n&&Hn(e,r)}}function Hn(e,t){Kr(t)||function n(r,E){var c=E.from,y=E.to,b=E.l,E=E.r;Wn(r,c,y),b&&n(r,b),E&&n(r,E)}(e,t)}function Ei(e,t){var n=fr(t),r=n.next();if(r.done)return!1;for(var i=r.value,c=fr(e),y=c.next(i.from),b=y.value;!r.done&&!y.done;){if(st(b.from,i.to)<=0&&0<=st(b.to,i.from))return!0;st(i.from,b.from)<0?i=(r=n.next(b.from)).value:b=(y=c.next(i.from)).value}return!1}function fr(e){var t=Kr(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&st(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||st(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function ki(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=1<r?"r":r<-1?"l":"";i&&(t=i=="r"?"l":"r",n=p({},e),r=e[i],e.from=r.from,e.to=r.to,e[i]=r[i],n[i]=r[t],(e[t]=n).d=Ai(n)),e.d=Ai(e)}function Ai(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function pr(e,t){return h(t).forEach(function(n){e[n]?Hn(e[n],t[n]):e[n]=function r(i){var c,y,b={};for(c in i)q(i,c)&&(y=i[c],b[c]=!y||typeof y!="object"||W.has(y.constructor)?y:r(y));return b}(t[n])}),e}function Dr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Ei(t[n],e[n])})}ie(Ht.prototype,((rn={add:function(e){return Hn(this,e),this},addKey:function(e){return Wn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Wn(t,n,n)}),this},hasKey:function(e){var t=fr(this).next(e).value;return t&&st(t.from,e)<=0&&0<=st(t.to,e)}})[Ke]=function(){return fr(this)},rn));var kn={},Mr={},Ur=!1;function dr(e){pr(Mr,e),Ur||(Ur=!0,setTimeout(function(){Ur=!1,qr(Mr,!(Mr={}))},0))}function qr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(kn);r<i.length;r++)Ti(y=i[r],e,n,t);else for(var c in e){var y,b=/^idb\:\/\/(.*)\/(.*)\//.exec(c);b&&(c=b[1],b=b[2],(y=kn["idb://".concat(c,"/").concat(b)])&&Ti(y,e,n,t))}n.forEach(function(E){return E()})}function Ti(e,t,n,r){for(var i=[],c=0,y=Object.entries(e.queries.query);c<y.length;c++){for(var b=y[c],E=b[0],O=[],N=0,_=b[1];N<_.length;N++){var C=_[N];Dr(t,C.obsSet)?C.subscribers.forEach(function(k){return n.add(k)}):r&&O.push(C)}r&&i.push([E,O])}if(r)for(var S=0,A=i;S<A.length;S++){var x=A[S],E=x[0],O=x[1];e.queries.query[E]=O}}function Po(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ht(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),c=!1;function y(){if(t.openCanceller!==r)throw new j.DatabaseClosed("db.open() was cancelled")}function b(){return new z(function(C,S){if(y(),!n)throw new j.MissingAPI;var A=e.name,x=t.autoSchema||!i?n.open(A):n.open(A,i);if(!x)throw new j.MissingAPI;x.onerror=dn(S),x.onblocked=be(e._fireOnBlocked),x.onupgradeneeded=be(function(k){var I;N=x.transaction,t.autoSchema&&!e._options.allowEmptyDB?(x.onerror=Vn,N.abort(),x.result.close(),(I=n.deleteDatabase(A)).onsuccess=I.onerror=be(function(){S(new j.NoSuchDatabase("Database ".concat(A," doesnt exist")))})):(N.onerror=dn(S),k=k.oldVersion>Math.pow(2,62)?0:k.oldVersion,_=k<1,e.idbdb=x.result,c&&Ao(e,N),ko(e,k/10,N,S))},S),x.onsuccess=be(function(){N=null;var k,I,R,M,G,oe=e.idbdb=x.result,ye=Te(oe.objectStoreNames);if(0<ye.length)try{var ae=oe.transaction((M=ye).length===1?M[0]:M,"readonly");if(t.autoSchema)I=oe,R=ae,(k=e).verno=I.version/10,R=k._dbSchema=sr(0,I,R),k._storeNames=Te(I.objectStoreNames,0),ar(k,[k._allTables],h(R),R);else if(cr(e,e._dbSchema,ae),((G=Br(sr(0,(G=e).idbdb,ae),G._dbSchema)).add.length||G.change.some(function(de){return de.add.length||de.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),oe.close(),i=oe.version+1,c=!0,C(b());or(e,ae)}catch{}Yt.push(e),oe.onversionchange=be(function(de){t.vcFired=!0,e.on("versionchange").fire(de)}),oe.onclose=be(function(de){e.on("close").fire(de)}),_&&(G=e._deps,ae=A,oe=G.indexedDB,G=G.IDBKeyRange,Fr(oe)||ae===nn||Lr(oe,G).put({name:ae}).catch(me)),C()},S)}).catch(function(C){switch(C==null?void 0:C.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(0<i)return i=0,b()}return z.reject(C)})}var E,O=t.dbReadyResolve,N=null,_=!1;return z.race([r,(typeof navigator>"u"?z.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(C){function S(){return indexedDB.databases().finally(C)}E=setInterval(S,100),S()}).finally(function(){return clearInterval(E)}):Promise.resolve()).then(b)]).then(function(){return y(),t.onReadyBeingFired=[],z.resolve(Rr(function(){return e.on.ready.fire(e.vip)})).then(function C(){if(0<t.onReadyBeingFired.length){var S=t.onReadyBeingFired.reduce(Tt,me);return t.onReadyBeingFired=[],z.resolve(Rr(function(){return S(e.vip)})).then(C)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(C){t.dbOpenError=C;try{N&&N.abort()}catch{}return r===t.openCanceller&&e._close(),ht(C)}).finally(function(){t.openComplete=!0,O()}).then(function(){var C;return _&&(C={},e.tables.forEach(function(S){S.schema.indexes.forEach(function(A){A.name&&(C["idb://".concat(e.name,"/").concat(S.name,"/").concat(A.name)]=new Ht(-1/0,[[[]]]))}),C["idb://".concat(e.name,"/").concat(S.name,"/")]=C["idb://".concat(e.name,"/").concat(S.name,"/:dels")]=new Ht(-1/0,[[[]]])}),_n(Yn).fire(C),qr(C,!0)),e})}function $r(e){function t(c){return e.next(c)}var n=i(t),r=i(function(c){return e.throw(c)});function i(c){return function(E){var b=c(E),E=b.value;return b.done?E:E&&typeof E.then=="function"?E.then(n,r):B(E)?Promise.all(E).then(n,r):n(E)}}return i(t)()}function hr(e,t,n){for(var r=B(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var No={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return p(p({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},c=[];function y(_,C,S){var A=Gn(_),x=i[A]=i[A]||[],k=_==null?0:typeof _=="string"?1:_.length,I=0<C,I=p(p({},S),{name:I?"".concat(A,"(virtual-from:").concat(S.name,")"):S.name,lowLevelIndex:S,isVirtual:I,keyTail:C,keyLength:k,extractKey:xr(_),unique:!I&&S.unique});return x.push(I),I.isPrimaryKey||c.push(I),1<k&&y(k===2?_[0]:_.slice(0,k-1),C+1,S),x.sort(function(R,M){return R.keyTail-M.keyTail}),I}t=y(r.primaryKey.keyPath,0,r.primaryKey),i[":id"]=[t];for(var b=0,E=r.indexes;b<E.length;b++){var O=E[b];y(O.keyPath,0,O)}function N(_){var C,S=_.query.index;return S.isVirtual?p(p({},_),{query:{index:S.lowLevelIndex,range:(C=_.query.range,S=S.keyTail,{type:C.type===1?2:C.type,lower:hr(C.lower,C.lowerOpen?e.MAX_KEY:e.MIN_KEY,S),lowerOpen:!0,upper:hr(C.upper,C.upperOpen?e.MIN_KEY:e.MAX_KEY,S),upperOpen:!0})}}):_}return p(p({},n),{schema:p(p({},r),{primaryKey:t,indexes:c,getIndexByKeyPath:function(_){return(_=i[Gn(_)])&&_[0]}}),count:function(_){return n.count(N(_))},query:function(_){return n.query(N(_))},openCursor:function(_){var C=_.query.index,S=C.keyTail,A=C.isVirtual,x=C.keyLength;return A?n.openCursor(N(_)).then(function(I){return I&&k(I)}):n.openCursor(_);function k(I){return Object.create(I,{continue:{value:function(R){R!=null?I.continue(hr(R,_.reverse?e.MAX_KEY:e.MIN_KEY,S)):_.unique?I.continue(I.key.slice(0,x).concat(_.reverse?e.MIN_KEY:e.MAX_KEY,S)):I.continue()}},continuePrimaryKey:{value:function(R,M){I.continuePrimaryKey(hr(R,e.MAX_KEY,S),M)}},primaryKey:{get:function(){return I.primaryKey}},key:{get:function(){var R=I.key;return x===1?R[0]:R.slice(0,x)}},value:{get:function(){return I.value}}})}}})}})}};function zr(e,t,n,r){return n=n||{},r=r||"",h(e).forEach(function(i){var c,y,b;q(t,i)?(c=e[i],y=t[i],typeof c=="object"&&typeof y=="object"&&c&&y?(b=Ie(c))!==Ie(y)?n[r+i]=t[i]:b==="Object"?zr(c,y,n,r+i+"."):c!==y&&(n[r+i]=t[i]):c!==y&&(n[r+i]=t[i])):n[r+i]=void 0}),h(t).forEach(function(i){q(e,i)||(n[r+i]=t[i])}),n}function Vr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Co={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return p(p({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return p(p({},n),{mutate:function(i){var c=K.trans,y=c.table(t).hook,b=y.deleting,E=y.creating,O=y.updating;switch(i.type){case"add":if(E.fire===me)break;return c._promise("readwrite",function(){return N(i)},!0);case"put":if(E.fire===me&&O.fire===me)break;return c._promise("readwrite",function(){return N(i)},!0);case"delete":if(b.fire===me)break;return c._promise("readwrite",function(){return N(i)},!0);case"deleteRange":if(b.fire===me)break;return c._promise("readwrite",function(){return function _(C,S,A){return n.query({trans:C,values:!1,query:{index:r,range:S},limit:A}).then(function(x){var k=x.result;return N({type:"delete",keys:k,trans:C}).then(function(I){return 0<I.numFailures?Promise.reject(I.failures[0]):k.length<A?{failures:[],numFailures:0,lastResult:void 0}:_(C,p(p({},S),{lower:k[k.length-1],lowerOpen:!0}),A)})})}(i.trans,i.range,1e4)},!0)}return n.mutate(i);function N(_){var C,S,A,x=K.trans,k=_.keys||Vr(r,_);if(!k)throw new Error("Keys missing");return(_=_.type==="add"||_.type==="put"?p(p({},_),{keys:k}):p({},_)).type!=="delete"&&(_.values=g([],_.values)),_.keys&&(_.keys=g([],_.keys)),C=n,A=k,((S=_).type==="add"?Promise.resolve([]):C.getMany({trans:S.trans,keys:A,cache:"immutable"})).then(function(I){var R=k.map(function(M,G){var oe,ye,ae,de=I[G],ve={onerror:null,onsuccess:null};return _.type==="delete"?b.fire.call(ve,M,de,x):_.type==="add"||de===void 0?(oe=E.fire.call(ve,M,_.values[G],x),M==null&&oe!=null&&(_.keys[G]=M=oe,r.outbound||X(_.values[G],r.keyPath,M))):(oe=zr(de,_.values[G]),(ye=O.fire.call(ve,oe,M,de,x))&&(ae=_.values[G],Object.keys(ye).forEach(function(re){q(ae,re)?ae[re]=ye[re]:X(ae,re,ye[re])}))),ve});return n.mutate(_).then(function(M){for(var G=M.failures,oe=M.results,ye=M.numFailures,M=M.lastResult,ae=0;ae<k.length;++ae){var de=(oe||k)[ae],ve=R[ae];de==null?ve.onerror&&ve.onerror(G[ae]):ve.onsuccess&&ve.onsuccess(_.type==="put"&&I[ae]?_.values[ae]:de)}return{failures:G,results:oe,numFailures:ye,lastResult:M}}).catch(function(M){return R.forEach(function(G){return G.onerror&&G.onerror(M)}),Promise.reject(M)})})}}})}})}};function Pi(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,c=0;i<t.keys.length&&c<e.length;++i)st(t.keys[i],e[c])===0&&(r.push(n?Ne(t.values[i]):t.values[i]),++c);return r.length===e.length?r:null}catch{return null}}var xo={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return p(p({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Pi(r.keys,r.trans._cache,r.cache==="clone");return i?z.resolve(i):n.getMany(r).then(function(c){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Ne(c):c},c})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Ni(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Ci(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var jo={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new Ht(e.MIN_KEY,e.MAX_KEY);return p(p({},e),{transaction:function(r,i,c){if(K.subscr&&i!=="readonly")throw new j.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(K.querier));return e.transaction(r,i,c)},table:function(r){var i=e.table(r),c=i.schema,y=c.primaryKey,_=c.indexes,b=y.extractKey,E=y.outbound,O=y.autoIncrement&&_.filter(function(S){return S.compound&&S.keyPath.includes(y.keyPath)}),N=p(p({},i),{mutate:function(S){function A(re){return re="idb://".concat(t,"/").concat(r,"/").concat(re),M[re]||(M[re]=new Ht)}var x,k,I,R=S.trans,M=S.mutatedParts||(S.mutatedParts={}),G=A(""),oe=A(":dels"),ye=S.type,ve=S.type==="deleteRange"?[S.range]:S.type==="delete"?[S.keys]:S.values.length<50?[Vr(y,S).filter(function(re){return re}),S.values]:[],ae=ve[0],de=ve[1],ve=S.trans._cache;return B(ae)?(G.addKeys(ae),(ve=ye==="delete"||ae.length===de.length?Pi(ae,ve):null)||oe.addKeys(ae),(ve||de)&&(x=A,k=ve,I=de,c.indexes.forEach(function(re){var Ve=x(re.name||"");function He(tt){return tt!=null?re.extractKey(tt):null}function rt(tt){return re.multiEntry&&B(tt)?tt.forEach(function(cn){return Ve.addKey(cn)}):Ve.addKey(tt)}(k||I).forEach(function(tt,Jt){var nt=k&&He(k[Jt]),Jt=I&&He(I[Jt]);st(nt,Jt)!==0&&(nt!=null&&rt(nt),Jt!=null&&rt(Jt))})}))):ae?(de={from:ae.lower,to:ae.upper},oe.add(de),G.add(de)):(G.add(n),oe.add(n),c.indexes.forEach(function(re){return A(re.name).add(n)})),i.mutate(S).then(function(re){return!ae||S.type!=="add"&&S.type!=="put"||(G.addKeys(re.results),O&&O.forEach(function(Ve){var He=S.values.map(function(tt){return Ve.extractKey(tt)}),rt=Ve.keyPath.findIndex(function(tt){return tt===y.keyPath});re.results.forEach(function(tt){return He[rt]=tt}),A(Ve.name).addKeys(He)})),R.mutatedParts=pr(R.mutatedParts||{},M),re})}}),_=function(A){var x=A.query,A=x.index,x=x.range;return[A,new Ht((A=x.lower)!==null&&A!==void 0?A:e.MIN_KEY,(x=x.upper)!==null&&x!==void 0?x:e.MAX_KEY)]},C={get:function(S){return[y,new Ht(S.key)]},getMany:function(S){return[y,new Ht().addKeys(S.keys)]},count:_,query:_,openCursor:_};return h(C).forEach(function(S){N[S]=function(A){var x=K.subscr,k=!!x,I=Ni(K,i)&&Ci(S,A)?A.obsSet={}:x;if(k){var R=function(de){return de="idb://".concat(t,"/").concat(r,"/").concat(de),I[de]||(I[de]=new Ht)},M=R(""),G=R(":dels"),x=C[S](A),k=x[0],x=x[1];if((S==="query"&&k.isPrimaryKey&&!A.values?G:R(k.name||"")).add(x),!k.isPrimaryKey){if(S!=="count"){var oe=S==="query"&&E&&A.values&&i.query(p(p({},A),{values:!1}));return i[S].apply(this,arguments).then(function(de){if(S==="query"){if(E&&A.values)return oe.then(function(He){return He=He.result,M.addKeys(He),de});var ve=A.values?de.result.map(b):de.result;(A.values?M:G).addKeys(ve)}else if(S==="openCursor"){var re=de,Ve=A.values;return re&&Object.create(re,{key:{get:function(){return G.addKey(re.primaryKey),re.key}},primaryKey:{get:function(){var He=re.primaryKey;return G.addKey(He),He}},value:{get:function(){return Ve&&M.addKey(re.primaryKey),re.value}}})}return de})}G.add(n)}}return i[S].apply(this,arguments)}}),N}})}};function xi(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=p({},t),B(t.keys)&&(t.keys=t.keys.filter(function(i,c){return!(c in n.failures)})),"values"in t&&B(t.values)&&(t.values=t.values.filter(function(i,c){return!(c in n.failures)})),t)}function Yr(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<st(n,r.lower):0<=st(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?st(e,t.upper)<0:st(e,t.upper)<=0));var n,r}function ji(e,t,C,r,i,c){if(!C||C.length===0)return e;var y=t.query.index,b=y.multiEntry,E=t.query.range,O=r.schema.primaryKey.extractKey,N=y.extractKey,_=(y.lowLevelIndex||y).extractKey,C=C.reduce(function(S,A){var x=S,k=[];if(A.type==="add"||A.type==="put")for(var I=new Ht,R=A.values.length-1;0<=R;--R){var M,G=A.values[R],oe=O(G);I.hasKey(oe)||(M=N(G),(b&&B(M)?M.some(function(ve){return Yr(ve,E)}):Yr(M,E))&&(I.addKey(oe),k.push(G)))}switch(A.type){case"add":x=S.concat(t.values?k:k.map(function(re){return O(re)}));break;case"put":var ye=new Ht().addKeys(A.values.map(function(re){return O(re)})),x=S.filter(function(re){return!ye.hasKey(t.values?O(re):re)}).concat(t.values?k:k.map(function(re){return O(re)}));break;case"delete":var ae=new Ht().addKeys(A.keys);x=S.filter(function(re){return!ae.hasKey(t.values?O(re):re)});break;case"deleteRange":var de=A.range;x=S.filter(function(re){return!Yr(O(re),de)})}return x},e);return C===e?e:(C.sort(function(S,A){return st(_(S),_(A))||st(O(S),O(A))}),t.limit&&t.limit<1/0&&(C.length>t.limit?C.length=t.limit:e.length===t.limit&&C.length<t.limit&&(i.dirty=!0)),c?Object.freeze(C):C)}function Bi(e,t){return st(e.lower,t.lower)===0&&st(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Bo(e,t){return function(n,r,i,c){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=st(n,r))===0){if(i&&c)return 0;if(i)return 1;if(c)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,i,c){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=st(n,r))===0){if(i&&c)return 0;if(i)return-1;if(c)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Io(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var i,c;e.subscribers.delete(n),e.subscribers.size===0&&(i=e,c=t,setTimeout(function(){i.subscribers.size===0&&at(c,i)},3e3))})}var Lo={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return p(p({},e),{transaction:function(n,r,i){var c,y,b=e.transaction(n,r,i);return r==="readwrite"&&(y=(c=new AbortController).signal,i=function(E){return function(){if(c.abort(),r==="readwrite"){for(var O=new Set,N=0,_=n;N<_.length;N++){var C=_[N],S=kn["idb://".concat(t,"/").concat(C)];if(S){var A=e.table(C),x=S.optimisticOps.filter(function(Ve){return Ve.trans===b});if(b._explicit&&E&&b.mutatedParts)for(var k=0,I=Object.values(S.queries.query);k<I.length;k++)for(var R=0,M=(ye=I[k]).slice();R<M.length;R++)Dr((ae=M[R]).obsSet,b.mutatedParts)&&(at(ye,ae),ae.subscribers.forEach(function(Ve){return O.add(Ve)}));else if(0<x.length){S.optimisticOps=S.optimisticOps.filter(function(Ve){return Ve.trans!==b});for(var G=0,oe=Object.values(S.queries.query);G<oe.length;G++)for(var ye,ae,de,ve=0,re=(ye=oe[G]).slice();ve<re.length;ve++)(ae=re[ve]).res!=null&&b.mutatedParts&&(E&&!ae.dirty?(de=Object.isFrozen(ae.res),de=ji(ae.res,ae.req,x,A,ae,de),ae.dirty?(at(ye,ae),ae.subscribers.forEach(function(Ve){return O.add(Ve)})):de!==ae.res&&(ae.res=de,ae.promise=z.resolve({result:de}))):(ae.dirty&&at(ye,ae),ae.subscribers.forEach(function(Ve){return O.add(Ve)})))}}}O.forEach(function(Ve){return Ve()})}}},b.addEventListener("abort",i(!1),{signal:y}),b.addEventListener("error",i(!1),{signal:y}),b.addEventListener("complete",i(!0),{signal:y})),b},table:function(n){var r=e.table(n),i=r.schema.primaryKey;return p(p({},r),{mutate:function(c){var y=K.trans;if(i.outbound||y.db._options.cache==="disabled"||y.explicit)return r.mutate(c);var b=kn["idb://".concat(t,"/").concat(n)];return b?(y=r.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||Vr(i,c).some(function(E){return E==null}))?(b.optimisticOps.push(c),c.mutatedParts&&dr(c.mutatedParts),y.then(function(E){0<E.numFailures&&(at(b.optimisticOps,c),(E=xi(0,c,E))&&b.optimisticOps.push(E),c.mutatedParts&&dr(c.mutatedParts))}),y.catch(function(){at(b.optimisticOps,c),c.mutatedParts&&dr(c.mutatedParts)})):y.then(function(E){var O=xi(0,p(p({},c),{values:c.values.map(function(S,_){var C,S=(C=i.keyPath)!==null&&C!==void 0&&C.includes(".")?Ne(S):p({},S);return X(S,i.keyPath,E.results[_]),S})}),E);b.optimisticOps.push(O),queueMicrotask(function(){return c.mutatedParts&&dr(c.mutatedParts)})}),y):r.mutate(c)},query:function(c){if(!Ni(K,r)||!Ci("query",c))return r.query(c);var y=((O=K.trans)===null||O===void 0?void 0:O.db._options.cache)==="immutable",_=K,b=_.requery,E=_.signal,O=function(A,x,k,I){var R=kn["idb://".concat(A,"/").concat(x)];if(!R)return[];if(!(x=R.queries[k]))return[null,!1,R,null];var M=x[(I.query?I.query.index.name:null)||""];if(!M)return[null,!1,R,null];switch(k){case"query":var G=M.find(function(oe){return oe.req.limit===I.limit&&oe.req.values===I.values&&Bi(oe.req.query.range,I.query.range)});return G?[G,!0,R,M]:[M.find(function(oe){return("limit"in oe.req?oe.req.limit:1/0)>=I.limit&&(!I.values||oe.req.values)&&Bo(oe.req.query.range,I.query.range)}),!1,R,M];case"count":return G=M.find(function(oe){return Bi(oe.req.query.range,I.query.range)}),[G,!!G,R,M]}}(t,n,"query",c),N=O[0],_=O[1],C=O[2],S=O[3];return N&&_?N.obsSet=c.obsSet:(_=r.query(c).then(function(A){var x=A.result;if(N&&(N.res=x),y){for(var k=0,I=x.length;k<I;++k)Object.freeze(x[k]);Object.freeze(x)}else A.result=Ne(x);return A}).catch(function(A){return S&&N&&at(S,N),Promise.reject(A)}),N={obsSet:c.obsSet,promise:_,subscribers:new Set,type:"query",req:c,dirty:!1},S?S.push(N):(S=[N],(C=C||(kn["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=S)),Io(N,S,b,E),N.promise.then(function(A){return{result:ji(A.result,c,C==null?void 0:C.optimisticOps,r,N,y)}})}})}})}};function yr(e,t){return new Proxy(e,{get:function(n,r,i){return r==="db"?t:Reflect.get(n,r,i)}})}var mn=(Ct.prototype.version=function(e){if(isNaN(e)||e<.1)throw new j.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new j.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(Eo),n.stores({}),this._state.autoSchema=!1,n)},Ct.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||K.letThrough||this._vip)?e():new z(function(n,r){if(t._state.openComplete)return r(new j.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new j.DatabaseClosed);t.open().catch(me)}t._state.dbReadyPromise.then(n,r)}).then(e)},Ct.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:i}),e.sort(function(c,y){return c.level-y.level}),this},Ct.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(i){return r?i.create!==r:!!n&&i.name!==n})),this},Ct.prototype.open=function(){var e=this;return It(T,function(){return Po(e)})},Ct.prototype._close=function(){var e=this._state,t=Yt.indexOf(this);if(0<=t&&Yt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new z(function(n){e.dbReadyResolve=n}),e.openCanceller=new z(function(n,r){e.cancelOpen=r}))},Ct.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new j.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new j.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Ct.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new z(function(i,c){function y(){t.close(e);var b=t._deps.indexedDB.deleteDatabase(t.name);b.onsuccess=be(function(){var E,O,N;E=t._deps,O=t.name,N=E.indexedDB,E=E.IDBKeyRange,Fr(N)||O===nn||Lr(N,E).delete(O).catch(me),i()}),b.onerror=dn(c),b.onblocked=t._fireOnBlocked}if(n)throw new j.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(y):y()})},Ct.prototype.backendDB=function(){return this.idbdb},Ct.prototype.isOpen=function(){return this.idbdb!==null},Ct.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Ct.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ct.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ct.prototype,"tables",{get:function(){var e=this;return h(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Ct.prototype.transaction=function(){var e=(function(t,n,r){var i=arguments.length;if(i<2)throw new j.InvalidArgument("Too few arguments");for(var c=new Array(i-1);--i;)c[i-1]=arguments[i];return r=c.pop(),[t,d(c),r]}).apply(this,arguments);return this._transaction.apply(this,e)},Ct.prototype._transaction=function(e,t,n){var r=this,i=K.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);var c,y,b=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(y=t.map(function(O){if(O=O instanceof r.Table?O.name:O,typeof O!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return O}),e=="r"||e===gn)c=gn;else{if(e!="rw"&&e!=Er)throw new j.InvalidArgument("Invalid transaction mode: "+e);c=Er}if(i){if(i.mode===gn&&c===Er){if(!b)throw new j.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&y.forEach(function(O){if(i&&i.storeNames.indexOf(O)===-1){if(!b)throw new j.SubTransaction("Table "+O+" not included in parent transaction.");i=null}}),b&&i&&!i.active&&(i=null)}}catch(O){return i?i._promise(null,function(N,_){_(O)}):ht(O)}var E=(function O(N,_,C,S,A){return z.resolve().then(function(){var x=K.transless||K,k=N._createTransaction(_,C,N._dbSchema,S);if(k.explicit=!0,x={trans:k,transless:x},S)k.idbtrans=S.idbtrans;else try{k.create(),k.idbtrans._explicit=!0,N._state.PR1398_maxLoop=3}catch(M){return M.name===D.InvalidState&&N.isOpen()&&0<--N._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),N.close({disableAutoOpen:!1}),N.open().then(function(){return O(N,_,C,null,A)})):ht(M)}var I,R=ge(A);return R&&ut(),x=z.follow(function(){var M;(I=A.call(k,k))&&(R?(M=Nt.bind(null,null),I.then(M,M)):typeof I.next=="function"&&typeof I.throw=="function"&&(I=$r(I)))},x),(I&&typeof I.then=="function"?z.resolve(I).then(function(M){return k.active?M:ht(new j.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return I})).then(function(M){return S&&k._resolve(),k._completion.then(function(){return M})}).catch(function(M){return k._reject(M),ht(M)})})}).bind(null,this,c,y,i,n);return i?i._promise(c,E,"lock"):K.trans?It(K.transless,function(){return r._whenReady(E)}):this._whenReady(E)},Ct.prototype.table=function(e){if(!q(this._allTables,e))throw new j.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Ct);function Ct(e,t){var n=this;this._middlewares={},this.verno=0;var r=Ct.dependencies;this._options=t=p({addons:Ct.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,c,y,b,E,O={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:me,dbReadyPromise:null,cancelOpen:me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};O.dbReadyPromise=new z(function(_){O.dbReadyResolve=_}),O.openCanceller=new z(function(_,C){O.cancelOpen=C}),this._state=O,this.name=e,this.on=qn(this,"populate","blocked","versionchange","close",{ready:[Tt,me]}),this.on.ready.subscribe=ee(this.on.ready.subscribe,function(_){return function(C,S){Ct.vip(function(){var A,x=n._state;x.openComplete?(x.dbOpenError||z.resolve().then(C),S&&_(C)):x.onReadyBeingFired?(x.onReadyBeingFired.push(C),S&&_(C)):(_(C),A=n,S||_(function k(){A.on.ready.unsubscribe(C),A.on.ready.unsubscribe(k)}))})}}),this.Collection=(i=this,$n(mo.prototype,function(I,k){this.db=i;var S=li,A=null;if(k)try{S=k()}catch(R){A=R}var x=I._ctx,k=x.table,I=k.hook.reading.fire;this._ctx={table:k,index:x.index,isPrimKey:!x.index||k.schema.primKey.keyPath&&x.index===k.schema.primKey.name,range:S,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:A,or:x.or,valueMapper:I!==$e?I:null}})),this.Table=(c=this,$n(hi.prototype,function(_,C,S){this.db=c,this._tx=S,this.name=_,this.schema=C,this.hook=c._allTables[_]?c._allTables[_].hook:qn(null,{creating:[At,me],reading:[ze,$e],updating:[Lt,me],deleting:[yt,me]})})),this.Transaction=(y=this,$n(wo.prototype,function(_,C,S,A,x){var k=this;this.db=y,this.mode=_,this.storeNames=C,this.schema=S,this.chromeTransactionDurability=A,this.idbtrans=null,this.on=qn(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new z(function(I,R){k._resolve=I,k._reject=R}),this._completion.then(function(){k.active=!1,k.on.complete.fire()},function(I){var R=k.active;return k.active=!1,k.on.error.fire(I),k.parent?k.parent._reject(I):R&&k.idbtrans&&k.idbtrans.abort(),ht(I)})})),this.Version=(b=this,$n(To.prototype,function(_){this.db=b,this._cfg={version:_,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(E=this,$n(gi.prototype,function(_,C,S){if(this.db=E,this._ctx={table:_,index:C===":id"?null:C,or:S},this._cmp=this._ascending=st,this._descending=function(A,x){return st(x,A)},this._max=function(A,x){return 0<st(A,x)?A:x},this._min=function(A,x){return st(A,x)<0?A:x},this._IDBKeyRange=E._deps.IDBKeyRange,!this._IDBKeyRange)throw new j.MissingAPI})),this.on("versionchange",function(_){0<_.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(_){!_.newVersion||_.newVersion<_.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(_.oldVersion/10))}),this._maxKey=Jn(t.IDBKeyRange),this._createTransaction=function(_,C,S,A){return new n.Transaction(_,C,S,n._options.chromeTransactionDurability,A)},this._fireOnBlocked=function(_){n.on("blocked").fire(_),Yt.filter(function(C){return C.name===n.name&&C!==n&&!C._state.vcFired}).map(function(C){return C.on("versionchange").fire(_)})},this.use(xo),this.use(Lo),this.use(jo),this.use(No),this.use(Co);var N=new Proxy(this,{get:function(_,C,S){if(C==="_vip")return!0;if(C==="table")return function(x){return yr(n.table(x),N)};var A=Reflect.get(_,C,S);return A instanceof hi?yr(A,N):C==="tables"?A.map(function(x){return yr(x,N)}):C==="_createTransaction"?function(){return yr(A.apply(this,arguments),N)}:A}});this.vip=N,r.forEach(function(_){return _(n)})}var vr,rn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Fo=(Jr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Jr.prototype[rn]=function(){return this},Jr);function Jr(e){this._subscribe=e}try{vr={indexedDB:v.indexedDB||v.mozIndexedDB||v.webkitIndexedDB||v.msIndexedDB,IDBKeyRange:v.IDBKeyRange||v.webkitIDBKeyRange}}catch{vr={indexedDB:null,IDBKeyRange:null}}function Ii(e){var t,n=!1,r=new Fo(function(i){var c=ge(e),y,b=!1,E={},O={},N={get closed(){return b},unsubscribe:function(){b||(b=!0,y&&y.abort(),_&&_n.storagemutated.unsubscribe(S))}};i.start&&i.start(N);var _=!1,C=function(){return bn(A)},S=function(x){pr(E,x),Dr(O,E)&&C()},A=function(){var x,k,I;!b&&vr.indexedDB&&(E={},x={},y&&y.abort(),y=new AbortController,I=function(R){var M=Ue();try{c&&ut();var G=Pt(e,R);return G=c?G.finally(Nt):G}finally{M&&wt()}}(k={subscr:x,signal:y.signal,requery:C,querier:e,trans:null}),Promise.resolve(I).then(function(R){n=!0,t=R,b||k.signal.aborted||(E={},function(M){for(var G in M)if(q(M,G))return;return 1}(O=x)||_||(_n(Yn,S),_=!0),bn(function(){return!b&&i.next&&i.next(R)}))},function(R){n=!1,["DatabaseClosedError","AbortError"].includes(R==null?void 0:R.name)||b||bn(function(){b||i.error&&i.error(R)})}))};return setTimeout(C,0),N});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var An=mn;function Gr(e){var t=On;try{On=!0,_n.storagemutated.fire(e),qr(e,!0)}finally{On=t}}ie(An,p(p({},te),{delete:function(e){return new An(e,{addons:[]}).delete()},exists:function(e){return new An(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=An.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Fr(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==nn})}):Lr(n,t).toCollection().primaryKeys()).then(e)}catch{return ht(new j.MissingAPI)}var t,n},defineClass:function(){return function(e){L(this,e)}},ignoreTransaction:function(e){return K.trans?It(K.transless,e):e()},vip:Rr,async:function(e){return function(){try{var t=$r(e.apply(this,arguments));return t&&typeof t.then=="function"?t:z.resolve(t)}catch(n){return ht(n)}}},spawn:function(e,t,n){try{var r=$r(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:z.resolve(r)}catch(i){return ht(i)}},currentTransaction:{get:function(){return K.trans||null}},waitFor:function(e,t){return t=z.resolve(typeof e=="function"?An.ignoreTransaction(e):e).timeout(t||6e4),K.trans?K.trans.waitFor(t):t},Promise:z,debug:{get:function(){return Et},set:function(e){vt(e)}},derive:ue,extend:L,props:ie,override:ee,Events:qn,on:_n,liveQuery:Ii,extendObservabilitySet:pr,getByKeyPath:le,setByKeyPath:X,delByKeyPath:function(e,t){typeof t=="string"?X(e,t,void 0):"length"in t&&[].map.call(t,function(n){X(e,n,void 0)})},shallowClone:Be,deepClone:Ne,getObjectDiff:zr,cmp:st,asap:$,minKey:-1/0,addons:[],connections:Yt,errnames:D,dependencies:vr,cache:kn,semVer:"4.0.8",version:"4.0.8".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),An.maxKey=Jn(An.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(_n(Yn,function(e){On||(e=new CustomEvent(Pr,{detail:e}),On=!0,dispatchEvent(e),On=!1)}),addEventListener(Pr,function(e){e=e.detail,On||Gr(e)}));var Ln,On=!1,Li=function(){};return typeof BroadcastChannel<"u"&&((Li=function(){(Ln=new BroadcastChannel(Pr)).onmessage=function(e){return e.data&&Gr(e.data)}})(),typeof Ln.unref=="function"&&Ln.unref(),_n(Yn,function(e){On||Ln.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!mn.disableBfCache&&e.persisted){Et&&console.debug("Dexie: handling persisted pagehide"),Ln!=null&&Ln.close();for(var t=0,n=Yt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!mn.disableBfCache&&e.persisted&&(Et&&console.debug("Dexie: handling persisted pageshow"),Li(),Gr({all:new Ht(-1/0,[[]])}))})),z.rejectionMapper=function(e,t){return!e||e instanceof it||e instanceof TypeError||e instanceof SyntaxError||!e.name||!V[e.name]?e:(t=new V[e.name](t||e.message,e),"stack"in e&&H(t,"stack",{get:function(){return this.inner.stack}}),t)},vt(Et),p(mn,Object.freeze({__proto__:null,Dexie:mn,liveQuery:Ii,Entity:fi,cmp:st,PropModSymbol:vn,PropModification:zn,replacePrefix:function(e,t){return new zn({replacePrefix:[e,t]})},add:function(e){return new zn({add:e})},remove:function(e){return new zn({remove:e})},default:mn,RangeSet:Ht,mergeRanges:Hn,rangesOverlap:Ei}),{default:mn}),mn})})(ao);var Xo=ao.exports;const ni=oo(Xo),Mi=Symbol.for("Dexie"),Bt=globalThis[Mi]||(globalThis[Mi]=ni);if(ni.semVer!==Bt.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ni.semVer} and ${Bt.semVer}`);const{liveQuery:Xr,mergeRanges:Ya,rangesOverlap:Ja,RangeSet:Ga,cmp:Wa,Entity:Ha,PropModSymbol:Qa,PropModification:Xa,replacePrefix:Za,add:eu,remove:tu}=Bt,en=new Bt("lensDb");console.log(en);en.version(1).stores({lenses:"++id, name, focalLength, maxFocalLength, minFocalLength, speed, minSpeed, maxSpeed, mount, noOfBlades, frontFilter, closestFocusingDistance, weight, comment"});const Zo="sortByEvent",ea="filterByEvent",ta="clickedLensEvent",na="lensEditedEvent",Zn="asc",ri="desc",Cn="N/A",ii={m42:{value:"m42",displayName:"M42"},nikonF:{value:"nikonF",displayName:"Nikon F"},nikonZ:{value:"nikonZ",displayName:"Nikon Z"},adaptall2:{value:"adaptall2",displayName:"Tamron Adaptall 2"},konica:{value:"konica",displayName:"Konica"},minoltaMd:{value:"minoltaMd",displayName:"Minolta MD"},olympusOm:{value:"olympusOm",displayName:"Olympus OM"},altix:{value:"altix",displayName:"Altix"},exacta:{value:"exacta",displayName:"Exacta"},canonFl:{value:"canonFl",displayName:"Canon FL"},canonFd:{value:"canonFd",displayName:"Canon FD"},p6:{value:"p6",displayName:"Pentacon Six (P6)"},rolleiQbm:{value:"rolleiQbm",displayName:"Rollei QBM"},projector:{value:"projector",displayName:"Projector"}};function Ui(s,u,a){const p=s.slice();return p[14]=u[a],p}function qi(s,u){let a,p=u[14].displayName+"",g;return{key:s,first:null,c(){a=pe("option"),g=Ut(p),a.__value=u[14].value,gt(a,a.__value),this.first=a},m(v,h){kt(v,a,h),U(a,g)},p(v,h){u=v},d(v){v&&St(a)}}}function $i(s){let u,a,p,g;return{c(){u=pe("button"),a=Ut("Add Lens"),u.disabled=s[2]},m(v,h){kt(v,u,h),U(u,a),p||(g=Ot(u,"click",s[17]),p=!0)},p(v,h){h[0]&4&&(u.disabled=v[2])},d(v){v&&St(u),p=!1,g()}}}function zi(s){let u,a,p,g;return{c(){u=pe("button"),a=Ut("Edit Lens"),u.disabled=s[2]},m(v,h){kt(v,u,h),U(u,a),p||(g=Ot(u,"click",s[16]),p=!0)},p(v,h){h[0]&4&&(u.disabled=v[2])},d(v){v&&St(u),p=!1,g()}}}function ra(s){let u,a,p,g,v,h,B,L,m,Y,q,ie,Q,H,ue,ne,Ae=[],Te=new Map,ee,Le,$,le,X,Be,P,d,W,F,Ne,Ce,Ie,Ke,Qe,at,Ye,Pe,ge,De,it,ke,Je,lt,D,J,j,V,te,me,$e,ze,_e,At,yt,Lt,xt,Tt,Et,vt,jt,ft,Ze,et,Ge,pt,Oe,f,o,l,w,T,K,fe,Se,he,z,qe=_r(Object.values(ii));const We=se=>se[14].value;for(let se=0;se<qe.length;se+=1){let je=Ui(s,qe,se),ot=We(je);Te.set(ot,Ae[se]=qi(ot,je))}let Me=!s[0]&&$i(s),Fe=s[0]&&zi(s);return{c(){u=pe("div"),a=pe("p"),p=Ut(s[1]),g=xe(),v=pe("fieldset"),h=pe("legend"),h.textContent="Add new Lens",B=xe(),L=pe("div"),m=pe("label"),m.textContent="Name:",Y=xe(),q=pe("input"),ie=xe(),Q=pe("div"),H=pe("label"),H.textContent="Mount:",ue=xe(),ne=pe("select");for(let se=0;se<Ae.length;se+=1)Ae[se].c();ee=xe(),Le=pe("div"),$=pe("label"),$.textContent="Focal length:",le=xe(),X=pe("input"),Be=xe(),P=pe("div"),d=pe("label"),d.textContent="Min Focal length:",W=xe(),F=pe("input"),Ne=xe(),Ce=pe("div"),Ie=pe("label"),Ie.textContent="Max Focal length:",Ke=xe(),Qe=pe("input"),at=xe(),Ye=pe("div"),Pe=pe("label"),Pe.textContent="Speed:",ge=xe(),De=pe("input"),it=xe(),ke=pe("div"),Je=pe("label"),Je.textContent="Max Speed:",lt=xe(),D=pe("input"),J=xe(),j=pe("div"),V=pe("label"),V.textContent="Min Speed:",te=xe(),me=pe("input"),$e=xe(),ze=pe("div"),_e=pe("label"),_e.textContent="Closest focusing distance:",At=xe(),yt=pe("input"),Lt=xe(),xt=pe("div"),Tt=pe("label"),Tt.textContent="Number of blades:",Et=xe(),vt=pe("input"),jt=xe(),ft=pe("div"),Ze=pe("label"),Ze.textContent="Front filter thread in mm:",et=xe(),Ge=pe("input"),pt=xe(),Oe=pe("div"),f=pe("label"),f.textContent="Comment:",o=xe(),l=pe("textarea"),w=xe(),T=pe("button"),K=Ut("Reset form"),fe=xe(),Me&&Me.c(),Se=xe(),Fe&&Fe.c(),Z(a,"class","statusMessage svelte-69n2jz"),Z(m,"class","field__name svelte-69n2jz"),Z(m,"for","name"),Z(q,"class","field__input svelte-69n2jz"),Z(q,"type","text"),Z(q,"id","name"),Z(L,"class","field svelte-69n2jz"),Z(H,"class","field__name svelte-69n2jz"),Z(H,"for","mount"),Z(ne,"class","field__input svelte-69n2jz"),Z(ne,"id","mount"),s[14]===void 0&&wr(()=>s[20].call(ne)),Z(Q,"class","field svelte-69n2jz"),Z($,"class","field__name svelte-69n2jz"),Z($,"for","focalLength"),Z(X,"class","field__input svelte-69n2jz"),Z(X,"type","number"),Z(X,"id","focalLength"),Z(Le,"class","field svelte-69n2jz"),Z(d,"class","field__name svelte-69n2jz"),Z(d,"for","minFocalLength"),Z(F,"class","field__input svelte-69n2jz"),Z(F,"type","number"),Z(F,"id","minFocalLength"),Z(P,"class","field svelte-69n2jz"),Z(Ie,"class","field__name svelte-69n2jz"),Z(Ie,"for","maxFocalLength"),Z(Qe,"class","field__input svelte-69n2jz"),Z(Qe,"type","number"),Z(Qe,"id","maxFocalLength"),Z(Ce,"class","field svelte-69n2jz"),Z(Pe,"class","field__name svelte-69n2jz"),Z(Pe,"for","speed"),Z(De,"class","field__input svelte-69n2jz"),Z(De,"type","number"),Z(De,"id","speed"),Z(Ye,"class","field svelte-69n2jz"),Z(Je,"class","field__name svelte-69n2jz"),Z(Je,"for","maxSpeed"),Z(D,"class","field__input svelte-69n2jz"),Z(D,"type","number"),Z(D,"id","maxSpeed"),Z(ke,"class","field svelte-69n2jz"),Z(V,"class","field__name svelte-69n2jz"),Z(V,"for","minSpeed"),Z(me,"class","field__input svelte-69n2jz"),Z(me,"type","number"),Z(me,"id","minSpeed"),Z(j,"class","field svelte-69n2jz"),Z(_e,"class","field__name svelte-69n2jz"),Z(_e,"for","closestFocusingDistance"),Z(yt,"class","field__input svelte-69n2jz"),Z(yt,"type","number"),Z(yt,"id","closestFocusingDistance"),Z(ze,"class","field svelte-69n2jz"),Z(Tt,"class","field__name svelte-69n2jz"),Z(Tt,"for","noOfBlades"),Z(vt,"class","field__input svelte-69n2jz"),Z(vt,"type","number"),Z(vt,"id","noOfBlades"),Z(xt,"class","field svelte-69n2jz"),Z(Ze,"class","field__name svelte-69n2jz"),Z(Ze,"for","frontFilter"),Z(Ge,"class","field__input svelte-69n2jz"),Z(Ge,"type","number"),Z(Ge,"id","frontFilter"),Z(ft,"class","field svelte-69n2jz"),Z(f,"class","field__name svelte-69n2jz"),Z(f,"for","comment"),Z(l,"class","field__input svelte-69n2jz"),Z(l,"id","comment"),Z(l,"rows","10"),Z(l,"cols","30"),Z(Oe,"class","field svelte-69n2jz"),T.disabled=s[2],Z(u,"class","addLens svelte-69n2jz")},m(se,je){kt(se,u,je),U(u,a),U(a,p),U(u,g),U(u,v),U(v,h),U(v,B),U(v,L),U(L,m),U(L,Y),U(L,q),gt(q,s[3]),U(v,ie),U(v,Q),U(Q,H),U(Q,ue),U(Q,ne);for(let ot=0;ot<Ae.length;ot+=1)Ae[ot]&&Ae[ot].m(ne,null);Ri(ne,s[14],!0),U(v,ee),U(v,Le),U(Le,$),U(Le,le),U(Le,X),gt(X,s[8]),U(v,Be),U(v,P),U(P,d),U(P,W),U(P,F),gt(F,s[10]),U(v,Ne),U(v,Ce),U(Ce,Ie),U(Ce,Ke),U(Ce,Qe),gt(Qe,s[9]),U(v,at),U(v,Ye),U(Ye,Pe),U(Ye,ge),U(Ye,De),gt(De,s[5]),U(v,it),U(v,ke),U(ke,Je),U(ke,lt),U(ke,D),gt(D,s[6]),U(v,J),U(v,j),U(j,V),U(j,te),U(j,me),gt(me,s[7]),U(v,$e),U(v,ze),U(ze,_e),U(ze,At),U(ze,yt),gt(yt,s[13]),U(v,Lt),U(v,xt),U(xt,Tt),U(xt,Et),U(xt,vt),gt(vt,s[11]),U(v,jt),U(v,ft),U(ft,Ze),U(ft,et),U(ft,Ge),gt(Ge,s[12]),U(v,pt),U(v,Oe),U(Oe,f),U(Oe,o),U(Oe,l),gt(l,s[4]),U(v,w),U(v,T),U(T,K),U(v,fe),Me&&Me.m(v,null),U(v,Se),Fe&&Fe.m(v,null),he||(z=[Ot(q,"input",s[19]),Ot(ne,"change",s[20]),Ot(X,"input",s[21]),Ot(F,"input",s[22]),Ot(Qe,"input",s[23]),Ot(De,"input",s[24]),Ot(D,"input",s[25]),Ot(me,"input",s[26]),Ot(yt,"input",s[27]),Ot(vt,"input",s[28]),Ot(Ge,"input",s[29]),Ot(l,"input",s[30]),Ot(T,"click",s[15])],he=!0)},p(se,je){je[0]&2&&ln(p,se[1]),je[0]&8&&q.value!==se[3]&&gt(q,se[3]),je&0&&(qe=_r(Object.values(ii)),Ae=io(Ae,je,We,1,se,qe,Te,ne,ro,qi,null,Ui)),je[0]&16384&&Ri(ne,se[14]),je[0]&256&&qt(X.value)!==se[8]&&gt(X,se[8]),je[0]&1024&&qt(F.value)!==se[10]&&gt(F,se[10]),je[0]&512&&qt(Qe.value)!==se[9]&&gt(Qe,se[9]),je[0]&32&&qt(De.value)!==se[5]&&gt(De,se[5]),je[0]&64&&qt(D.value)!==se[6]&&gt(D,se[6]),je[0]&128&&qt(me.value)!==se[7]&&gt(me,se[7]),je[0]&8192&&qt(yt.value)!==se[13]&&gt(yt,se[13]),je[0]&2048&&qt(vt.value)!==se[11]&&gt(vt,se[11]),je[0]&4096&&qt(Ge.value)!==se[12]&&gt(Ge,se[12]),je[0]&16&&gt(l,se[4]),je[0]&4&&(T.disabled=se[2]),se[0]?Me&&(Me.d(1),Me=null):Me?Me.p(se,je):(Me=$i(se),Me.c(),Me.m(v,Se)),se[0]?Fe?Fe.p(se,je):(Fe=zi(se),Fe.c(),Fe.m(v,null)):Fe&&(Fe.d(1),Fe=null)},i:$t,o:$t,d(se){se&&St(u);for(let je=0;je<Ae.length;je+=1)Ae[je].d();Me&&Me.d(),Fe&&Fe.d(),he=!1,yn(z)}}}const Mt=0;function ia(s,u,a){const p=si();let{lens:g=null}=u,v=!1,h="",B=!1,L=null,m="",Y="",q="",ie=Mt,Q=Mt,H=Mt,ue=Mt,ne=Mt,Ae=Mt,Te=Mt,ee=Mt,Le=Mt;function $(){a(3,m=""),a(14,Y=""),a(4,q=""),a(5,ie=Mt),a(6,Q=Mt),a(7,H=Mt),a(8,ue=Mt),a(9,ne=Mt),a(10,Ae=Mt),a(11,Te=Mt),a(12,ee=Mt),a(13,Le=Mt),a(0,v=!1),a(18,g=null),L=null}async function le(){try{a(2,B=!0),await en.lenses.update(L,{name:m,focalLength:ue,maxFocalLength:ne,minFocalLength:Ae,speed:ie,maxSpeed:Q,minSpeed:H,mount:Y,noOfBlades:Te,frontFilter:ee,closestFocusingDistance:Le,comment:q}),a(1,h=`Lens ${m} successfully edited.`),setTimeout(()=>{p(na),a(2,B=!1)},2e3),$()}catch(Pe){a(1,h=`Failed to edit ${m}: ${Pe}`),a(2,B=!1)}}async function X(){try{if(!m){a(1,h="Lens must have a name");return}a(2,B=!0);const Pe=await en.lenses.add({name:m,focalLength:ue,maxFocalLength:ne,minFocalLength:Ae,speed:ie,maxSpeed:Q,minSpeed:H,mount:Y,noOfBlades:Te,frontFilter:ee,closestFocusingDistance:Le,comment:q});a(1,h=`Lens ${m} successfully added. Got id ${Pe}`),a(2,B=!1),$()}catch(Pe){a(1,h=`Failed to add ${m}: ${Pe}`),a(2,B=!1)}}function Be(){m=this.value,a(3,m),a(18,g)}function P(){Y=qo(this),a(14,Y),a(18,g)}function d(){ue=qt(this.value),a(8,ue),a(18,g)}function W(){Ae=qt(this.value),a(10,Ae),a(18,g)}function F(){ne=qt(this.value),a(9,ne),a(18,g)}function Ne(){ie=qt(this.value),a(5,ie),a(18,g)}function Ce(){Q=qt(this.value),a(6,Q),a(18,g)}function Ie(){H=qt(this.value),a(7,H),a(18,g)}function Ke(){Le=qt(this.value),a(13,Le),a(18,g)}function Qe(){Te=qt(this.value),a(11,Te),a(18,g)}function at(){ee=qt(this.value),a(12,ee),a(18,g)}function Ye(){q=this.value,a(4,q),a(18,g)}return s.$$set=Pe=>{"lens"in Pe&&a(18,g=Pe.lens)},s.$$.update=()=>{s.$$.dirty[0]&262144&&g&&(a(3,m=g.name),a(14,Y=g.mount),a(4,q=g.comment),a(8,ue=g.focalLength),a(9,ne=g.maxFocalLength),a(10,Ae=g.minFocalLength),a(5,ie=g.speed),a(6,Q=g.maxSpeed),a(7,H=g.minSpeed),a(11,Te=g.noOfBlades),a(12,ee=g.frontFilter),a(13,Le=g.closestFocusingDistance),L=g.id,a(18,g=null),a(0,v=!0))},[v,h,B,m,q,ie,Q,H,ue,ne,Ae,Te,ee,Le,Y,$,le,X,g,Be,P,d,W,F,Ne,Ce,Ie,Ke,Qe,at,Ye]}class oa extends Un{constructor(u){super(),Mn(this,u,ia,ra,xn,{lens:18},null,[-1,-1])}}function Vi(s){let u;return{c(){u=pe("span"),Z(u,"class","sort-icon sort-icon__asc svelte-1oxtzex")},m(a,p){kt(a,u,p)},d(a){a&&St(u)}}}function Yi(s){let u;return{c(){u=pe("span"),Z(u,"class","sort-icon sort-icon__desc svelte-1oxtzex")},m(a,p){kt(a,u,p)},d(a){a&&St(u)}}}function aa(s){let u=(s[3]||s[0])+"",a,p,g,v,h,B,L,m,Y,q=s[2]===Zn&&Vi(),ie=s[2]===ri&&Yi();return{c(){a=Ut(u),p=xe(),g=pe("button"),v=Ut(`S\r
    `),q&&q.c(),h=xe(),ie&&ie.c(),B=xe(),L=pe("input"),Z(g,"class","svelte-1oxtzex"),Z(L,"type","search")},m(Q,H){kt(Q,a,H),kt(Q,p,H),kt(Q,g,H),U(g,v),q&&q.m(g,null),U(g,h),ie&&ie.m(g,null),kt(Q,B,H),kt(Q,L,H),gt(L,s[4]),m||(Y=[Ot(g,"click",s[7]),Ot(L,"input",s[8]),Ot(L,"change",s[6])],m=!0)},p(Q,[H]){H&9&&u!==(u=(Q[3]||Q[0])+"")&&ln(a,u),Q[2]===Zn?q||(q=Vi(),q.c(),q.m(g,h)):q&&(q.d(1),q=null),Q[2]===ri?ie||(ie=Yi(),ie.c(),ie.m(g,null)):ie&&(ie.d(1),ie=null),H&16&&L.value!==Q[4]&&gt(L,Q[4])},i:$t,o:$t,d(Q){Q&&(St(a),St(p),St(g),St(B),St(L)),q&&q.d(),ie&&ie.d(),m=!1,yn(Y)}}}function ua(s,u,a){const p=si();let{name:g=""}=u,{prop:v=""}=u,{sort:h=""}=u,{abbr:B=""}=u,L="";function m(Q){p(Zo,Q)}function Y(Q){p(ea,{prop:v,search:Q.target.value})}const q=()=>m(v);function ie(){L=this.value,a(4,L)}return s.$$set=Q=>{"name"in Q&&a(0,g=Q.name),"prop"in Q&&a(1,v=Q.prop),"sort"in Q&&a(2,h=Q.sort),"abbr"in Q&&a(3,B=Q.abbr)},[g,v,h,B,L,m,Y,q,ie]}class Pn extends Un{constructor(u){super(),Mn(this,u,ua,aa,xn,{name:0,prop:1,sort:2,abbr:3})}}function sa(s){return!isNaN(s)&&!isNaN(parseFloat(s))}function ca(s,u,a){const p=s[u].toLowerCase(),g=a.toLowerCase();return!!~p.indexOf(g)}function la(s,u){let a=!1;s.maxSpeed&&(a=!!~s.maxSpeed.toString().indexOf(u));let p=!1;s.minSpeed&&(p=!!~s.minSpeed.toString().indexOf(u));let g=!1;return s.speed&&(g=!!~s.speed.toString().indexOf(u)),a||p||g}function fa(s,u){let a=!1;s.maxFocalLength&&(a=!!~s.maxFocalLength.toString().indexOf(u));let p=!1;s.minFocalLength&&(p=!!~s.minFocalLength.toString().indexOf(u));let g=!1;return s.focalLength&&(g=!!~s.focalLength.toString().indexOf(u)),a||p||g}function Ji(s,u,a){const p=s.slice();return p[16]=u[a],p[18]=a,p}function pa(s){let u;return{c(){u=pe("p"),u.textContent="No lenses in the DB"},m(a,p){kt(a,u,p)},p:$t,i:$t,o:$t,d(a){a&&St(u)}}}function da(s){let u,a,p,g,v,h,B,L,m,Y,q,ie,Q,H,ue,ne,Ae,Te,ee,Le,$,le,X,Be,P,d,W,F,Ne,Ce,Ie,Ke=[],Qe=new Map,at;B=new Pn({props:{name:"Name",prop:"name",sort:s[0].name}}),B.$on("sortByEvent",s[4]),B.$on("filterByEvent",s[5]),Y=new Pn({props:{name:"Focal length",prop:"focalLength",sort:s[0].focalLength}}),Y.$on("sortByEvent",s[4]),Y.$on("filterByEvent",s[5]),Q=new Pn({props:{name:"Speed",prop:"speed",sort:s[0].speed}}),Q.$on("sortByEvent",s[4]),Q.$on("filterByEvent",s[5]),ne=new Pn({props:{name:"Mount",prop:"mount",sort:s[0].mount}}),ne.$on("sortByEvent",s[4]),ne.$on("filterByEvent",s[5]),ee=new Pn({props:{name:"No of blades",prop:"noOfBlades",sort:s[0].noOfBlades}}),ee.$on("sortByEvent",s[4]),ee.$on("filterByEvent",s[5]),le=new Pn({props:{name:"Front filter",prop:"frontFilter",sort:s[0].frontFilter}}),le.$on("sortByEvent",s[4]),le.$on("filterByEvent",s[5]),P=new Pn({props:{name:"Closest focusing distance",abbr:"CFD",prop:"closestFocusingDistance",sort:s[0].closestFocusingDistance}}),P.$on("sortByEvent",s[4]),P.$on("filterByEvent",s[5]);let Ye=_r(s[2]);const Pe=ge=>ge[16].id;for(let ge=0;ge<Ye.length;ge+=1){let De=Ji(s,Ye,ge),it=Pe(De);Qe.set(it,Ke[ge]=Gi(it,De))}return{c(){u=pe("table"),a=pe("thead"),p=pe("tr"),g=pe("th"),g.textContent="No",v=xe(),h=pe("th"),fn(B.$$.fragment),L=xe(),m=pe("th"),fn(Y.$$.fragment),q=xe(),ie=pe("th"),fn(Q.$$.fragment),H=xe(),ue=pe("th"),fn(ne.$$.fragment),Ae=xe(),Te=pe("th"),fn(ee.$$.fragment),Le=xe(),$=pe("th"),fn(le.$$.fragment),X=xe(),Be=pe("th"),fn(P.$$.fragment),d=xe(),W=pe("th"),W.textContent="Comment",F=xe(),Ne=pe("th"),Ne.textContent="X",Ce=xe(),Ie=pe("tbody");for(let ge=0;ge<Ke.length;ge+=1)Ke[ge].c();Z(g,"class","svelte-1b97uaf"),Z(h,"class","svelte-1b97uaf"),Z(m,"class","svelte-1b97uaf"),Z(ie,"class","svelte-1b97uaf"),Z(ue,"class","svelte-1b97uaf"),Z(Te,"class","svelte-1b97uaf"),Z($,"class","svelte-1b97uaf"),Z(Be,"title","Closest focusing distance"),Z(Be,"class","svelte-1b97uaf"),Z(W,"class","svelte-1b97uaf"),Z(Ne,"class","svelte-1b97uaf"),Z(u,"class","svelte-1b97uaf")},m(ge,De){kt(ge,u,De),U(u,a),U(a,p),U(p,g),U(p,v),U(p,h),on(B,h,null),U(p,L),U(p,m),on(Y,m,null),U(p,q),U(p,ie),on(Q,ie,null),U(p,H),U(p,ue),on(ne,ue,null),U(p,Ae),U(p,Te),on(ee,Te,null),U(p,Le),U(p,$),on(le,$,null),U(p,X),U(p,Be),on(P,Be,null),U(p,d),U(p,W),U(p,F),U(p,Ne),U(u,Ce),U(u,Ie);for(let it=0;it<Ke.length;it+=1)Ke[it]&&Ke[it].m(Ie,null);at=!0},p(ge,De){const it={};De&1&&(it.sort=ge[0].name),B.$set(it);const ke={};De&1&&(ke.sort=ge[0].focalLength),Y.$set(ke);const Je={};De&1&&(Je.sort=ge[0].speed),Q.$set(Je);const lt={};De&1&&(lt.sort=ge[0].mount),ne.$set(lt);const D={};De&1&&(D.sort=ge[0].noOfBlades),ee.$set(D);const J={};De&1&&(J.sort=ge[0].frontFilter),le.$set(J);const j={};De&1&&(j.sort=ge[0].closestFocusingDistance),P.$set(j),De&1996&&(Ye=_r(ge[2]),Ke=io(Ke,De,Pe,1,ge,Ye,Qe,Ie,ro,Gi,null,Ji))},i(ge){at||(zt(B.$$.fragment,ge),zt(Y.$$.fragment,ge),zt(Q.$$.fragment,ge),zt(ne.$$.fragment,ge),zt(ee.$$.fragment,ge),zt(le.$$.fragment,ge),zt(P.$$.fragment,ge),at=!0)},o(ge){Xt(B.$$.fragment,ge),Xt(Y.$$.fragment,ge),Xt(Q.$$.fragment,ge),Xt(ne.$$.fragment,ge),Xt(ee.$$.fragment,ge),Xt(le.$$.fragment,ge),Xt(P.$$.fragment,ge),at=!1},d(ge){ge&&St(u),an(B),an(Y),an(Q),an(ne),an(ee),an(le),an(P);for(let De=0;De<Ke.length;De+=1)Ke[De].d()}}}function Gi(s,u){let a,p,g=u[18]+1+"",v,h,B,L=u[16].name+"",m,Y,q,ie=u[10](u[16])+"",Q,H,ue,ne=u[9](u[16])+"",Ae,Te,ee,Le=(u[7](u[16].mount)||Cn)+"",$,le,X,Be=u[8](u[16].noOfBlades)+"",P,d,W,F=u[8](u[16].frontFilter)+"",Ne,Ce,Ie,Ke=u[8](u[16].closestFocusingDistance)+"",Qe,at,Ye,Pe=(u[16].comment||Cn)+"",ge,De,it,ke,Je,lt,D;function J(){return u[11](u[16])}function j(...V){return u[12](u[16],...V)}return{key:s,first:null,c(){a=pe("tr"),p=pe("td"),v=Ut(g),h=xe(),B=pe("td"),m=Ut(L),Y=xe(),q=pe("td"),Q=Ut(ie),H=xe(),ue=pe("td"),Ae=Ut(ne),Te=xe(),ee=pe("td"),$=Ut(Le),le=xe(),X=pe("td"),P=Ut(Be),d=xe(),W=pe("td"),Ne=Ut(F),Ce=xe(),Ie=pe("td"),Qe=Ut(Ke),at=xe(),Ye=pe("td"),ge=Ut(Pe),De=xe(),it=pe("td"),ke=pe("button"),ke.textContent="X",Je=xe(),Z(p,"class","svelte-1b97uaf"),Z(B,"class","svelte-1b97uaf"),Z(q,"class","svelte-1b97uaf"),Z(ue,"class","svelte-1b97uaf"),Z(ee,"class","svelte-1b97uaf"),Z(X,"class","svelte-1b97uaf"),Z(W,"class","svelte-1b97uaf"),Z(Ie,"class","svelte-1b97uaf"),Z(Ye,"class","svelte-1b97uaf"),Z(it,"class","svelte-1b97uaf"),this.first=a},m(V,te){kt(V,a,te),U(a,p),U(p,v),U(a,h),U(a,B),U(B,m),U(a,Y),U(a,q),U(q,Q),U(a,H),U(a,ue),U(ue,Ae),U(a,Te),U(a,ee),U(ee,$),U(a,le),U(a,X),U(X,P),U(a,d),U(a,W),U(W,Ne),U(a,Ce),U(a,Ie),U(Ie,Qe),U(a,at),U(a,Ye),U(Ye,ge),U(a,De),U(a,it),U(it,ke),U(a,Je),lt||(D=[Ot(ke,"click",J),Ot(a,"click",j)],lt=!0)},p(V,te){u=V,te&4&&g!==(g=u[18]+1+"")&&ln(v,g),te&4&&L!==(L=u[16].name+"")&&ln(m,L),te&4&&ie!==(ie=u[10](u[16])+"")&&ln(Q,ie),te&4&&ne!==(ne=u[9](u[16])+"")&&ln(Ae,ne),te&4&&Le!==(Le=(u[7](u[16].mount)||Cn)+"")&&ln($,Le),te&4&&Be!==(Be=u[8](u[16].noOfBlades)+"")&&ln(P,Be),te&4&&F!==(F=u[8](u[16].frontFilter)+"")&&ln(Ne,F),te&4&&Ke!==(Ke=u[8](u[16].closestFocusingDistance)+"")&&ln(Qe,Ke),te&4&&Pe!==(Pe=(u[16].comment||Cn)+"")&&ln(ge,Pe)},d(V){V&&St(a),lt=!1,yn(D)}}}function ha(s){let u,a,p,g;const v=[da,pa],h=[];function B(L,m){return L[2]?0:1}return u=B(s),a=h[u]=v[u](s),{c(){a.c(),p=ui()},m(L,m){h[u].m(L,m),kt(L,p,m),g=!0},p(L,[m]){let Y=u;u=B(L),u===Y?h[u].p(L,m):(to(),Xt(h[Y],1,1,()=>{h[Y]=null}),no(),a=h[u],a?a.p(L,m):(a=h[u]=v[u](L),a.c()),zt(a,1),a.m(p.parentNode,p))},i(L){g||(zt(a),g=!0)},o(L){Xt(a),g=!1},d(L){L&&St(p),h[u].d(L)}}}function ya(s,u,a){let p,g=$t,v=()=>(g(),g=Mo(L,$=>a(2,p=$)),L);s.$$.on_destroy.push(()=>g());const h=si();let B={},L=Xr(()=>en.lenses.toArray());v();async function m($){await en.lenses.delete($)}async function Y($){const le=B[$]===Zn?ri:Zn;a(0,B={[$]:le}),v(a(1,L=Xr(()=>B[$]===Zn?en.lenses.orderBy($).reverse().toArray():en.lenses.orderBy($).toArray())))}async function q($,le){v(a(1,L=Xr(()=>le?$==="speed"?en.lenses.filter(X=>la(X,le)).toArray():$==="focalLength"?en.lenses.filter(X=>fa(X,le)).toArray():sa(le)?en.lenses.where($).equals(+le).toArray():en.lenses.filter(X=>ca(X,$,le)).toArray():en.lenses.toArray())))}function ie($){Y($.detail)}function Q($){q($.detail.prop,$.detail.search)}function H($,le){h(ta,le)}function ue($){const le=ii[$];return le?le.displayName:$}function ne($){return typeof $>"u"||$===null?Cn:$}function Ae($){return $.maxSpeed&&$.minSpeed?`${$.maxSpeed} - ${$.minSpeed}`:$.speed?$.speed:$.maxSpeed?$.maxSpeed:$.minSpeed?$.minSpeed:Cn}function Te($){return $.minFocalLength&&$.maxFocalLength?`${$.minFocalLength} - ${$.maxFocalLength}`:$.focalLength?$.focalLength:$.minFocalLength?$.minFocalLength:$.maxFocalLength?$.maxFocalLength:Cn}return[B,L,p,m,ie,Q,H,ue,ne,Ae,Te,$=>m($.id),($,le)=>H(le,$)]}class va extends Un{constructor(u){super(),Mn(this,u,ya,ha,xn,{})}}var Wi={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Sn(s,u,a,p){function g(v){return v instanceof a?v:new a(function(h){h(v)})}return new(a||(a=Promise))(function(v,h){function B(Y){try{m(p.next(Y))}catch(q){h(q)}}function L(Y){try{m(p.throw(Y))}catch(q){h(q)}}function m(Y){Y.done?v(Y.value):g(Y.value).then(B,L)}m((p=p.apply(s,[])).next())})}function pn(s,u){var a={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},p,g,v,h;return h={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function B(m){return function(Y){return L([m,Y])}}function L(m){if(p)throw new TypeError("Generator is already executing.");for(;a;)try{if(p=1,g&&(v=m[0]&2?g.return:m[0]?g.throw||((v=g.return)&&v.call(g),0):g.next)&&!(v=v.call(g,m[1])).done)return v;switch(g=0,v&&(m=[m[0]&2,v.value]),m[0]){case 0:case 1:v=m;break;case 4:return a.label++,{value:m[1],done:!1};case 5:a.label++,g=m[1],m=[0];continue;case 7:m=a.ops.pop(),a.trys.pop();continue;default:if(v=a.trys,!(v=v.length>0&&v[v.length-1])&&(m[0]===6||m[0]===2)){a=0;continue}if(m[0]===3&&(!v||m[1]>v[0]&&m[1]<v[3])){a.label=m[1];break}if(m[0]===6&&a.label<v[1]){a.label=v[1],v=m;break}if(v&&a.label<v[2]){a.label=v[2],a.ops.push(m);break}v[2]&&a.ops.pop(),a.trys.pop();continue}m=u.call(s,a)}catch(Y){m=[6,Y],g=0}finally{p=v=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function ma(s){var u=[s.schema.primKey].concat(s.schema.indexes);return u.map(function(a){return a.src}).join(",")}function ba(s){for(var u={},a=0,p=s.tables;a<p.length;a++){var g=p[a];u[g.name]=g.schema}return u}function uo(s,u){return new Promise(function(a,p){var g=new FileReader;g.onabort=function(v){return p(new Error("file read aborted"))},g.onerror=function(v){return p(v.target.error)},g.onload=function(v){return a(v.target.result)},u==="binary"?g.readAsArrayBuffer(s):g.readAsText(s)})}function so(s,u){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var a=new FileReaderSync,p=u==="binary"?a.readAsArrayBuffer(s):a.readAsText(s);return p}var oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ci(s,u){return u={exports:{}},s(u,u.exports),u.exports}var Sr=ci(function(s,u){(function(a,p){s.exports=p()})(oi,function(){function a(D){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(J){return typeof J}:a=function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},a(D)}function p(D,J,j,V,te,me,$e){try{var ze=D[me]($e),_e=ze.value}catch(At){j(At);return}ze.done?J(_e):Promise.resolve(_e).then(V,te)}function g(D){return function(){var J=this,j=arguments;return new Promise(function(V,te){var me=D.apply(J,j);function $e(_e){p(me,V,te,$e,ze,"next",_e)}function ze(_e){p(me,V,te,$e,ze,"throw",_e)}$e(void 0)})}}function v(D,J){if(!(D instanceof J))throw new TypeError("Cannot call a class as a function")}function h(D,J){for(var j=0;j<J.length;j++){var V=J[j];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(D,V.key,V)}}function B(D,J,j){return J&&h(D.prototype,J),D}function L(D,J,j){return J in D?Object.defineProperty(D,J,{value:j,enumerable:!0,configurable:!0,writable:!0}):D[J]=j,D}function m(D,J){var j=Object.keys(D);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(D);J&&(V=V.filter(function(te){return Object.getOwnPropertyDescriptor(D,te).enumerable})),j.push.apply(j,V)}return j}function Y(D){for(var J=1;J<arguments.length;J++){var j=arguments[J]!=null?arguments[J]:{};J%2?m(Object(j),!0).forEach(function(V){L(D,V,j[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(j)):m(Object(j)).forEach(function(V){Object.defineProperty(D,V,Object.getOwnPropertyDescriptor(j,V))})}return D}function q(D,J){return H(D)||ne(D,J)||Te()}function ie(D){return Q(D)||ue(D)||Ae()}function Q(D){if(Array.isArray(D)){for(var J=0,j=new Array(D.length);J<D.length;J++)j[J]=D[J];return j}}function H(D){if(Array.isArray(D))return D}function ue(D){if(Symbol.iterator in Object(D)||Object.prototype.toString.call(D)==="[object Arguments]")return Array.from(D)}function ne(D,J){if(Symbol.iterator in Object(D)||Object.prototype.toString.call(D)==="[object Arguments]"){var j=[],V=!0,te=!1,me=void 0;try{for(var $e=D[Symbol.iterator](),ze;!(V=(ze=$e.next()).done)&&(j.push(ze.value),!(J&&j.length===J));V=!0);}catch(_e){te=!0,me=_e}finally{try{!V&&$e.return!=null&&$e.return()}finally{if(te)throw me}}return j}}function Ae(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Te(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var ee=function D(J){v(this,D),this.p=new Promise(J)};ee.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(ee.prototype[Symbol.toStringTag]="TypesonPromise"),ee.prototype.then=function(D,J){var j=this;return new ee(function(V,te){j.p.then(function(me){V(D?D(me):me)}).catch(function(me){return J?J(me):Promise.reject(me)}).then(V,te)})},ee.prototype.catch=function(D){return this.then(null,D)},ee.resolve=function(D){return new ee(function(J){J(D)})},ee.reject=function(D){return new ee(function(J,j){j(D)})},["all","race"].forEach(function(D){ee[D]=function(J){return new ee(function(j,V){Promise[D](J.map(function(te){return te&&te.constructor&&te.constructor.__typeson__type__==="TypesonPromise"?te.p:te})).then(j,V)})}});var Le={},$=Le.toString,le={}.hasOwnProperty,X=Object.getPrototypeOf,Be=le.toString;function P(D,J){return Ce(D)&&typeof D.then=="function"&&(!J||typeof D.catch=="function")}function d(D){return $.call(D).slice(8,-1)}function W(D,J){if(!D||a(D)!=="object")return!1;var j=X(D);if(!j)return J===null;var V=le.call(j,"constructor")&&j.constructor;return typeof V!="function"?J===null:J===V||J!==null&&Be.call(V)===Be.call(J)||typeof J=="function"&&typeof V.__typeson__type__=="string"&&V.__typeson__type__===J.__typeson__type__}function F(D){if(!D||d(D)!=="Object")return!1;var J=X(D);return J?W(D,Object):!0}function Ne(D){if(!D||d(D)!=="Object")return!1;var J=X(D);return J?W(D,Object)||Ne(J):!0}function Ce(D){return D&&a(D)==="object"}function Ie(D){return D.replace(/~/g,"~0").replace(/\./g,"~1")}function Ke(D){return D.replace(/~1/g,".").replace(/~0/g,"~")}function Qe(D,J){if(J==="")return D;var j=J.indexOf(".");if(j>-1){var V=D[Ke(J.slice(0,j))];return V===void 0?void 0:Qe(V,J.slice(j+1))}return D[Ke(J)]}function at(D,J,j){if(J==="")return j;var V=J.indexOf(".");if(V>-1){var te=D[Ke(J.slice(0,V))];return at(te,J.slice(V+1),j)}return D[Ke(J)]=j,D}function Ye(D){return D===null?"null":Array.isArray(D)?"array":a(D)}var Pe=Object.keys,ge=Array.isArray,De={}.hasOwnProperty,it=["type","replaced","iterateIn","iterateUnsetNumeric"];function ke(D,J){if(D.keypath==="")return-1;var j=D.keypath.match(/\./g)||0,V=J.keypath.match(/\./g)||0;return j&&(j=j.length),V&&(V=V.length),j>V?-1:j<V?1:D.keypath<J.keypath?-1:D.keypath>J.keypath}var Je=function(){function D(J){v(this,D),this.options=J,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return B(D,[{key:"stringify",value:function(j,V,te,me){me=Y({},this.options,{},me,{stringification:!0});var $e=this.encapsulate(j,null,me);return ge($e)?JSON.stringify($e[0],V,te):$e.then(function(ze){return JSON.stringify(ze,V,te)})}},{key:"stringifySync",value:function(j,V,te,me){return this.stringify(j,V,te,Y({throwOnBadSyncType:!0},me,{sync:!0}))}},{key:"stringifyAsync",value:function(j,V,te,me){return this.stringify(j,V,te,Y({throwOnBadSyncType:!0},me,{sync:!1}))}},{key:"parse",value:function(j,V,te){return te=Y({},this.options,{},te,{parse:!0}),this.revive(JSON.parse(j,V),te)}},{key:"parseSync",value:function(j,V,te){return this.parse(j,V,Y({throwOnBadSyncType:!0},te,{sync:!0}))}},{key:"parseAsync",value:function(j,V,te){return this.parse(j,V,Y({throwOnBadSyncType:!0},te,{sync:!1}))}},{key:"specialTypeNames",value:function(j,V){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return te.returnTypeNames=!0,this.encapsulate(j,V,te)}},{key:"rootTypeName",value:function(j,V){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return te.iterateNone=!0,this.encapsulate(j,V,te)}},{key:"encapsulate",value:function(j,V,te){te=Y({sync:!0},this.options,{},te);var me=te,$e=me.sync,ze=this,_e={},At=[],yt=[],Lt=[],xt="cyclic"in te?te.cyclic:!0,Tt=te,Et=Tt.encapsulateObserver,vt=Ge("",j,xt,V||{},Lt);function jt(Oe){var f=Object.values(_e);if(te.iterateNone)return f.length?f[0]:D.getJSONType(Oe);if(f.length){if(te.returnTypeNames)return ie(new Set(f));!Oe||!F(Oe)||De.call(Oe,"$types")?Oe={$:Oe,$types:{$:_e}}:Oe.$types=_e}else Ce(Oe)&&De.call(Oe,"$types")&&(Oe={$:Oe,$types:!0});return te.returnTypeNames?!1:Oe}function ft(Oe,f){return Ze.apply(this,arguments)}function Ze(){return Ze=g(regeneratorRuntime.mark(function Oe(f,o){var l;return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,Promise.all(o.map(function(K){return K[1].p}));case 2:return l=T.sent,T.next=5,Promise.all(l.map(function(){var K=g(regeneratorRuntime.mark(function fe(Se){var he,z,qe,We,Me,Fe,se,je,ot,Ue,wt,Ee,ce,be;return regeneratorRuntime.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(he=[],z=o.splice(0,1),qe=q(z,1),We=qe[0],Me=q(We,7),Fe=Me[0],se=Me[2],je=Me[3],ot=Me[4],Ue=Me[5],wt=Me[6],Ee=Ge(Fe,Se,se,je,he,!0,wt),ce=W(Ee,ee),!(Fe&&ce)){Re.next=11;break}return Re.next=8,Ee.p;case 8:return be=Re.sent,ot[Ue]=be,Re.abrupt("return",ft(f,he));case 11:return Fe?ot[Ue]=Ee:ce?f=Ee.p:f=Ee,Re.abrupt("return",ft(f,he));case 13:case"end":return Re.stop()}},fe)}));return function(fe){return K.apply(this,arguments)}}()));case 5:return T.abrupt("return",f);case 6:case"end":return T.stop()}},Oe)})),Ze.apply(this,arguments)}function et(Oe,f,o){Object.assign(Oe,f);var l=it.map(function(w){var T=Oe[w];return delete Oe[w],T});o(),it.forEach(function(w,T){Oe[w]=l[T]})}function Ge(Oe,f,o,l,w,T,K){var fe,Se={},he=a(f),z=Et?function(ce){var be=K||l.type||D.getJSONType(f);Et(Object.assign(ce||Se,{keypath:Oe,value:f,cyclic:o,stateObj:l,promisesData:w,resolvingTypesonPromise:T,awaitingTypesonPromise:W(f,ee)},{type:be}))}:null;if(["string","boolean","number","undefined"].includes(he))return f===void 0||he==="number"&&(isNaN(f)||f===-1/0||f===1/0)?(l.replaced?fe=f:fe=pt(Oe,f,l,w,!1,T,z),fe!==f&&(Se={replaced:fe})):fe=f,z&&z(),fe;if(f===null)return z&&z(),f;if(o&&!l.iterateIn&&!l.iterateUnsetNumeric&&f&&a(f)==="object"){var qe=At.indexOf(f);if(qe<0)o===!0&&(At.push(f),yt.push(Oe));else return _e[Oe]="#",z&&z({cyclicKeypath:yt[qe]}),"#"+yt[qe]}var We=F(f),Me=ge(f),Fe=(We||Me)&&(!ze.plainObjectReplacers.length||l.replaced)||l.iterateIn?f:pt(Oe,f,l,w,We||Me,null,z),se;if(Fe!==f?(fe=Fe,Se={replaced:Fe}):Oe===""&&W(f,ee)?(w.push([Oe,f,o,l,void 0,void 0,l.type]),fe=f):Me&&l.iterateIn!=="object"||l.iterateIn==="array"?(se=new Array(f.length),Se={clone:se}):!["function","symbol"].includes(a(f))&&!("toJSON"in f)&&!W(f,ee)&&!W(f,Promise)&&!W(f,ArrayBuffer)||We||l.iterateIn==="object"?(se={},l.addLength&&(se.length=f.length),Se={clone:se}):fe=f,z&&z(),te.iterateNone)return se||fe;if(!se)return fe;if(l.iterateIn){var je=function(be){var we={ownKeys:De.call(f,be)};et(l,we,function(){var Re=Oe+(Oe?".":"")+Ie(be),Xe=Ge(Re,f[be],!!o,l,w,T);W(Xe,ee)?w.push([Re,Xe,!!o,l,se,be,l.type]):Xe!==void 0&&(se[be]=Xe)})};for(var ot in f)je(ot);z&&z({endIterateIn:!0,end:!0})}else Pe(f).forEach(function(ce){var be=Oe+(Oe?".":"")+Ie(ce),we={ownKeys:!0};et(l,we,function(){var Re=Ge(be,f[ce],!!o,l,w,T);W(Re,ee)?w.push([be,Re,!!o,l,se,ce,l.type]):Re!==void 0&&(se[ce]=Re)})}),z&&z({endIterateOwn:!0,end:!0});if(l.iterateUnsetNumeric){for(var Ue=f.length,wt=function(be){if(!(be in f)){var we=Oe+(Oe?".":"")+be,Re={ownKeys:!1};et(l,Re,function(){var Xe=Ge(we,void 0,!!o,l,w,T);W(Xe,ee)?w.push([we,Xe,!!o,l,se,be,l.type]):Xe!==void 0&&(se[be]=Xe)})}},Ee=0;Ee<Ue;Ee++)wt(Ee);z&&z({endIterateUnsetNumeric:!0,end:!0})}return se}function pt(Oe,f,o,l,w,T,K){for(var fe=w?ze.plainObjectReplacers:ze.nonplainObjectReplacers,Se=fe.length;Se--;){var he=fe[Se];if(he.test(f,o)){var z=he.type;if(ze.revivers[z]){var qe=_e[Oe];_e[Oe]=qe?[z].concat(qe):z}if(Object.assign(o,{type:z,replaced:!0}),($e||!he.replaceAsync)&&!he.replace)return K&&K({typeDetected:!0}),Ge(Oe,f,xt&&"readonly",o,l,T,z);K&&K({replacing:!0});var We=$e||!he.replaceAsync?"replace":"replaceAsync";return Ge(Oe,he[We](f,o),xt&&"readonly",o,l,T,z)}}return f}return Lt.length?$e&&te.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(ft(vt,Lt)).then(jt):!$e&&te.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():te.stringification&&$e?[jt(vt)]:$e?jt(vt):Promise.resolve(jt(vt))}},{key:"encapsulateSync",value:function(j,V,te){return this.encapsulate(j,V,Y({throwOnBadSyncType:!0},te,{sync:!0}))}},{key:"encapsulateAsync",value:function(j,V,te){return this.encapsulate(j,V,Y({throwOnBadSyncType:!0},te,{sync:!1}))}},{key:"revive",value:function(j,V){var te=j&&j.$types;if(!te)return j;if(te===!0)return j.$;V=Y({sync:!0},this.options,{},V);var me=V,$e=me.sync,ze=[],_e={},At=!0;te.$&&F(te.$)&&(j=j.$,te=te.$,At=!1);var yt=this;function Lt(Ze,et){var Ge=yt.revivers[Ze]||[],pt=q(Ge,1),Oe=pt[0];if(!Oe)throw new Error("Unregistered type: "+Ze);return $e&&!("revive"in Oe)?et:Oe[$e&&Oe.revive?"revive":!$e&&Oe.reviveAsync?"reviveAsync":"revive"](et,_e)}function xt(){var Ze=[];if(Object.entries(te).forEach(function(et){var Ge=q(et,2),pt=Ge[0],Oe=Ge[1];Oe!=="#"&&[].concat(Oe).forEach(function(f){var o=yt.revivers[f]||[null,{}],l=q(o,2),w=l[1].plain;w&&(Ze.push({keypath:pt,type:f}),delete te[pt])})}),!!Ze.length)return Ze.sort(ke).reduce(function et(Ge,pt){var Oe=pt.keypath,f=pt.type;if(P(Ge))return Ge.then(function(w){return et(w,{keypath:Oe,type:f})});var o=Qe(j,Oe);if(o=Lt(f,o),W(o,ee))return o.then(function(w){var T=at(j,Oe,w);T===w&&(j=T)});var l=at(j,Oe,o);l===o&&(j=l)},void 0)}var Tt=[];function Et(Ze,et,Ge,pt,Oe){if(!(At&&Ze==="$types")){var f=te[Ze],o=ge(et);if(o||F(et)){var l=o?new Array(et.length):{};for(Pe(et).forEach(function(qe){var We=Et(Ze+(Ze?".":"")+Ie(qe),et[qe],Ge||l,l,qe),Me=function(se){return W(se,lt)?l[qe]=void 0:se!==void 0&&(l[qe]=se),se};W(We,ee)?Tt.push(We.then(function(Fe){return Me(Fe)})):Me(We)}),et=l;ze.length;){var w=q(ze[0],4),T=w[0],K=w[1],fe=w[2],Se=w[3],he=Qe(T,K);if(he!==void 0)fe[Se]=he;else break;ze.splice(0,1)}}if(!f)return et;if(f==="#"){var z=Qe(Ge,et.slice(1));return z===void 0&&ze.push([Ge,et.slice(1),pt,Oe]),z}return[].concat(f).reduce(function qe(We,Me){return W(We,ee)?We.then(function(Fe){return qe(Fe,Me)}):Lt(Me,We)},et)}}function vt(Ze){return W(Ze,lt)?void 0:Ze}var jt=xt(),ft;return W(jt,ee)?ft=jt.then(function(){return j}):(ft=Et("",j,null),Tt.length&&(ft=ee.resolve(ft).then(function(Ze){return ee.all([Ze].concat(Tt))}).then(function(Ze){var et=q(Ze,1),Ge=et[0];return Ge}))),P(ft)?$e&&V.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():W(ft,ee)?ft.p.then(vt):ft:!$e&&V.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():$e?vt(ft):Promise.resolve(vt(ft))}},{key:"reviveSync",value:function(j,V){return this.revive(j,Y({throwOnBadSyncType:!0},V,{sync:!0}))}},{key:"reviveAsync",value:function(j,V){return this.revive(j,Y({throwOnBadSyncType:!0},V,{sync:!1}))}},{key:"register",value:function(j,V){return V=V||{},[].concat(j).forEach(function te(me){var $e=this;if(ge(me))return me.map(function(ze){return te.call($e,ze)});me&&Pe(me).forEach(function(ze){if(ze==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(D.JSON_TYPES.includes(ze))throw new TypeError("Plain JSON object types are reserved as type names");var _e=me[ze],At=_e&&_e.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,yt=At.filter(function(Ge){return Ge.type===ze});if(yt.length&&(At.splice(At.indexOf(yt[0]),1),delete this.revivers[ze],delete this.types[ze]),typeof _e=="function"){var Lt=_e;_e={test:function(pt){return pt&&pt.constructor===Lt},replace:function(pt){return Y({},pt)},revive:function(pt){return Object.assign(Object.create(Lt.prototype),pt)}}}else if(ge(_e)){var xt=_e,Tt=q(xt,3),Et=Tt[0],vt=Tt[1],jt=Tt[2];_e={test:Et,replace:vt,revive:jt}}if(!(!_e||!_e.test)){var ft={type:ze,test:_e.test.bind(_e)};_e.replace&&(ft.replace=_e.replace.bind(_e)),_e.replaceAsync&&(ft.replaceAsync=_e.replaceAsync.bind(_e));var Ze=typeof V.fallback=="number"?V.fallback:V.fallback?0:1/0;if(_e.testPlainObjects?this.plainObjectReplacers.splice(Ze,0,ft):this.nonplainObjectReplacers.splice(Ze,0,ft),_e.revive||_e.reviveAsync){var et={};_e.revive&&(et.revive=_e.revive.bind(_e)),_e.reviveAsync&&(et.reviveAsync=_e.reviveAsync.bind(_e)),this.revivers[ze]=[et,{plain:_e.testPlainObjects}]}this.types[ze]=_e}},this)},this),this}}]),D}(),lt=function D(){v(this,D)};return lt.__typeson__type__="TypesonUndefined",Je.Undefined=lt,Je.Promise=ee,Je.isThenable=P,Je.toStringTag=d,Je.hasConstructorOf=W,Je.isObject=Ce,Je.isPlainObject=F,Je.isUserObject=Ne,Je.escapeKeyPathComponent=Ie,Je.unescapeKeyPathComponent=Ke,Je.getByKeyPath=Qe,Je.getJSONType=Ye,Je.JSON_TYPES=["null","boolean","number","string","array","object"],Je})}),ga=ci(function(s,u){(function(a,p){s.exports=p()})(oi,function(){function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(f)}function p(f,o){if(!(f instanceof o))throw new TypeError("Cannot call a class as a function")}function g(f,o){for(var l=0;l<o.length;l++){var w=o[l];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}function v(f,o,l){return o in f?Object.defineProperty(f,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):f[o]=l,f}function h(f,o){var l=Object.keys(f);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(f);o&&(w=w.filter(function(T){return Object.getOwnPropertyDescriptor(f,T).enumerable})),l.push.apply(l,w)}return l}function B(f){return function(l){if(Array.isArray(l))return L(l)}(f)||function(l){if(typeof Symbol<"u"&&Symbol.iterator in Object(l))return Array.from(l)}(f)||function(l,w){if(l){if(typeof l=="string")return L(l,w);var T=Object.prototype.toString.call(l).slice(8,-1);if(T==="Object"&&l.constructor&&(T=l.constructor.name),T==="Map"||T==="Set")return Array.from(l);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return L(l,w)}}(f)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function L(f,o){(o==null||o>f.length)&&(o=f.length);for(var l=0,w=new Array(o);l<o;l++)w[l]=f[l];return w}function m(f){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(f)}function Y(f,o){if(!(f instanceof o))throw new TypeError("Cannot call a class as a function")}function q(f,o){for(var l=0;l<o.length;l++){var w=o[l];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}function ie(f,o,l){return o in f?Object.defineProperty(f,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):f[o]=l,f}function Q(f,o){var l=Object.keys(f);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(f);o&&(w=w.filter(function(T){return Object.getOwnPropertyDescriptor(f,T).enumerable})),l.push.apply(l,w)}return l}function H(f){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?Q(Object(l),!0).forEach(function(w){ie(f,w,l[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(l)):Q(Object(l)).forEach(function(w){Object.defineProperty(f,w,Object.getOwnPropertyDescriptor(l,w))})}return f}function ue(f,o){return function(w){if(Array.isArray(w))return w}(f)||function(w,T){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(w)))){var K=[],fe=!0,Se=!1,he=void 0;try{for(var z,qe=w[Symbol.iterator]();!(fe=(z=qe.next()).done)&&(K.push(z.value),!T||K.length!==T);fe=!0);}catch(We){Se=!0,he=We}finally{try{fe||qe.return==null||qe.return()}finally{if(Se)throw he}}return K}}(f,o)||Ae(f,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ne(f){return function(l){if(Array.isArray(l))return Te(l)}(f)||function(l){if(typeof Symbol<"u"&&Symbol.iterator in Object(l))return Array.from(l)}(f)||Ae(f)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ae(f,o){if(f){if(typeof f=="string")return Te(f,o);var l=Object.prototype.toString.call(f).slice(8,-1);return l==="Object"&&f.constructor&&(l=f.constructor.name),l==="Map"||l==="Set"?Array.from(f):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Te(f,o):void 0}}function Te(f,o){(o==null||o>f.length)&&(o=f.length);for(var l=0,w=new Array(o);l<o;l++)w[l]=f[l];return w}var ee=function f(o){Y(this,f),this.p=new Promise(o)};ee.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(ee.prototype[Symbol.toStringTag]="TypesonPromise"),ee.prototype.then=function(f,o){var l=this;return new ee(function(w,T){l.p.then(function(K){w(f?f(K):K)}).catch(function(K){return o?o(K):Promise.reject(K)}).then(w,T)})},ee.prototype.catch=function(f){return this.then(null,f)},ee.resolve=function(f){return new ee(function(o){o(f)})},ee.reject=function(f){return new ee(function(o,l){l(f)})},["all","race"].forEach(function(f){ee[f]=function(o){return new ee(function(l,w){Promise[f](o.map(function(T){return T&&T.constructor&&T.constructor.__typeson__type__==="TypesonPromise"?T.p:T})).then(l,w)})}});var Le={}.toString,$={}.hasOwnProperty,le=Object.getPrototypeOf,X=$.toString;function Be(f,o){return F(f)&&typeof f.then=="function"&&(!o||typeof f.catch=="function")}function P(f){return Le.call(f).slice(8,-1)}function d(f,o){if(!f||m(f)!=="object")return!1;var l=le(f);if(!l)return o===null;var w=$.call(l,"constructor")&&l.constructor;return typeof w!="function"?o===null:o===w||o!==null&&X.call(w)===X.call(o)||typeof o=="function"&&typeof w.__typeson__type__=="string"&&w.__typeson__type__===o.__typeson__type__}function W(f){return!(!f||P(f)!=="Object")&&(!le(f)||d(f,Object))}function F(f){return f&&m(f)==="object"}function Ne(f){return f.replace(/~/g,"~0").replace(/\./g,"~1")}function Ce(f){return f.replace(/~1/g,".").replace(/~0/g,"~")}function Ie(f,o){if(o==="")return f;var l=o.indexOf(".");if(l>-1){var w=f[Ce(o.slice(0,l))];return w===void 0?void 0:Ie(w,o.slice(l+1))}return f[Ce(o)]}function Ke(f,o,l){if(o==="")return l;var w=o.indexOf(".");return w>-1?Ke(f[Ce(o.slice(0,w))],o.slice(w+1),l):(f[Ce(o)]=l,f)}function Qe(f,o,l){return f&&f.then||(f=Promise.resolve(f)),o?f.then(o):f}var at=Object.keys,Ye=Array.isArray,Pe={}.hasOwnProperty,ge=["type","replaced","iterateIn","iterateUnsetNumeric"];function De(f){return function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];try{return Promise.resolve(f.apply(this,o))}catch(w){return Promise.reject(w)}}}function it(f,o){if(f.keypath==="")return-1;var l=f.keypath.match(/\./g)||0,w=o.keypath.match(/\./g)||0;return l&&(l=l.length),w&&(w=w.length),l>w?-1:l<w?1:f.keypath<o.keypath?-1:f.keypath>o.keypath}var ke=function(){function f(o){Y(this,f),this.options=o,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(l,w,T){return w&&q(l.prototype,w),l}(f,[{key:"stringify",value:function(l,w,T,K){K=H(H(H({},this.options),K),{},{stringification:!0});var fe=this.encapsulate(l,null,K);return Ye(fe)?JSON.stringify(fe[0],w,T):fe.then(function(Se){return JSON.stringify(Se,w,T)})}},{key:"stringifySync",value:function(l,w,T,K){return this.stringify(l,w,T,H(H({throwOnBadSyncType:!0},K),{},{sync:!0}))}},{key:"stringifyAsync",value:function(l,w,T,K){return this.stringify(l,w,T,H(H({throwOnBadSyncType:!0},K),{},{sync:!1}))}},{key:"parse",value:function(l,w,T){return T=H(H(H({},this.options),T),{},{parse:!0}),this.revive(JSON.parse(l,w),T)}},{key:"parseSync",value:function(l,w,T){return this.parse(l,w,H(H({throwOnBadSyncType:!0},T),{},{sync:!0}))}},{key:"parseAsync",value:function(l,w,T){return this.parse(l,w,H(H({throwOnBadSyncType:!0},T),{},{sync:!1}))}},{key:"specialTypeNames",value:function(l,w){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return T.returnTypeNames=!0,this.encapsulate(l,w,T)}},{key:"rootTypeName",value:function(l,w){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return T.iterateNone=!0,this.encapsulate(l,w,T)}},{key:"encapsulate",value:function(l,w,T){var K=De(function(Ee,ce){return Qe(Promise.all(ce.map(function(be){return be[1].p})),function(be){return Qe(Promise.all(be.map(De(function(we){var Re=!1,Xe=[],Ft=ue(ce.splice(0,1),1),mt=ue(Ft[0],7),Vt=mt[0],Pt=mt[2],ut=mt[3],Nt=mt[4],dt=mt[5],Wt=mt[6],_t=Ue(Vt,we,Pt,ut,Xe,!0,Wt),Zt=d(_t,ee);return function(jn,bn){var ht=jn();return ht&&ht.then?ht.then(bn):bn(ht)}(function(){if(Vt&&Zt)return Qe(_t.p,function(It){return Nt[dt]=It,Re=!0,K(Ee,Xe)})},function(It){return Re?It:(Vt?Nt[dt]=_t:Ee=Zt?_t.p:_t,K(Ee,Xe))})}))),function(){return Ee})})}),fe=(T=H(H({sync:!0},this.options),T)).sync,Se=this,he={},z=[],qe=[],We=[],Me=!("cyclic"in T)||T.cyclic,Fe=T.encapsulateObserver,se=Ue("",l,Me,w||{},We);function je(Ee){var ce=Object.values(he);if(T.iterateNone)return ce.length?ce[0]:f.getJSONType(Ee);if(ce.length){if(T.returnTypeNames)return ne(new Set(ce));Ee&&W(Ee)&&!Pe.call(Ee,"$types")?Ee.$types=he:Ee={$:Ee,$types:{$:he}}}else F(Ee)&&Pe.call(Ee,"$types")&&(Ee={$:Ee,$types:!0});return!T.returnTypeNames&&Ee}function ot(Ee,ce,be){Object.assign(Ee,ce);var we=ge.map(function(Re){var Xe=Ee[Re];return delete Ee[Re],Xe});be(),ge.forEach(function(Re,Xe){Ee[Re]=we[Xe]})}function Ue(Ee,ce,be,we,Re,Xe,Ft){var mt,Vt={},Pt=m(ce),ut=Fe?function(Rt){var Kt=Ft||we.type||f.getJSONType(ce);Fe(Object.assign(Rt||Vt,{keypath:Ee,value:ce,cyclic:be,stateObj:we,promisesData:Re,resolvingTypesonPromise:Xe,awaitingTypesonPromise:d(ce,ee)},{type:Kt}))}:null;if(["string","boolean","number","undefined"].includes(Pt))return ce===void 0||Number.isNaN(ce)||ce===Number.NEGATIVE_INFINITY||ce===Number.POSITIVE_INFINITY?(mt=we.replaced?ce:wt(Ee,ce,we,Re,!1,Xe,ut))!==ce&&(Vt={replaced:mt}):mt=ce,ut&&ut(),mt;if(ce===null)return ut&&ut(),ce;if(be&&!we.iterateIn&&!we.iterateUnsetNumeric&&ce&&m(ce)==="object"){var Nt=z.indexOf(ce);if(!(Nt<0))return he[Ee]="#",ut&&ut({cyclicKeypath:qe[Nt]}),"#"+qe[Nt];be===!0&&(z.push(ce),qe.push(Ee))}var dt,Wt=W(ce),_t=Ye(ce),Zt=(Wt||_t)&&(!Se.plainObjectReplacers.length||we.replaced)||we.iterateIn?ce:wt(Ee,ce,we,Re,Wt||_t,null,ut);if(Zt!==ce?(mt=Zt,Vt={replaced:Zt}):Ee===""&&d(ce,ee)?(Re.push([Ee,ce,be,we,void 0,void 0,we.type]),mt=ce):_t&&we.iterateIn!=="object"||we.iterateIn==="array"?(dt=new Array(ce.length),Vt={clone:dt}):(["function","symbol"].includes(m(ce))||"toJSON"in ce||d(ce,ee)||d(ce,Promise)||d(ce,ArrayBuffer))&&!Wt&&we.iterateIn!=="object"?mt=ce:(dt={},we.addLength&&(dt.length=ce.length),Vt={clone:dt}),ut&&ut(),T.iterateNone)return dt||mt;if(!dt)return mt;if(we.iterateIn){var It=function(Kt){var Yt={ownKeys:Pe.call(ce,Kt)};ot(we,Yt,function(){var nn=Ee+(Ee?".":"")+Ne(Kt),gn=Ue(nn,ce[Kt],!!be,we,Re,Xe);d(gn,ee)?Re.push([nn,gn,!!be,we,dt,Kt,we.type]):gn!==void 0&&(dt[Kt]=gn)})};for(var jn in ce)It(jn);ut&&ut({endIterateIn:!0,end:!0})}else at(ce).forEach(function(Rt){var Kt=Ee+(Ee?".":"")+Ne(Rt);ot(we,{ownKeys:!0},function(){var Yt=Ue(Kt,ce[Rt],!!be,we,Re,Xe);d(Yt,ee)?Re.push([Kt,Yt,!!be,we,dt,Rt,we.type]):Yt!==void 0&&(dt[Rt]=Yt)})}),ut&&ut({endIterateOwn:!0,end:!0});if(we.iterateUnsetNumeric){for(var bn=ce.length,ht=function(Kt){if(!(Kt in ce)){var Yt=Ee+(Ee?".":"")+Kt;ot(we,{ownKeys:!1},function(){var nn=Ue(Yt,void 0,!!be,we,Re,Xe);d(nn,ee)?Re.push([Yt,nn,!!be,we,dt,Kt,we.type]):nn!==void 0&&(dt[Kt]=nn)})}},sn=0;sn<bn;sn++)ht(sn);ut&&ut({endIterateUnsetNumeric:!0,end:!0})}return dt}function wt(Ee,ce,be,we,Re,Xe,Ft){for(var mt=Re?Se.plainObjectReplacers:Se.nonplainObjectReplacers,Vt=mt.length;Vt--;){var Pt=mt[Vt];if(Pt.test(ce,be)){var ut=Pt.type;if(Se.revivers[ut]){var Nt=he[Ee];he[Ee]=Nt?[ut].concat(Nt):ut}return Object.assign(be,{type:ut,replaced:!0}),!fe&&Pt.replaceAsync||Pt.replace?(Ft&&Ft({replacing:!0}),Ue(Ee,Pt[fe||!Pt.replaceAsync?"replace":"replaceAsync"](ce,be),Me&&"readonly",be,we,Xe,ut)):(Ft&&Ft({typeDetected:!0}),Ue(Ee,ce,Me&&"readonly",be,we,Xe,ut))}}return ce}return We.length?fe&&T.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(K(se,We)).then(je):!fe&&T.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():T.stringification&&fe?[je(se)]:fe?je(se):Promise.resolve(je(se))}},{key:"encapsulateSync",value:function(l,w,T){return this.encapsulate(l,w,H(H({throwOnBadSyncType:!0},T),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(l,w,T){return this.encapsulate(l,w,H(H({throwOnBadSyncType:!0},T),{},{sync:!1}))}},{key:"revive",value:function(l,w){var T=l&&l.$types;if(!T)return l;if(T===!0)return l.$;var K=(w=H(H({sync:!0},this.options),w)).sync,fe=[],Se={},he=!0;T.$&&W(T.$)&&(l=l.$,T=T.$,he=!1);var z=this;function qe(je,ot){var Ue=ue(z.revivers[je]||[],1)[0];if(!Ue)throw new Error("Unregistered type: "+je);return K&&!("revive"in Ue)?ot:Ue[K&&Ue.revive?"revive":!K&&Ue.reviveAsync?"reviveAsync":"revive"](ot,Se)}var We=[];function Me(je){return d(je,Je)?void 0:je}var Fe,se=function(){var ot=[];if(Object.entries(T).forEach(function(Ue){var wt=ue(Ue,2),Ee=wt[0],ce=wt[1];ce!=="#"&&[].concat(ce).forEach(function(be){ue(z.revivers[be]||[null,{}],2)[1].plain&&(ot.push({keypath:Ee,type:be}),delete T[Ee])})}),ot.length)return ot.sort(it).reduce(function Ue(wt,Ee){var ce=Ee.keypath,be=Ee.type;if(Be(wt))return wt.then(function(Xe){return Ue(Xe,{keypath:ce,type:be})});var we=Ie(l,ce);if(d(we=qe(be,we),ee))return we.then(function(Xe){var Ft=Ke(l,ce,Xe);Ft===Xe&&(l=Ft)});var Re=Ke(l,ce,we);Re===we&&(l=Re)},void 0)}();return d(se,ee)?Fe=se.then(function(){return l}):(Fe=function je(ot,Ue,wt,Ee,ce){if(!he||ot!=="$types"){var be=T[ot],we=Ye(Ue);if(we||W(Ue)){var Re=we?new Array(Ue.length):{};for(at(Ue).forEach(function(dt){var Wt=je(ot+(ot?".":"")+Ne(dt),Ue[dt],wt||Re,Re,dt),_t=function(It){return d(It,Je)?Re[dt]=void 0:It!==void 0&&(Re[dt]=It),It};d(Wt,ee)?We.push(Wt.then(function(Zt){return _t(Zt)})):_t(Wt)}),Ue=Re;fe.length;){var Xe=ue(fe[0],4),Ft=Xe[0],mt=Xe[1],Vt=Xe[2],Pt=Xe[3],ut=Ie(Ft,mt);if(ut===void 0)break;Vt[Pt]=ut,fe.splice(0,1)}}if(!be)return Ue;if(be==="#"){var Nt=Ie(wt,Ue.slice(1));return Nt===void 0&&fe.push([wt,Ue.slice(1),Ee,ce]),Nt}return[].concat(be).reduce(function dt(Wt,_t){return d(Wt,ee)?Wt.then(function(Zt){return dt(Zt,_t)}):qe(_t,Wt)},Ue)}}("",l,null),We.length&&(Fe=ee.resolve(Fe).then(function(je){return ee.all([je].concat(We))}).then(function(je){return ue(je,1)[0]}))),Be(Fe)?K&&w.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():d(Fe,ee)?Fe.p.then(Me):Fe:!K&&w.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():K?Me(Fe):Promise.resolve(Me(Fe))}},{key:"reviveSync",value:function(l,w){return this.revive(l,H(H({throwOnBadSyncType:!0},w),{},{sync:!0}))}},{key:"reviveAsync",value:function(l,w){return this.revive(l,H(H({throwOnBadSyncType:!0},w),{},{sync:!1}))}},{key:"register",value:function(l,w){return w=w||{},[].concat(l).forEach(function T(K){var fe=this;if(Ye(K))return K.map(function(Se){return T.call(fe,Se)});K&&at(K).forEach(function(Se){if(Se==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(f.JSON_TYPES.includes(Se))throw new TypeError("Plain JSON object types are reserved as type names");var he=K[Se],z=he&&he.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,qe=z.filter(function(ot){return ot.type===Se});if(qe.length&&(z.splice(z.indexOf(qe[0]),1),delete this.revivers[Se],delete this.types[Se]),typeof he=="function"){var We=he;he={test:function(Ue){return Ue&&Ue.constructor===We},replace:function(Ue){return H({},Ue)},revive:function(Ue){return Object.assign(Object.create(We.prototype),Ue)}}}else if(Ye(he)){var Me=ue(he,3);he={test:Me[0],replace:Me[1],revive:Me[2]}}if(he&&he.test){var Fe={type:Se,test:he.test.bind(he)};he.replace&&(Fe.replace=he.replace.bind(he)),he.replaceAsync&&(Fe.replaceAsync=he.replaceAsync.bind(he));var se=typeof w.fallback=="number"?w.fallback:w.fallback?0:Number.POSITIVE_INFINITY;if(he.testPlainObjects?this.plainObjectReplacers.splice(se,0,Fe):this.nonplainObjectReplacers.splice(se,0,Fe),he.revive||he.reviveAsync){var je={};he.revive&&(je.revive=he.revive.bind(he)),he.reviveAsync&&(je.reviveAsync=he.reviveAsync.bind(he)),this.revivers[Se]=[je,{plain:he.testPlainObjects}]}this.types[Se]=he}},this)},this),this}}]),f}(),Je=function f(){Y(this,f)};Je.__typeson__type__="TypesonUndefined",ke.Undefined=Je,ke.Promise=ee,ke.isThenable=Be,ke.toStringTag=P,ke.hasConstructorOf=d,ke.isObject=F,ke.isPlainObject=W,ke.isUserObject=function f(o){if(!o||P(o)!=="Object")return!1;var l=le(o);return!l||d(o,Object)||f(l)},ke.escapeKeyPathComponent=Ne,ke.unescapeKeyPathComponent=Ce,ke.getByKeyPath=Ie,ke.getJSONType=function(o){return o===null?"null":Array.isArray(o)?"array":m(o)},ke.JSON_TYPES=["null","boolean","number","string","array","object"];for(var lt={userObject:{test:function(o,l){return ke.isUserObject(o)},replace:function(o){return function(w){for(var T=1;T<arguments.length;T++){var K=arguments[T]!=null?arguments[T]:{};T%2?h(Object(K),!0).forEach(function(fe){v(w,fe,K[fe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(K)):h(Object(K)).forEach(function(fe){Object.defineProperty(w,fe,Object.getOwnPropertyDescriptor(K,fe))})}return w}({},o)},revive:function(o){return o}}},D=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(o,l){return!!Array.isArray(o)&&(Object.keys(o).some(function(w){return String(Number.parseInt(w))!==w})&&(l.iterateIn="object",l.addLength=!0),!0)},replace:function(o,l){return l.iterateUnsetNumeric=!0,o},revive:function(o){if(Array.isArray(o))return o;var l=[];return Object.keys(o).forEach(function(w){var T=o[w];l[w]=T}),l}}},{sparseUndefined:{test:function(o,l){return o===void 0&&l.ownKeys===!1},replace:function(o){return 0},revive:function(o){}}}],J={undef:{test:function(o,l){return o===void 0&&(l.ownKeys||!("ownKeys"in l))},replace:function(o){return 0},revive:function(o){return new ke.Undefined}}},j={StringObject:{test:function(o){return ke.toStringTag(o)==="String"&&a(o)==="object"},replace:function(o){return String(o)},revive:function(o){return new String(o)}},BooleanObject:{test:function(o){return ke.toStringTag(o)==="Boolean"&&a(o)==="object"},replace:function(o){return!!o},revive:function(o){return new Boolean(o)}},NumberObject:{test:function(o){return ke.toStringTag(o)==="Number"&&a(o)==="object"},replace:function(o){return Number(o)},revive:function(o){return new Number(o)}}},V=[{nan:{test:function(o){return Number.isNaN(o)},replace:function(o){return"NaN"},revive:function(o){return Number.NaN}}},{infinity:{test:function(o){return o===Number.POSITIVE_INFINITY},replace:function(o){return"Infinity"},revive:function(o){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(o){return o===Number.NEGATIVE_INFINITY},replace:function(o){return"-Infinity"},revive:function(o){return Number.NEGATIVE_INFINITY}}}],te={date:{test:function(o){return ke.toStringTag(o)==="Date"},replace:function(o){var l=o.getTime();return Number.isNaN(l)?"NaN":l},revive:function(o){return o==="NaN"?new Date(Number.NaN):new Date(o)}}},me={regexp:{test:function(o){return ke.toStringTag(o)==="RegExp"},replace:function(o){return{source:o.source,flags:(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.sticky?"y":"")+(o.unicode?"u":"")}},revive:function(o){var l=o.source,w=o.flags;return new RegExp(l,w)}}},$e={map:{test:function(o){return ke.toStringTag(o)==="Map"},replace:function(o){return B(o.entries())},revive:function(o){return new Map(o)}}},ze={set:{test:function(o){return ke.toStringTag(o)==="Set"},replace:function(o){return B(o.values())},revive:function(o){return new Set(o)}}},_e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",At=new Uint8Array(256),yt=0;yt<_e.length;yt++)At[_e.charCodeAt(yt)]=yt;var Lt=function(o,l,w){w==null&&(w=o.byteLength);for(var T=new Uint8Array(o,0,w),K=T.length,fe="",Se=0;Se<K;Se+=3)fe+=_e[T[Se]>>2],fe+=_e[(3&T[Se])<<4|T[Se+1]>>4],fe+=_e[(15&T[Se+1])<<2|T[Se+2]>>6],fe+=_e[63&T[Se+2]];return K%3==2?fe=fe.slice(0,-1)+"=":K%3==1&&(fe=fe.slice(0,-2)+"=="),fe},xt=function(o){var l,w,T,K,fe=o.length,Se=.75*o.length,he=0;o[o.length-1]==="="&&(Se--,o[o.length-2]==="="&&Se--);for(var z=new ArrayBuffer(Se),qe=new Uint8Array(z),We=0;We<fe;We+=4)l=At[o.charCodeAt(We)],w=At[o.charCodeAt(We+1)],T=At[o.charCodeAt(We+2)],K=At[o.charCodeAt(We+3)],qe[he++]=l<<2|w>>4,qe[he++]=(15&w)<<4|T>>2,qe[he++]=(3&T)<<6|63&K;return z},Tt={arraybuffer:{test:function(o){return ke.toStringTag(o)==="ArrayBuffer"},replace:function(o,l){l.buffers||(l.buffers=[]);var w=l.buffers.indexOf(o);return w>-1?{index:w}:(l.buffers.push(o),Lt(o))},revive:function(o,l){if(l.buffers||(l.buffers=[]),a(o)==="object")return l.buffers[o.index];var w=xt(o);return l.buffers.push(w),w}}},Et=typeof self>"u"?oi:self,vt={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(f){var o=f,l=Et[o];l&&(vt[f.toLowerCase()]={test:function(T){return ke.toStringTag(T)===o},replace:function(T,K){var fe=T.buffer,Se=T.byteOffset,he=T.length;K.buffers||(K.buffers=[]);var z=K.buffers.indexOf(fe);return z>-1?{index:z,byteOffset:Se,length:he}:(K.buffers.push(fe),{encoded:Lt(fe),byteOffset:Se,length:he})},revive:function(T,K){K.buffers||(K.buffers=[]);var fe,Se=T.byteOffset,he=T.length,z=T.encoded,qe=T.index;return"index"in T?fe=K.buffers[qe]:(fe=xt(z),K.buffers.push(fe)),new l(fe,Se,he)}})});var jt={dataview:{test:function(o){return ke.toStringTag(o)==="DataView"},replace:function(o,l){var w=o.buffer,T=o.byteOffset,K=o.byteLength;l.buffers||(l.buffers=[]);var fe=l.buffers.indexOf(w);return fe>-1?{index:fe,byteOffset:T,byteLength:K}:(l.buffers.push(w),{encoded:Lt(w),byteOffset:T,byteLength:K})},revive:function(o,l){l.buffers||(l.buffers=[]);var w,T=o.byteOffset,K=o.byteLength,fe=o.encoded,Se=o.index;return"index"in o?w=l.buffers[Se]:(w=xt(fe),l.buffers.push(w)),new DataView(w,T,K)}}},ft={IntlCollator:{test:function(o){return ke.hasConstructorOf(o,Intl.Collator)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.Collator(o.locale,o)}},IntlDateTimeFormat:{test:function(o){return ke.hasConstructorOf(o,Intl.DateTimeFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.DateTimeFormat(o.locale,o)}},IntlNumberFormat:{test:function(o){return ke.hasConstructorOf(o,Intl.NumberFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.NumberFormat(o.locale,o)}}};function Ze(f){for(var o=new Uint8Array(f.length),l=0;l<f.length;l++)o[l]=f.charCodeAt(l);return o.buffer}var et={file:{test:function(o){return ke.toStringTag(o)==="File"},replace:function(o){var l=new XMLHttpRequest;if(l.overrideMimeType("text/plain; charset=x-user-defined"),l.open("GET",URL.createObjectURL(o),!1),l.send(),l.status!==200&&l.status!==0)throw new Error("Bad File access: "+l.status);return{type:o.type,stringContents:l.responseText,name:o.name,lastModified:o.lastModified}},revive:function(o){var l=o.name,w=o.type,T=o.stringContents,K=o.lastModified;return new File([Ze(T)],l,{type:w,lastModified:K})},replaceAsync:function(o){return new ke.Promise(function(l,w){var T=new FileReader;T.addEventListener("load",function(){l({type:o.type,stringContents:T.result,name:o.name,lastModified:o.lastModified})}),T.addEventListener("error",function(){w(T.error)}),T.readAsBinaryString(o)})}}},Ge={bigint:{test:function(o){return typeof o=="bigint"},replace:function(o){return String(o)},revive:function(o){return BigInt(o)}}},pt={bigintObject:{test:function(o){return a(o)==="object"&&ke.hasConstructorOf(o,BigInt)},replace:function(o){return String(o)},revive:function(o){return new Object(BigInt(o))}}},Oe={cryptokey:{test:function(o){return ke.toStringTag(o)==="CryptoKey"&&o.extractable},replaceAsync:function(o){return new ke.Promise(function(l,w){crypto.subtle.exportKey("jwk",o).catch(function(T){w(T)}).then(function(T){l({jwk:T,algorithm:o.algorithm,usages:o.usages})})})},revive:function(o){var l=o.jwk,w=o.algorithm,T=o.usages;return crypto.subtle.importKey("jwk",l,w,!0,T)}}};return[lt,J,D,j,V,te,me,{imagedata:{test:function(o){return ke.toStringTag(o)==="ImageData"},replace:function(o){return{array:B(o.data),width:o.width,height:o.height}},revive:function(o){return new ImageData(new Uint8ClampedArray(o.array),o.width,o.height)}}},{imagebitmap:{test:function(o){return ke.toStringTag(o)==="ImageBitmap"||o&&o.dataset&&o.dataset.toStringTag==="ImageBitmap"},replace:function(o){var l=document.createElement("canvas");return l.getContext("2d").drawImage(o,0,0),l.toDataURL()},revive:function(o){var l=document.createElement("canvas"),w=l.getContext("2d"),T=document.createElement("img");return T.addEventListener("load",function(){w.drawImage(T,0,0)}),T.src=o,l},reviveAsync:function(o){var l=document.createElement("canvas"),w=l.getContext("2d"),T=document.createElement("img");return T.addEventListener("load",function(){w.drawImage(T,0,0)}),T.src=o,createImageBitmap(l)}}},et,{file:et.file,filelist:{test:function(o){return ke.toStringTag(o)==="FileList"},replace:function(o){for(var l=[],w=0;w<o.length;w++)l[w]=o.item(w);return l},revive:function(o){return new(function(){function l(){p(this,l),this._files=arguments[0],this.length=this._files.length}return function(T,K,fe){return K&&g(T.prototype,K),T}(l,[{key:"item",value:function(T){return this._files[T]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),l}())(o)}}},{blob:{test:function(o){return ke.toStringTag(o)==="Blob"},replace:function(o){var l=new XMLHttpRequest;if(l.overrideMimeType("text/plain; charset=x-user-defined"),l.open("GET",URL.createObjectURL(o),!1),l.send(),l.status!==200&&l.status!==0)throw new Error("Bad Blob access: "+l.status);return{type:o.type,stringContents:l.responseText}},revive:function(o){var l=o.type,w=o.stringContents;return new Blob([Ze(w)],{type:l})},replaceAsync:function(o){return new ke.Promise(function(l,w){var T=new FileReader;T.addEventListener("load",function(){l({type:o.type,stringContents:T.result})}),T.addEventListener("error",function(){w(T.error)}),T.readAsBinaryString(o)})}}}].concat(typeof Map=="function"?$e:[],typeof Set=="function"?ze:[],typeof ArrayBuffer=="function"?Tt:[],typeof Uint8Array=="function"?vt:[],typeof DataView=="function"?jt:[],typeof Intl<"u"?ft:[],typeof crypto<"u"?Oe:[],typeof BigInt<"u"?[Ge,pt]:[])})}),Kn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qn=new Uint8Array(256);for(var br=0;br<Kn.length;br++)Qn[Kn.codePointAt(br)]=br;var ai=function(u,a,p){p==null&&(p=u.byteLength);for(var g=new Uint8Array(u,0,p),v=g.length,h="",B=0;B<v;B+=3)h+=Kn[g[B]>>2],h+=Kn[(g[B]&3)<<4|g[B+1]>>4],h+=Kn[(g[B+1]&15)<<2|g[B+2]>>6],h+=Kn[g[B+2]&63];return v%3===2?h=h.slice(0,-1)+"=":v%3===1&&(h=h.slice(0,-2)+"=="),h},co=function(u){var a=u.length,p=u.length*.75,g=0,v,h,B,L;u[u.length-1]==="="&&(p--,u[u.length-2]==="="&&p--);for(var m=new ArrayBuffer(p),Y=new Uint8Array(m),q=0;q<a;q+=4)v=Qn[u.codePointAt(q)],h=Qn[u.codePointAt(q+1)],B=Qn[u.codePointAt(q+2)],L=Qn[u.codePointAt(q+3)],Y[g++]=v<<2|h>>4,Y[g++]=(h&15)<<4|B>>2,Y[g++]=(B&3)<<6|L&63;return m},wa=typeof self>"u"?global:self,lo={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(s){var u=s,a=wa[u];a&&(lo[s.toLowerCase()+"2"]={test:function(p){return Sr.toStringTag(p)===u},replace:function(p){var g=p.buffer,v=p.byteOffset,h=p.length;return{buffer:g,byteOffset:v,length:h}},revive:function(p){var g=p.buffer,v=p.byteOffset,h=p.length;return new a(g,v,h)}})});var _a={arraybuffer:{test:function(s){return Sr.toStringTag(s)==="ArrayBuffer"},replace:function(s){return ai(s,0,s.byteLength)},revive:function(s){var u=co(s);return u}}},un=new Sr().register(ga),Oa="FileReaderSync"in self,Or=[],Zr=0;un.register([_a,lo,{blob2:{test:function(s){return Sr.toStringTag(s)==="Blob"},replace:function(s){if(s.isClosed)throw new Error("The Blob is closed");if(Oa){var u=so(s,"binary"),a=ai(u,0,u.byteLength);return{type:s.type,data:a}}else{Or.push(s);var p={type:s.type,data:{start:Zr,end:Zr+s.size}};return Zr+=s.size,p}},finalize:function(s,u){s.data=ai(u,0,u.byteLength)},revive:function(s){var u=s.type,a=s.data;return new Blob([co(a)],{type:u})}}}]);un.mustFinalize=function(){return Or.length>0};un.finalize=function(s){return Sn(void 0,void 0,void 0,function(){var u,a,p,g,v,h,B,L,m,Y;return pn(this,function(q){switch(q.label){case 0:return[4,uo(new Blob(Or),"binary")];case 1:if(u=q.sent(),s){for(a=0,p=s;a<p.length;a++)if(g=p[a],g.$types){v=g.$types,h=v.$,h&&(v=v.$);for(B in v)L=v[B],m=un.types[L],m&&m.finalize&&(Y=Bt.getByKeyPath(g,h?"$."+B:B),m.finalize(Y,u.slice(Y.start,Y.end)))}}return Or=[],[2]}})})};var Sa=2e3;function fo(s,u){return Sn(this,void 0,void 0,function(){function a(){return Sn(this,void 0,void 0,function(){var q,ie,Q,H,ue,ne,Ae,Te,ee,Le;return pn(this,function($){switch($.label){case 0:return[4,Promise.all(g.map(function(le){return le.count()}))];case 1:q=$.sent(),q.forEach(function(le,X){return h[X].rowCount=le}),Y.totalRows=q.reduce(function(le,X){return le+X}),ie=JSON.stringify(L,void 0,B?2:void 0),Q=ie.lastIndexOf("]"),H=ie.substring(0,Q),v.push(H),ue=u.filter,ne=u.transform,Ae=function(le){var X,Be,P,d,W,F,Ne,Ce,Ie,Ke,Qe,at;return pn(this,function(Ye){switch(Ye.label){case 0:X=s.table(le),Be=X.schema.primKey,P=!!Be.keyPath,d=u.numRowsPerChunk||Sa,W=P?{tableName:X.name,inbound:!0,rows:[]}:{tableName:X.name,inbound:!1,rows:[]},F=JSON.stringify(W,void 0,B?2:void 0),B&&(F=F.split(`
`).join(`
    `)),Ne=F.lastIndexOf("]"),v.push(F.substring(0,Ne)),Ce=null,Ie=0,Ke=!0,Qe=function(){var Pe,ge,De,it,ke,J,Je,lt,D,J;return pn(this,function(j){switch(j.label){case 0:return m&&Bt.ignoreTransaction(function(){return m(Y)}),Pe=Ce==null?X.limit(d):X.where(":id").above(Ce).limit(d),[4,Pe.toArray()];case 1:return ge=j.sent(),ge.length===0?[2,"break"]:(Ce!=null&&Ie>0&&(v.push(","),B&&v.push(`
      `)),Ke=ge.length===d,P?(De=ue?ge.filter(function(V){return ue(le,V)}):ge,it=ne?De.map(function(V){return ne(le,V).value}):De,ke=it.map(function(V){return un.encapsulate(V)}),un.mustFinalize()?[4,Bt.waitFor(un.finalize(ke))]:[3,3]):[3,4]);case 2:j.sent(),j.label=3;case 3:return J=JSON.stringify(ke,void 0,B?2:void 0),B&&(J=J.split(`
`).join(`
      `)),v.push(new Blob([J.substring(1,J.length-1)])),Ie=it.length,Ce=ge.length>0?Bt.getByKeyPath(ge[ge.length-1],Be.keyPath):null,[3,8];case 4:return[4,Pe.primaryKeys()];case 5:return Je=j.sent(),lt=Je.map(function(V,te){return[V,ge[te]]}),ue&&(lt=lt.filter(function(V){var te=V[0],me=V[1];return ue(le,me,te)})),ne&&(lt=lt.map(function(V){var te=V[0],me=V[1],$e=ne(le,me,te);return[$e.key,$e.value]})),D=lt.map(function(V){return un.encapsulate(V)}),un.mustFinalize()?[4,Bt.waitFor(un.finalize(D))]:[3,7];case 6:j.sent(),j.label=7;case 7:J=JSON.stringify(D,void 0,B?2:void 0),B&&(J=J.split(`
`).join(`
      `)),v.push(new Blob([J.substring(1,J.length-1)])),Ie=lt.length,Ce=Je.length>0?Je[Je.length-1]:null,j.label=8;case 8:return Y.completedRows+=ge.length,[2]}})},Ye.label=1;case 1:return Ke?[5,Qe()]:[3,3];case 2:return at=Ye.sent(),at==="break"?[3,3]:[3,1];case 3:return v.push(F.substr(Ne)),Y.completedTables+=1,Y.completedTables<Y.totalTables&&v.push(","),[2]}})},Te=0,ee=h,$.label=2;case 2:return Te<ee.length?(Le=ee[Te].name,[5,Ae(Le)]):[3,5];case 3:$.sent(),$.label=4;case 4:return Te++,[3,2];case 5:return v.push(ie.substr(Q)),Y.done=!0,m&&Bt.ignoreTransaction(function(){return m(Y)}),[2]}})})}var p,g,v,h,B,L,m,Y;return pn(this,function(q){switch(q.label){case 0:u=u||{},p=u.skipTables?u.skipTables:[],g=s.tables.filter(function(ie){return!p.includes(ie.name)}),v=[],h=g.map(function(ie){return{name:ie.name,schema:ma(ie),rowCount:0}}),B=u.prettyJson,L={formatName:"dexie",formatVersion:1,data:{databaseName:s.name,databaseVersion:s.verno,tables:h,data:[]}},m=u.progressCallback,Y={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:h.length},q.label=1;case 1:return q.trys.push([1,,6,7]),u.noTransaction?[4,a()]:[3,3];case 2:return q.sent(),[3,5];case 3:return[4,s.transaction("r",s.tables,a)];case 4:q.sent(),q.label=5;case 5:return[3,7];case 6:return un.finalize(),[7];case 7:return[2,new Blob(v,{type:"text/json"})]}})})}var Ea=1,ka={Stream:function(){}},Aa=ci(function(s,u){(function(a){var p=typeof process=="object"&&Wi?Wi:self;a.parser=function(P){return new Q(P)},a.CParser=Q,a.CStream=ue,a.createStream=H,a.MAX_BUFFER_LENGTH=10*1024*1024,a.DEBUG=p.CDEBUG==="debug",a.INFO=p.CDEBUG==="debug"||p.CDEBUG==="info",a.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var g={textNode:void 0,numberNode:""},v=a.EVENTS.filter(function(P){return P!=="error"&&P!=="end"}),h=0,B;a.STATE={BEGIN:h++,VALUE:h++,OPEN_OBJECT:h++,CLOSE_OBJECT:h++,OPEN_ARRAY:h++,CLOSE_ARRAY:h++,TEXT_ESCAPE:h++,STRING:h++,BACKSLASH:h++,END:h++,OPEN_KEY:h++,CLOSE_KEY:h++,TRUE:h++,TRUE2:h++,TRUE3:h++,FALSE:h++,FALSE2:h++,FALSE3:h++,FALSE4:h++,NULL:h++,NULL2:h++,NULL3:h++,NUMBER_DECIMAL_POINT:h++,NUMBER_DIGIT:h++};for(var L in a.STATE)a.STATE[a.STATE[L]]=L;h=a.STATE;const m={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(P){function d(){this.__proto__=P}return d.prototype=P,new d}),Object.getPrototypeOf||(Object.getPrototypeOf=function(P){return P.__proto__}),Object.keys||(Object.keys=function(P){var d=[];for(var W in P)P.hasOwnProperty(W)&&d.push(W);return d});function Y(P){var d=Math.max(a.MAX_BUFFER_LENGTH,10),W=0;for(var F in g){var Ne=P[F]===void 0?0:P[F].length;if(Ne>d)switch(F){case"text":closeText(P);break;default:$(P,"Max buffer length exceeded: "+F)}W=Math.max(W,Ne)}P.bufferCheckPosition=a.MAX_BUFFER_LENGTH-W+P.position}function q(P){for(var d in g)P[d]=g[d]}var ie=/[\\"\n]/g;function Q(P){if(!(this instanceof Q))return new Q(P);var d=this;q(d),d.bufferCheckPosition=a.MAX_BUFFER_LENGTH,d.q=d.c=d.p="",d.opt=P||{},d.closed=d.closedRoot=d.sawRoot=!1,d.tag=d.error=null,d.state=h.BEGIN,d.stack=new Array,d.position=d.column=0,d.line=1,d.slashed=!1,d.unicodeI=0,d.unicodeS=null,d.depth=0,ne(d,"onready")}Q.prototype={end:function(){le(this)},write:Be,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{B=ka.Stream}catch{B=function(){}}function H(P){return new ue(P)}function ue(P){if(!(this instanceof ue))return new ue(P);this._parser=new Q(P),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var d=this;B.apply(d),this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(W){d.emit("error",W),d._parser.error=null},v.forEach(function(W){Object.defineProperty(d,"on"+W,{get:function(){return d._parser["on"+W]},set:function(F){if(!F)return d.removeAllListeners(W),d._parser["on"+W]=F,F;d.on(W,F)},enumerable:!0,configurable:!1})})}ue.prototype=Object.create(B.prototype,{constructor:{value:ue}}),ue.prototype.write=function(P){P=new Buffer(P);for(var d=0;d<P.length;d++){var W=P[d];if(this.bytes_remaining>0){for(var F=0;F<this.bytes_remaining;F++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+F]=P[F];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,d=d+F-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&W>=128)if(W>=194&&W<=223&&(this.bytes_in_sequence=2),W>=224&&W<=239&&(this.bytes_in_sequence=3),W>=240&&W<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+d>P.length){for(var Ne=0;Ne<=P.length-1-d;Ne++)this.temp_buffs[this.bytes_in_sequence][Ne]=P[d+Ne];return this.bytes_remaining=d+this.bytes_in_sequence-P.length,!0}else{this.string=P.slice(d,d+this.bytes_in_sequence).toString(),d=d+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var Ce=d;Ce<P.length&&!(P[Ce]>=128);Ce++);this.string=P.slice(d,Ce).toString(),this._parser.write(this.string),this.emit("data",this.string),d=Ce-1}},ue.prototype.end=function(P){return P&&P.length&&this._parser.write(P.toString()),this._parser.end(),!0},ue.prototype.on=function(P,d){var W=this;return!W._parser["on"+P]&&v.indexOf(P)!==-1&&(W._parser["on"+P]=function(){var F=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);F.splice(0,0,P),W.emit.apply(W,F)}),B.prototype.on.call(W,P,d)},ue.prototype.destroy=function(){q(this._parser),this.emit("close")};function ne(P,d,W){a.INFO&&console.log("-- emit",d,W),P[d]&&P[d](W)}function Ae(P,d,W){Te(P),ne(P,d,W)}function Te(P,d){P.textNode=Le(P.opt,P.textNode),P.textNode!==void 0&&ne(P,d||"onvalue",P.textNode),P.textNode=void 0}function ee(P){P.numberNode&&ne(P,"onvalue",parseFloat(P.numberNode)),P.numberNode=""}function Le(P,d){return d===void 0||(P.trim&&(d=d.trim()),P.normalize&&(d=d.replace(/\s+/g," "))),d}function $(P,d){return Te(P),d+=`
Line: `+P.line+`
Column: `+P.column+`
Char: `+P.c,d=new Error(d),P.error=d,ne(P,"onerror",d),P}function le(P){return(P.state!==h.VALUE||P.depth!==0)&&$(P,"Unexpected end"),Te(P),P.c="",P.closed=!0,ne(P,"onend"),Q.call(P,P.opt),P}function X(P){return P===m.carriageReturn||P===m.lineFeed||P===m.space||P===m.tab}function Be(P){var d=this;if(this.error)throw this.error;if(d.closed)return $(d,"Cannot write after close. Assign an onready handler.");if(P===null)return le(d);var W=0,F=P.charCodeAt(0),Ne=d.p;for(a.DEBUG&&console.log("write -> ["+P+"]");F&&(Ne=F,d.c=F=P.charCodeAt(W++),Ne!==F?d.p=Ne:Ne=d.p,!!F);)switch(a.DEBUG&&console.log(W,F,a.STATE[d.state]),d.position++,F===m.lineFeed?(d.line++,d.column=0):d.column++,d.state){case h.BEGIN:F===m.openBrace?d.state=h.OPEN_OBJECT:F===m.openBracket?d.state=h.OPEN_ARRAY:X(F)||$(d,"Non-whitespace before {[.");continue;case h.OPEN_KEY:case h.OPEN_OBJECT:if(X(F))continue;if(d.state===h.OPEN_KEY)d.stack.push(h.CLOSE_KEY);else if(F===m.closeBrace){ne(d,"onopenobject"),this.depth++,ne(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||h.VALUE;continue}else d.stack.push(h.CLOSE_OBJECT);F===m.doubleQuote?d.state=h.STRING:$(d,'Malformed object key should start with "');continue;case h.CLOSE_KEY:case h.CLOSE_OBJECT:if(X(F))continue;d.state,h.CLOSE_KEY,F===m.colon?(d.state===h.CLOSE_OBJECT?(d.stack.push(h.CLOSE_OBJECT),Te(d,"onopenobject"),this.depth++):Te(d,"onkey"),d.state=h.VALUE):F===m.closeBrace?(Ae(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||h.VALUE):F===m.comma?(d.state===h.CLOSE_OBJECT&&d.stack.push(h.CLOSE_OBJECT),Te(d),d.state=h.OPEN_KEY):$(d,"Bad object");continue;case h.OPEN_ARRAY:case h.VALUE:if(X(F))continue;if(d.state===h.OPEN_ARRAY)if(ne(d,"onopenarray"),this.depth++,d.state=h.VALUE,F===m.closeBracket){ne(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||h.VALUE;continue}else d.stack.push(h.CLOSE_ARRAY);F===m.doubleQuote?d.state=h.STRING:F===m.openBrace?d.state=h.OPEN_OBJECT:F===m.openBracket?d.state=h.OPEN_ARRAY:F===m.t?d.state=h.TRUE:F===m.f?d.state=h.FALSE:F===m.n?d.state=h.NULL:F===m.minus?d.numberNode+="-":m._0<=F&&F<=m._9?(d.numberNode+=String.fromCharCode(F),d.state=h.NUMBER_DIGIT):$(d,"Bad value");continue;case h.CLOSE_ARRAY:if(F===m.comma)d.stack.push(h.CLOSE_ARRAY),Te(d,"onvalue"),d.state=h.VALUE;else if(F===m.closeBracket)Ae(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||h.VALUE;else{if(X(F))continue;$(d,"Bad array")}continue;case h.STRING:d.textNode===void 0&&(d.textNode="");var Ce=W-1,Ie=d.slashed,Ke=d.unicodeI;e:for(;;){for(a.DEBUG&&console.log(W,F,a.STATE[d.state],Ie);Ke>0;)if(d.unicodeS+=String.fromCharCode(F),F=P.charCodeAt(W++),d.position++,Ke===4?(d.textNode+=String.fromCharCode(parseInt(d.unicodeS,16)),Ke=0,Ce=W-1):Ke++,!F)break e;if(F===m.doubleQuote&&!Ie){d.state=d.stack.pop()||h.VALUE,d.textNode+=P.substring(Ce,W-1),d.position+=W-1-Ce;break}if(F===m.backslash&&!Ie&&(Ie=!0,d.textNode+=P.substring(Ce,W-1),d.position+=W-1-Ce,F=P.charCodeAt(W++),d.position++,!F))break;if(Ie){if(Ie=!1,F===m.n?d.textNode+=`
`:F===m.r?d.textNode+="\r":F===m.t?d.textNode+="	":F===m.f?d.textNode+="\f":F===m.b?d.textNode+="\b":F===m.u?(Ke=1,d.unicodeS=""):d.textNode+=String.fromCharCode(F),F=P.charCodeAt(W++),d.position++,Ce=W-1,F)continue;break}ie.lastIndex=W;var Qe=ie.exec(P);if(Qe===null){W=P.length+1,d.textNode+=P.substring(Ce,W-1),d.position+=W-1-Ce;break}if(W=Qe.index+1,F=P.charCodeAt(Qe.index),!F){d.textNode+=P.substring(Ce,W-1),d.position+=W-1-Ce;break}}d.slashed=Ie,d.unicodeI=Ke;continue;case h.TRUE:F===m.r?d.state=h.TRUE2:$(d,"Invalid true started with t"+F);continue;case h.TRUE2:F===m.u?d.state=h.TRUE3:$(d,"Invalid true started with tr"+F);continue;case h.TRUE3:F===m.e?(ne(d,"onvalue",!0),d.state=d.stack.pop()||h.VALUE):$(d,"Invalid true started with tru"+F);continue;case h.FALSE:F===m.a?d.state=h.FALSE2:$(d,"Invalid false started with f"+F);continue;case h.FALSE2:F===m.l?d.state=h.FALSE3:$(d,"Invalid false started with fa"+F);continue;case h.FALSE3:F===m.s?d.state=h.FALSE4:$(d,"Invalid false started with fal"+F);continue;case h.FALSE4:F===m.e?(ne(d,"onvalue",!1),d.state=d.stack.pop()||h.VALUE):$(d,"Invalid false started with fals"+F);continue;case h.NULL:F===m.u?d.state=h.NULL2:$(d,"Invalid null started with n"+F);continue;case h.NULL2:F===m.l?d.state=h.NULL3:$(d,"Invalid null started with nu"+F);continue;case h.NULL3:F===m.l?(ne(d,"onvalue",null),d.state=d.stack.pop()||h.VALUE):$(d,"Invalid null started with nul"+F);continue;case h.NUMBER_DECIMAL_POINT:F===m.period?(d.numberNode+=".",d.state=h.NUMBER_DIGIT):$(d,"Leading zero not followed by .");continue;case h.NUMBER_DIGIT:m._0<=F&&F<=m._9?d.numberNode+=String.fromCharCode(F):F===m.period?(d.numberNode.indexOf(".")!==-1&&$(d,"Invalid number has two dots"),d.numberNode+="."):F===m.e||F===m.E?((d.numberNode.indexOf("e")!==-1||d.numberNode.indexOf("E")!==-1)&&$(d,"Invalid number has two exponential"),d.numberNode+="e"):F===m.plus||F===m.minus?(Ne===m.e||Ne===m.E||$(d,"Invalid symbol in number"),d.numberNode+=String.fromCharCode(F)):(ee(d),W--,d.state=d.stack.pop()||h.VALUE);continue;default:$(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&Y(d),d}})(u)});function Ta(s){var u=0,a=Pa(),p={pullAsync:function(g){return Sn(this,void 0,void 0,function(){var v,h,B;return pn(this,function(L){switch(L.label){case 0:return v=s.slice(u,u+g),u+=g,[4,uo(v,"text")];case 1:return h=L.sent(),B=a.write(h),p.result=B||{},[2,B]}})})},pullSync:function(g){var v=s.slice(u,u+g);u+=g;var h=so(v,"text"),B=a.write(h);return p.result=B||{},B},done:function(){return a.done()},eof:function(){return u>=s.size},result:{}};return p}function Pa(s){var u=Aa.parser(),a=0,p,g=[],v,h,B=!1,L=!1;return u.onopenobject=function(m){var Y={};Y.incomplete=!0,p||(p=Y),v&&(g.push([h,v,L]),L?v.push(Y):v[h]=Y),v=Y,h=m,L=!1,++a},u.onkey=function(m){return h=m},u.onvalue=function(m){return L?v.push(m):v[h]=m},u.oncloseobject=function(){var m;delete v.incomplete,h=null,--a===0?B=!0:(m=g.pop(),h=m[0],v=m[1],L=m[2])},u.onopenarray=function(){var m=[];m.incomplete=!0,p||(p=m),v&&(g.push([h,v,L]),L?v.push(m):v[h]=m),v=m,L=!0,h=null,++a},u.onclosearray=function(){var m;delete v.incomplete,h=null,--a===0?B=!0:(m=g.pop(),h=m[0],v=m[1],L=m[2])},{write:function(m){return u.write(m),p},done:function(){return B}}}var po=1024;function Na(s,u){return Sn(this,void 0,void 0,function(){var a,p,g,v;return pn(this,function(h){switch(h.label){case 0:return u=u||{},a=u.chunkSizeBytes||po*1024,[4,yo(s,a)];case 1:return p=h.sent(),g=p.result.data,v=new Bt(g.databaseName),v.version(g.databaseVersion).stores(ba(g)),[4,ho(v,p,u)];case 2:return h.sent(),[2,v]}})})}function ho(s,u,a){return Sn(this,void 0,void 0,function(){function p(){return Sn(this,void 0,void 0,function(){var ue,ne,Ae,Te,ee;return pn(this,function(Le){switch(Le.label){case 0:ue=function($){var le,X,Be,P,d,W,F,Ne,Ce,Ie,Ke,Qe,at;return pn(this,function(Ye){switch(Ye.label){case 0:if(m.includes($.tableName))return[2,"continue"];if(!$.rows)return[2,"break"];if(!$.rows.incomplete&&$.rows.length===0)return[2,"continue"];if(Y&&Bt.ignoreTransaction(function(){return Y(q)}),le=$.tableName,X=s.table(le),Be=L.tables.filter(function(Pe){return Pe.name===le})[0].schema,!X){if(a.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat($.tableName," is missing in installed database"))}if(!a.acceptChangedPrimaryKey&&Be.split(",")[0]!=X.schema.primKey.src)throw new Error("Primary key differs for table ".concat($.tableName,". "));for(P=$.rows,d=[],W=0;W<P.length&&(F=P[W],!F.incomplete);W++)d.push(un.revive(F));return Ne=a.filter,Ce=a.transform,Ie=Ne?$.inbound?d.filter(function(Pe){return Ne(le,Pe)}):d.filter(function(Pe){var ge=Pe[0],De=Pe[1];return Ne(le,De,ge)}):d,Ce&&(Ie=Ie.map($.inbound?function(Pe){return Ce(le,Pe).value}:function(Pe){var ge=Pe[0],De=Pe[1],it=Ce(le,De,ge);return[it.key,it.value]})),Ke=$.inbound?[void 0,Ie]:[Ie.map(function(Pe){return Pe[0]}),d.map(function(Pe){return Pe[1]})],Qe=Ke[0],at=Ke[1],a.overwriteValues?[4,X.bulkPut(at,Qe)]:[3,2];case 1:return Ye.sent(),[3,4];case 2:return[4,X.bulkAdd(at,Qe)];case 3:Ye.sent(),Ye.label=4;case 4:return q.completedRows+=d.length,d.incomplete||(q.completedTables+=1),P.splice(0,d.length),[2]}})},ne=0,Ae=L.data,Le.label=1;case 1:return ne<Ae.length?(Te=Ae[ne],[5,ue(Te)]):[3,4];case 2:if(ee=Le.sent(),ee==="break")return[3,4];Le.label=3;case 3:return ne++,[3,1];case 4:for(;L.data.length>0&&L.data[0].rows&&!L.data[0].rows.incomplete;)L.data.splice(0,1);return!v.done()&&!v.eof()?B?(v.pullSync(g),[3,7]):[3,5]:[3,8];case 5:return[4,Bt.waitFor(v.pullAsync(g))];case 6:Le.sent(),Le.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var g,v,h,B,L,m,Y,q,ie,Q,H;return pn(this,function(ue){switch(ue.label){case 0:return a=a||{},g=a.chunkSizeBytes||po*1024,[4,yo(u,g)];case 1:if(v=ue.sent(),h=v.result,B="FileReaderSync"in self,L=h.data,m=a.skipTables?a.skipTables:[],!a.acceptNameDiff&&s.name!==L.databaseName)throw new Error("Name differs. Current database name is ".concat(s.name," but export is ").concat(L.databaseName));if(!a.acceptVersionDiff&&s.verno!==L.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(s.verno," but export is ").concat(L.databaseVersion));if(Y=a.progressCallback,q={done:!1,completedRows:0,completedTables:0,totalRows:L.tables.reduce(function(ne,Ae){return ne+Ae.rowCount},0),totalTables:L.tables.length},Y&&Bt.ignoreTransaction(function(){return Y(q)}),!a.clearTablesBeforeImport)return[3,5];ie=0,Q=s.tables,ue.label=2;case 2:return ie<Q.length?(H=Q[ie],m.includes(H.name)?[3,4]:[4,H.clear()]):[3,5];case 3:ue.sent(),ue.label=4;case 4:return ie++,[3,2];case 5:return a.noTransaction?[4,p()]:[3,7];case 6:return ue.sent(),[3,9];case 7:return[4,s.transaction("rw",s.tables,p)];case 8:ue.sent(),ue.label=9;case 9:return q.done=!0,Y&&Bt.ignoreTransaction(function(){return Y(q)}),[2]}})})}function yo(s,u){return Sn(this,void 0,void 0,function(){var a,p;return pn(this,function(g){switch(g.label){case 0:a="slice"in s?Ta(s):s,g.label=1;case 1:return a.eof()?[3,3]:[4,a.pullAsync(u)];case 2:return g.sent(),a.result.data&&a.result.data.data?[3,3]:[3,1];case 3:if(p=a.result,!p||p.formatName!="dexie")throw new Error("Given file is not a dexie export");if(p.formatVersion>Ea)throw new Error("Format version ".concat(p.formatVersion," not supported"));if(!p.data)throw new Error("No data in export file");if(!p.data.databaseName)throw new Error("Missing databaseName in export file");if(!p.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!p.data.tables)throw new Error("Missing tables in export file");return[2,a]}})})}Bt.prototype.export=function(s){return fo(this,s)};Bt.prototype.import=function(s,u){return ho(this,s,u)};Bt.import=function(s,u){return Na(s,u)};var vo={exports:{}};(function(s,u){(function(a,p){s.exports=p()})(ti,function(){return function a(p,g,v){var h=window,B="application/octet-stream",L=v||B,m=p,Y=!g&&!v&&m,q=document.createElement("a"),ie=function(X){return String(X)},Q=h.Blob||h.MozBlob||h.WebKitBlob||ie,H=g||"download",ue,ne;if(Q=Q.call?Q.bind(h):Blob,String(this)==="true"&&(m=[m,L],L=m[0],m=m[1]),Y&&Y.length<2048&&(H=Y.split("/").pop().split("?")[0],q.href=Y,q.href.indexOf(Y)!==-1)){var Ae=new XMLHttpRequest;return Ae.open("GET",Y,!0),Ae.responseType="blob",Ae.onload=function(X){a(X.target.response,H,B)},setTimeout(function(){Ae.send()},0),Ae}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(m))if(m.length>1024*1024*1.999&&Q!==ie)m=$(m),L=m.type||B;else return navigator.msSaveBlob?navigator.msSaveBlob($(m),H):le(m);else if(/([\x80-\xff])/.test(m)){var Te=0,ee=new Uint8Array(m.length),Le=ee.length;for(Te;Te<Le;++Te)ee[Te]=m.charCodeAt(Te);m=new Q([ee],{type:L})}ue=m instanceof Q?m:new Q([m],{type:L});function $(X){var Be=X.split(/[:;,]/),P=Be[1],d=Be[2]=="base64"?atob:decodeURIComponent,W=d(Be.pop()),F=W.length,Ne=0,Ce=new Uint8Array(F);for(Ne;Ne<F;++Ne)Ce[Ne]=W.charCodeAt(Ne);return new Q([Ce],{type:P})}function le(X,Be){if("download"in q)return q.href=X,q.setAttribute("download",H),q.className="download-js-link",q.innerHTML="downloading...",q.style.display="none",document.body.appendChild(q),setTimeout(function(){q.click(),document.body.removeChild(q),Be===!0&&setTimeout(function(){h.URL.revokeObjectURL(q.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(X)&&(X="data:"+X.replace(/^data:([\w\/\-\+]+)/,B)),window.open(X)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=X),!0;var P=document.createElement("iframe");document.body.appendChild(P),!Be&&/^data:/.test(X)&&(X="data:"+X.replace(/^data:([\w\/\-\+]+)/,B)),P.src=X,setTimeout(function(){document.body.removeChild(P)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(ue,H);if(h.URL)le(h.URL.createObjectURL(ue),!0);else{if(typeof ue=="string"||ue.constructor===ie)try{return le("data:"+L+";base64,"+h.btoa(ue))}catch{return le("data:"+L+","+encodeURIComponent(ue))}ne=new FileReader,ne.onload=function(X){le(this.result)},ne.readAsDataURL(ue)}return!0}})})(vo);var Ca=vo.exports;const xa=oo(Ca);function ja(s){let u,a,p,g,v;return{c(){u=pe("button"),u.textContent="Export DB",a=xe(),p=ui()},m(h,B){kt(h,u,B),kt(h,a,B),kt(h,p,B),g||(v=Ot(u,"click",s[0]),g=!0)},p(h,[B]){},i:$t,o:$t,d(h){h&&(St(u),St(a),St(p)),g=!1,v()}}}function Ba({totalRows:s,completedRows:u}){console.log(`Progress: ${u} of ${s} rows completed`)}function Ia(s){async function u(){if(confirm("Are you sure?"))try{const p=await fo(en,{prettyJson:!0,progressCallback:Ba});xa(p,"dexie-export.json","application/json")}catch(p){console.error(""+p)}}return[u]}class La extends Un{constructor(u){super(),Mn(this,u,Ia,ja,xn,{})}}function Hi(s){let u,a,p;return{c(){u=pe("div"),u.textContent="Drop dexie export JSON file here",Z(u,"id","dropzone"),Z(u,"class","svelte-jun42z")},m(g,v){kt(g,u,v),a||(p=[Ot(u,"dragover",Ka),Ot(u,"drop",s[2])],a=!0)},p:$t,d(g){g&&St(u),a=!1,yn(p)}}}function Fa(s){let u,a,p,g,v,h=s[0]&&Hi(s);return{c(){u=pe("button"),u.textContent="Import DB",a=xe(),h&&h.c(),p=ui()},m(B,L){kt(B,u,L),kt(B,a,L),h&&h.m(B,L),kt(B,p,L),g||(v=Ot(u,"click",s[1]),g=!0)},p(B,[L]){B[0]?h?h.p(B,L):(h=Hi(B),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null)},i:$t,o:$t,d(B){B&&(St(u),St(a),St(p)),h&&h.d(B),g=!1,v()}}}function Ra({totalRows:s,completedRows:u}){console.log(`Progress: ${u} of ${s} rows completed`)}function Ka(s){s.stopPropagation(),s.preventDefault(),s.dataTransfer.dropEffect="copy"}function Da(s,u,a){let p=!1;async function g(){a(0,p=!p)}async function v(h){console.log("drop",h),h.stopPropagation(),h.preventDefault();let B=new Bt("lensDb");B.version(1).stores({lenses:"++id, name, focalLength, mount, noOfBlades, frontFilter, closestFocusingDistance, comment"});const L=h.dataTransfer.files[0];try{if(!L)throw new Error("Only files can be dropped here");console.log("Importing "+L.name),await B.delete(),B=await Bt.import(L,{progressCallback:Ra}),console.log("Import complete")}catch(m){console.error(""+m)}}return[p,g,v]}class Ma extends Un{constructor(u){super(),Mn(this,u,Da,Fa,xn,{})}}function Qi(s){let u,a;return u=new oa({props:{lens:s[0]}}),u.$on("lensEditedEvent",s[2]),{c(){fn(u.$$.fragment)},m(p,g){on(u,p,g),a=!0},p(p,g){const v={};g&1&&(v.lens=p[0]),u.$set(v)},i(p){a||(zt(u.$$.fragment,p),a=!0)},o(p){Xt(u.$$.fragment,p),a=!1},d(p){an(u,p)}}}function Ua(s){var ue;let u,a,p,g,v,h=((ue=s[0])==null?void 0:ue.id)||0,B,L,m,Y,q,ie,Q,H=Qi(s);return L=new va({}),L.$on("clickedLensEvent",s[1]),Y=new La({}),ie=new Ma({}),{c(){u=pe("main"),a=pe("div"),a.innerHTML=`<a href="https://svelte.dev" target="_blank" rel="noreferrer"><img src="${Qo}" class="logo svelte svelte-bl7fmt" alt="Svelte Logo"/></a>`,p=xe(),g=pe("h1"),g.textContent="Lens DB",v=xe(),H.c(),B=xe(),fn(L.$$.fragment),m=xe(),fn(Y.$$.fragment),q=xe(),fn(ie.$$.fragment)},m(ne,Ae){kt(ne,u,Ae),U(u,a),U(u,p),U(u,g),U(u,v),H.m(u,null),U(u,B),on(L,u,null),U(u,m),on(Y,u,null),U(u,q),on(ie,u,null),Q=!0},p(ne,[Ae]){var Te;Ae&1&&xn(h,h=((Te=ne[0])==null?void 0:Te.id)||0)?(to(),Xt(H,1,1,$t),no(),H=Qi(ne),H.c(),zt(H,1),H.m(u,B)):H.p(ne,Ae)},i(ne){Q||(zt(H),zt(L.$$.fragment,ne),zt(Y.$$.fragment,ne),zt(ie.$$.fragment,ne),Q=!0)},o(ne){Xt(H),Xt(L.$$.fragment,ne),Xt(Y.$$.fragment,ne),Xt(ie.$$.fragment,ne),Q=!1},d(ne){ne&&St(u),H.d(ne),an(L),an(Y),an(ie)}}}function qa(){window.scrollTo(0,0)}function $a(s,u,a){let p=null;function g(h){p&&p.id&&h.detail&&h.detail.id&&h.detail.id===p.id?a(0,p=null):(a(0,p=h.detail),qa())}function v(){a(0,p=null)}return[p,g,v]}class za extends Un{constructor(u){super(),Mn(this,u,$a,Ua,xn,{})}}new za({target:document.getElementById("app")});
